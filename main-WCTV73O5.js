import{a as p,b as S,c as pn,d as yt,e as Of,f}from"./chunk-P4F3WYZT.js";var zv=null;var Pf=1,xf=Symbol("SIGNAL");function se(n){let e=zv;return zv=n,e}var qv={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function hS(n){if(!(Uf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Pf)){if(!n.producerMustRecompute(n)&&!Ff(n)){n.dirty=!1,n.lastCleanEpoch=Pf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Pf}}function Kv(n){return n&&(n.nextProducerIndex=0),se(n)}function Wv(n,e){if(se(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Uf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Lf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ff(n){Yl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(hS(t),r!==t.version))return!0}return!1}function Qv(n){if(Yl(n),Uf(n))for(let e=0;e<n.producerNode.length;e++)Lf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Lf(n,e){if(fS(n),Yl(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)Lf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];Yl(o),o.producerIndexOfThis[r]=e}}function Uf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function fS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function pS(){throw new Error}var mS=pS;function Yv(n){mS=n}function q(n){return typeof n=="function"}function Bi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Jl=Bi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function xa(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var xe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(i){e=i instanceof Jl?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{Jv(i)}catch(s){e=e??[],s instanceof Jl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Jl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Jv(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xa(t,e)}remove(e){let{_finalizers:t}=this;t&&xa(t,e),e instanceof n&&e._removeParent(this)}};xe.EMPTY=(()=>{let n=new xe;return n.closed=!0,n})();var Vf=xe.EMPTY;function Zl(n){return n instanceof xe||n&&"closed"in n&&q(n.remove)&&q(n.add)&&q(n.unsubscribe)}function Jv(n){q(n)?n():n.unsubscribe()}var Kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ji={setTimeout(n,e,...t){let{delegate:r}=ji;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ji;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xl(n){ji.setTimeout(()=>{let{onUnhandledError:e}=Kt;if(e)e(n);else throw n})}function Fa(){}var Zv=Hf("C",void 0,void 0);function Xv(n){return Hf("E",void 0,n)}function eC(n){return Hf("N",n,void 0)}function Hf(n,e,t){return{kind:n,value:e,error:t}}var mo=null;function $i(n){if(Kt.useDeprecatedSynchronousErrorHandling){let e=!mo;if(e&&(mo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=mo;if(mo=null,t)throw r}}else n()}function tC(n){Kt.useDeprecatedSynchronousErrorHandling&&mo&&(mo.errorThrown=!0,mo.error=n)}var go=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Zl(e)&&e.add(this)):this.destination=vS}static create(e,t,r){return new Gi(e,t,r)}next(e){this.isStopped?jf(eC(e),this):this._next(e)}error(e){this.isStopped?jf(Xv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jf(Zv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gS=Function.prototype.bind;function Bf(n,e){return gS.call(n,e)}var $f=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){eu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){eu(r)}else eu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){eu(t)}}},Gi=class extends go{constructor(e,t,r){super();let o;if(q(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Kt.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Bf(e.next,i),error:e.error&&Bf(e.error,i),complete:e.complete&&Bf(e.complete,i)}):o=e}this.destination=new $f(o)}};function eu(n){Kt.useDeprecatedSynchronousErrorHandling?tC(n):Xl(n)}function yS(n){throw n}function jf(n,e){let{onStoppedNotification:t}=Kt;t&&ji.setTimeout(()=>t(n,e))}var vS={closed:!0,next:Fa,error:yS,complete:Fa};var zi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function At(n){return n}function Gf(...n){return zf(n)}function zf(n){return n.length===0?At:n.length===1?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}var ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){let i=ES(t)?t:new Gi(t,r,o);return $i(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=nC(r),new r((o,i)=>{let s=new Gi({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[zi](){return this}pipe(...t){return zf(t)(this)}toPromise(t){return t=nC(t),new t((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function nC(n){var e;return(e=n??Kt.Promise)!==null&&e!==void 0?e:Promise}function CS(n){return n&&q(n.next)&&q(n.error)&&q(n.complete)}function ES(n){return n&&n instanceof go||CS(n)&&Zl(n)}function qf(n){return q(n?.lift)}function oe(n){return e=>{if(qf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function te(n,e,t,r,o){return new Kf(n,e,t,r,o)}var Kf=class extends go{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qi(){return oe((n,e)=>{let t=null;n._refCount++;let r=te(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ki=class extends ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,qf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let t=this.getSubject();e.add(this.source.subscribe(te(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return qi()(this)}};var rC=Bi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fe=(()=>{class n extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new tu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new rC}next(t){$i(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){$i(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){$i(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Vf:(this.currentObservers=null,i.push(t),new xe(()=>{this.currentObservers=null,xa(i,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){let t=new ie;return t.source=this,t}}return n.create=(e,t)=>new tu(e,t),n})(),tu=class extends Fe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Vf}};var Le=class extends Fe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Wf={now(){return(Wf.delegate||Date).now()},delegate:void 0};var La=class extends Fe{constructor(e=1/0,t=1/0,r=Wf){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var at=new ie(n=>n.complete());function oC(n){return n&&q(n.schedule)}function iC(n){return n[n.length-1]}function nu(n){return q(iC(n))?n.pop():void 0}function Sr(n){return oC(iC(n))?n.pop():void 0}function aC(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(h){s(h)}}function c(u){try{l(r.throw(u))}catch(h){s(h)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function sC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yo(n){return this instanceof yo?(this.v=n,this):new yo(n)}function cC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(w){return Promise.resolve(w).then(g,h)}}function a(g,w){r[g]&&(o[g]=function(I){return new Promise(function(N,L){i.push([g,I,N,L])>1||c(g,I)})},w&&(o[g]=w(o[g])))}function c(g,w){try{l(r[g](w))}catch(I){m(i[0][3],I)}}function l(g){g.value instanceof yo?Promise.resolve(g.value.v).then(u,h):m(i[0][2],g)}function u(g){c("next",g)}function h(g){c("throw",g)}function m(g,w){g(w),i.shift(),i.length&&c(i[0][0],i[0][1])}}function lC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof sC=="function"?sC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){s=n[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var ru=n=>n&&typeof n.length=="number"&&typeof n!="function";function ou(n){return q(n?.then)}function iu(n){return q(n[zi])}function su(n){return Symbol.asyncIterator&&q(n?.[Symbol.asyncIterator])}function au(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function IS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cu=IS();function lu(n){return q(n?.[cu])}function uu(n){return cC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:o}=yield yo(t.read());if(o)return yield yo(void 0);yield yield yo(r)}}finally{t.releaseLock()}})}function du(n){return q(n?.getReader)}function Re(n){if(n instanceof ie)return n;if(n!=null){if(iu(n))return wS(n);if(ru(n))return TS(n);if(ou(n))return _S(n);if(su(n))return uC(n);if(lu(n))return AS(n);if(du(n))return SS(n)}throw au(n)}function wS(n){return new ie(e=>{let t=n[zi]();if(q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function TS(n){return new ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function _S(n){return new ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xl)})}function AS(n){return new ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function uC(n){return new ie(e=>{bS(n,e).catch(t=>e.error(t))})}function SS(n){return uC(uu(n))}function bS(n,e){var t,r,o,i;return aC(this,void 0,void 0,function*(){try{for(t=lC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})}function vt(n,e,t,r=0,o=!1){let i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function hu(n,e=0){return oe((t,r)=>{t.subscribe(te(r,o=>vt(r,n,()=>r.next(o),e),()=>vt(r,n,()=>r.complete(),e),o=>vt(r,n,()=>r.error(o),e)))})}function fu(n,e=0){return oe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function dC(n,e){return Re(n).pipe(fu(e),hu(e))}function hC(n,e){return Re(n).pipe(fu(e),hu(e))}function fC(n,e){return new ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function pC(n,e){return new ie(t=>{let r;return vt(t,e,()=>{r=n[cu](),vt(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){t.error(s);return}i?t.complete():t.next(o)},0,!0)}),()=>q(r?.return)&&r.return()})}function pu(n,e){if(!n)throw new Error("Iterable cannot be null");return new ie(t=>{vt(t,e,()=>{let r=n[Symbol.asyncIterator]();vt(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function mC(n,e){return pu(uu(n),e)}function gC(n,e){if(n!=null){if(iu(n))return dC(n,e);if(ru(n))return fC(n,e);if(ou(n))return hC(n,e);if(su(n))return pu(n,e);if(lu(n))return pC(n,e);if(du(n))return mC(n,e)}throw au(n)}function X(n,e){return e?gC(n,e):Re(n)}function O(...n){let e=Sr(n);return X(n,e)}function Wi(n,e){let t=q(n)?n:()=>n,r=o=>o.error(t());return new ie(e?o=>e.schedule(r,0,o):r)}function Qf(n){return!!n&&(n instanceof ie||q(n.lift)&&q(n.subscribe))}var Wn=Bi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function $(n,e){return oe((t,r)=>{let o=0;t.subscribe(te(r,i=>{r.next(n.call(e,i,o++))}))})}var{isArray:DS}=Array;function MS(n,e){return DS(e)?n(...e):n(e)}function mu(n){return $(e=>MS(n,e))}var{isArray:RS}=Array,{getPrototypeOf:NS,prototype:kS,keys:OS}=Object;function gu(n){if(n.length===1){let e=n[0];if(RS(e))return{args:e,keys:null};if(PS(e)){let t=OS(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function PS(n){return n&&typeof n=="object"&&NS(n)===kS}function yu(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function Ua(...n){let e=Sr(n),t=nu(n),{args:r,keys:o}=gu(n);if(r.length===0)return X([],e);let i=new ie(xS(r,e,o?s=>yu(o,s):At));return t?i.pipe(mu(t)):i}function xS(n,e,t=At){return r=>{yC(e,()=>{let{length:o}=n,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)yC(e,()=>{let l=X(n[c],e),u=!1;l.subscribe(te(r,h=>{i[c]=h,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function yC(n,e,t){n?vt(t,n,e):e()}function vC(n,e,t,r,o,i,s,a){let c=[],l=0,u=0,h=!1,m=()=>{h&&!c.length&&!l&&e.complete()},g=I=>l<r?w(I):c.push(I),w=I=>{i&&e.next(I),l++;let N=!1;Re(t(I,u++)).subscribe(te(e,L=>{o?.(L),i?g(L):e.next(L)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let L=c.shift();s?vt(e,s,()=>w(L)):w(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(te(e,g,()=>{h=!0,m()})),()=>{a?.()}}function Ne(n,e,t=1/0){return q(e)?Ne((r,o)=>$((i,s)=>e(r,i,o,s))(Re(n(r,o))),t):(typeof e=="number"&&(t=e),oe((r,o)=>vC(r,o,n,t)))}function Qi(n=1/0){return Ne(At,n)}function CC(){return Qi(1)}function Yi(...n){return CC()(X(n,Sr(n)))}function vu(n){return new ie(e=>{Re(n()).subscribe(e)})}function Yf(...n){let e=nu(n),{args:t,keys:r}=gu(n),o=new ie(i=>{let{length:s}=t;if(!s){i.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let h=!1;Re(t[u]).subscribe(te(i,m=>{h||(h=!0,l--),a[u]=m},()=>c--,void 0,()=>{(!c||!h)&&(l||i.next(r?yu(r,a):a),i.complete())}))}});return e?o.pipe(mu(e)):o}function Ae(n,e){return oe((t,r)=>{let o=0;t.subscribe(te(r,i=>n.call(e,i,o++)&&r.next(i)))})}function Wt(n){return oe((e,t)=>{let r=null,o=!1,i;r=e.subscribe(te(t,void 0,void 0,s=>{i=Re(n(s,Wt(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function EC(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(te(s,u=>{let h=l++;c=a?n(c,u,h):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function xt(n,e){return q(e)?Ne(n,e,1):Ne(n,1)}function br(n){return oe((e,t)=>{let r=!1;e.subscribe(te(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function St(n){return n<=0?()=>at:oe((e,t)=>{let r=0;e.subscribe(te(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Jf(n){return $(()=>n)}function Cu(n=FS){return oe((e,t)=>{let r=!1;e.subscribe(te(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function FS(){return new Wn}function Dr(n){return oe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ae((o,i)=>n(o,i,r)):At,St(1),t?br(e):Cu(()=>new Wn))}function Ji(n){return n<=0?()=>at:oe((e,t)=>{let r=[];e.subscribe(te(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Zf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ae((o,i)=>n(o,i,r)):At,Ji(1),t?br(e):Cu(()=>new Wn))}function Xf(n,e){return oe(EC(n,e,arguments.length>=2,!0))}function ep(...n){let e=Sr(n);return oe((t,r)=>{(e?Yi(n,t,e):Yi(n,t)).subscribe(r)})}function ke(n,e){return oe((t,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();t.subscribe(te(r,c=>{o?.unsubscribe();let l=0,u=i++;Re(n(c,u)).subscribe(o=te(r,h=>r.next(e?e(c,h,u,l++):h),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function tp(n){return oe((e,t)=>{Re(n).subscribe(te(t,()=>t.complete(),Fa)),!t.closed&&e.subscribe(t)})}function Ge(n,e,t){let r=q(n)||e||t?{next:n,error:e,complete:t}:n;return r?oe((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(te(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):At}var LS="https://g.co/ng/security#xss",F=class extends Error{constructor(e,t){super(Qu(e,t)),this.code=e}};function Qu(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ja(n){return{toString:n}.toString()}var Eu="__parameters__";function US(n){return function(...t){if(n){let r=n(...t);for(let o in r)this[o]=r[o]}}}function oE(n,e,t){return Ja(()=>{let r=US(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,l,u){let h=c.hasOwnProperty(Eu)?c[Eu]:Object.defineProperty(c,Eu,{value:[]})[Eu];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),c}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}var Va=globalThis;function ue(n){for(let e in n)if(n[e]===ue)return e;throw Error("Could not find renamed property on target object.")}function VS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function lt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(lt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function IC(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var HS=ue({__forward_ref__:ue});function Yn(n){return n.__forward_ref__=Yn,n.toString=function(){return lt(this())},n}function ct(n){return iE(n)?n():n}function iE(n){return typeof n=="function"&&n.hasOwnProperty(HS)&&n.__forward_ref__===Yn}function k(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Zt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Yu(n){return wC(n,aE)||wC(n,cE)}function sE(n){return Yu(n)!==null}function wC(n,e){return n.hasOwnProperty(e)?n[e]:null}function BS(n){let e=n&&(n[aE]||n[cE]);return e||null}function TC(n){return n&&(n.hasOwnProperty(_C)||n.hasOwnProperty(jS))?n[_C]:null}var aE=ue({\u0275prov:ue}),_C=ue({\u0275inj:ue}),cE=ue({ngInjectableDef:ue}),jS=ue({ngInjectorDef:ue}),P=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=k({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function lE(n){return n&&!!n.\u0275providers}var $S=ue({\u0275cmp:ue}),GS=ue({\u0275dir:ue}),zS=ue({\u0275pipe:ue}),qS=ue({\u0275mod:ue}),Du=ue({\u0275fac:ue}),Ha=ue({__NG_ELEMENT_ID__:ue}),AC=ue({__NG_ENV_ID__:ue});function Mu(n){return typeof n=="string"?n:n==null?"":String(n)}function KS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Mu(n)}function WS(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new F(-200,n)}function im(n,e){throw new F(-201,!1)}var Y=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Y||{}),yp;function uE(){return yp}function Ft(n){let e=yp;return yp=n,e}function dE(n,e,t){let r=Yu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Y.Optional)return null;if(e!==void 0)return e;im(n,"Injector")}var QS={},Ba=QS,vp="__NG_DI_FLAG__",Ru="ngTempTokenPath",YS="ngTokenPath",JS=/\n/gm,ZS="\u0275",SC="__source",ns;function XS(){return ns}function Mr(n){let e=ns;return ns=n,e}function eb(n,e=Y.Default){if(ns===void 0)throw new F(-203,!1);return ns===null?dE(n,void 0,e):ns.get(n,e&Y.Optional?null:void 0,e)}function R(n,e=Y.Default){return(uE()||eb)(ct(n),e)}function A(n,e=Y.Default){return R(n,Ju(e))}function Ju(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cp(n){let e=[];for(let t=0;t<n.length;t++){let r=ct(n[t]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let o,i=Y.Default;for(let s=0;s<r.length;s++){let a=r[s],c=tb(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(R(o,i))}else e.push(R(r))}return e}function hE(n,e){return n[vp]=e,n.prototype[vp]=e,n}function tb(n){return n[vp]}function nb(n,e,t,r){let o=n[Ru];throw e[SC]&&o.unshift(e[SC]),n.message=rb(`
`+n.message,o,t,r),n[YS]=o,n[Ru]=null,n}function rb(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==ZS?n.slice(2):n;let o=lt(e);if(Array.isArray(e))o=e.map(lt).join(" -> ");else if(typeof e=="object"){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):lt(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(JS,`
  `)}`}var Zu=hE(oE("Optional"),8);var sm=hE(oE("SkipSelf"),4);function os(n,e){let t=n.hasOwnProperty(Du);return t?n[Du]:null}function am(n,e){n.forEach(t=>Array.isArray(t)?am(t,e):e(t))}function fE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Nu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ob(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(o===1)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let i=o-2;n[o]=n[i],o--}n[e]=t,n[e+1]=r}}function ib(n,e,t){let r=Za(n,e);return r>=0?n[r|1]=t:(r=~r,ob(n,r,e,t)),r}function np(n,e){let t=Za(n,e);if(t>=0)return n[t|1]}function Za(n,e){return sb(n,e,1)}function sb(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){let i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}var is={},Lt=[],ss=new P(""),pE=new P("",-1),mE=new P(""),ku=class{get(e,t=Ba){if(t===Ba){let r=new Error(`NullInjectorError: No provider for ${lt(e)}!`);throw r.name="NullInjectorError",r}return t}},gE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gE||{}),vn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(vn||{}),Xe=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Xe||{});function ab(n,e,t){let r=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}function Ep(n,e,t){let r=0;for(;r<t.length;){let o=t[r];if(typeof o=="number"){if(o!==0)break;r++;let i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{let i=o,s=t[++r];lb(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function cb(n){return n===3||n===4||n===6}function lb(n){return n.charCodeAt(0)===64}function ja(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?t=o:t===0||(t===-1||t===2?bC(n,t,o,null,e[++r]):bC(n,t,o,null,null))}}return n}function bC(n,e,t,r,o){let i=0,s=n.length;if(e===-1)s=-1;else for(;i<n.length;){let a=n[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<n.length;){let a=n[i];if(typeof a=="number")break;if(a===t){if(r===null){o!==null&&(n[i+1]=o);return}else if(r===n[i+1]){n[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),r!==null&&n.splice(i++,0,r),o!==null&&n.splice(i++,0,o)}var yE="ng-template";function ub(n,e,t,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&ab(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(cm(n))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===t)return!0}return!1}function cm(n){return n.type===4&&n.value!==yE}function db(n,e,t){let r=n.type===4&&!t?yE:n.value;return e===r}function hb(n,e,t){let r=4,o=n.attrs,i=o!==null?mb(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Qt(r)&&!Qt(c))return!1;if(s&&Qt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!db(n,c,t)||c===""&&e.length===1){if(Qt(r))return!1;s=!0}}else if(r&8){if(o===null||!ub(n,o,c,t)){if(Qt(r))return!1;s=!0}}else{let l=e[++a],u=fb(c,o,cm(n),t);if(u===-1){if(Qt(r))return!1;s=!0;continue}if(l!==""){let h;if(u>i?h="":h=o[u+1].toLowerCase(),r&2&&l!==h){if(Qt(r))return!1;s=!0}}}}return Qt(r)||s}function Qt(n){return(n&1)===0}function fb(n,e,t,r){if(e===null)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return gb(e,n)}function pb(n,e,t=!1){for(let r=0;r<e.length;r++)if(hb(n,e[r],t))return!0;return!1}function mb(n){for(let e=0;e<n.length;e++){let t=n[e];if(cb(t))return e}return n.length}function gb(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function DC(n,e){return n?":not("+e.trim()+")":e}function yb(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!Qt(s)&&(e+=DC(i,o),o=""),r=s,i=i||!Qt(r);t++}return o!==""&&(e+=DC(i,o)),e}function vb(n){return n.map(yb).join(",")}function Cb(n){let e=[],t=[],r=1,o=2;for(;r<n.length;){let i=n[r];if(typeof i=="string")o===2?i!==""&&e.push(i,n[++r]):o===8&&t.push(i);else{if(!Qt(o))break;o=i}r++}return{attrs:e,classes:t}}function qe(n){return Ja(()=>{let e=wE(n),t=S(p({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vn.Emulated,styles:n.styles||Lt,_:null,schemas:n.schemas||null,tView:null,id:""});TE(t);let r=n.dependencies;return t.directiveDefs=RC(r,!1),t.pipeDefs=RC(r,!0),t.id=wb(t),t})}function Eb(n){return Nr(n)||vE(n)}function Ib(n){return n!==null}function Xt(n){return Ja(()=>({type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function MC(n,e){if(n==null)return is;let t={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],i,s,a=Xe.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),e?(t[i]=a!==Xe.None?[r,a]:r,e[i]=s):t[i]=r}return t}function Oe(n){return Ja(()=>{let e=wE(n);return TE(e),e})}function Nr(n){return n[$S]||null}function vE(n){return n[GS]||null}function CE(n){return n[zS]||null}function EE(n){let e=Nr(n)||vE(n)||CE(n);return e!==null?e.standalone:!1}function IE(n,e){let t=n[qS]||null;if(!t&&e===!0)throw new Error(`Type ${lt(n)} does not have '\u0275mod' property.`);return t}function wE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||is,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:MC(n.inputs,e),outputs:MC(n.outputs),debugInfo:null}}function TE(n){n.features?.forEach(e=>e(n))}function RC(n,e){if(!n)return null;let t=e?CE:Eb;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Ib)}function wb(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let o of t)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function fs(n){return{\u0275providers:n}}function Tb(...n){return{\u0275providers:_E(!0,n),\u0275fromNgModule:!0}}function _E(n,...e){let t=[],r=new Set,o,i=s=>{t.push(s)};return am(e,s=>{let a=s;Ip(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&AE(o,i),t}function AE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:o}=n[t];lm(o,i=>{e(i,r)})}}function Ip(n,e,t,r){if(n=ct(n),!n)return!1;let o=null,i=TC(n),s=!i&&Nr(n);if(!i&&!s){let c=n.ngModule;if(i=TC(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Ip(l,e,t,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{am(i.imports,u=>{Ip(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&AE(l,e)}if(!a){let l=os(o)||(()=>new o);e({provide:o,useFactory:l,deps:Lt},o),e({provide:mE,useValue:o,multi:!0},o),e({provide:ss,useValue:()=>R(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=n;lm(c,u=>{e(u,l)})}}else return!1;return o!==n&&n.providers!==void 0}function lm(n,e){for(let t of n)lE(t)&&(t=t.\u0275providers),Array.isArray(t)?lm(t,e):e(t)}var _b=ue({provide:String,useValue:ue});function SE(n){return n!==null&&typeof n=="object"&&_b in n}function Ab(n){return!!(n&&n.useExisting)}function Sb(n){return!!(n&&n.useFactory)}function as(n){return typeof n=="function"}function bb(n){return!!n.useClass}var Xu=new P(""),Tu={},Db={},rp;function um(){return rp===void 0&&(rp=new ku),rp}var tt=class{},$a=class extends tt{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tp(e,s=>this.processProvider(s)),this.records.set(pE,Zi(void 0,this)),o.has("environment")&&this.records.set(tt,Zi(void 0,this));let i=this.records.get(Xu);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(mE,Lt,Y.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Mr(this),r=Ft(void 0),o;try{return e()}finally{Mr(t),Ft(r)}}get(e,t=Ba,r=Y.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(AC))return e[AC](this);r=Ju(r);let o,i=Mr(this),s=Ft(void 0);try{if(!(r&Y.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=Ob(e)&&Yu(e);l&&this.injectableDefInScope(l)?c=Zi(wp(e),Tu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Y.Self?um():this.parent;return t=r&Y.Optional&&t===Ba?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Ru]=a[Ru]||[]).unshift(lt(e)),i)throw a;return nb(a,e,"R3InjectorError",this.source)}else throw a}finally{Ft(s),Mr(i)}}resolveInjectorInitializers(){let e=se(null),t=Mr(this),r=Ft(void 0),o;try{let i=this.get(ss,Lt,Y.Self);for(let s of i)s()}finally{Mr(t),Ft(r),se(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(lt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(e){e=ct(e);let t=as(e)?e:ct(e&&e.provide),r=Rb(e);if(!as(e)&&e.multi===!0){let o=this.records.get(t);o||(o=Zi(void 0,Tu,!0),o.factory=()=>Cp(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=se(null);try{return t.value===Tu&&(t.value=Db,t.value=t.factory()),typeof t.value=="object"&&t.value&&kb(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ct(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function wp(n){let e=Yu(n),t=e!==null?e.factory:os(n);if(t!==null)return t;if(n instanceof P)throw new F(204,!1);if(n instanceof Function)return Mb(n);throw new F(204,!1)}function Mb(n){if(n.length>0)throw new F(204,!1);let t=BS(n);return t!==null?()=>t.factory(n):()=>new n}function Rb(n){if(SE(n))return Zi(void 0,n.useValue);{let e=bE(n);return Zi(e,Tu)}}function bE(n,e,t){let r;if(as(n)){let o=ct(n);return os(o)||wp(o)}else if(SE(n))r=()=>ct(n.useValue);else if(Sb(n))r=()=>n.useFactory(...Cp(n.deps||[]));else if(Ab(n))r=()=>R(ct(n.useExisting));else{let o=ct(n&&(n.useClass||n.provide));if(Nb(n))r=()=>new o(...Cp(n.deps));else return os(o)||wp(o)}return r}function Zi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Nb(n){return!!n.deps}function kb(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Ob(n){return typeof n=="function"||typeof n=="object"&&n instanceof P}function Tp(n,e){for(let t of n)Array.isArray(t)?Tp(t,e):t&&lE(t)?Tp(t.\u0275providers,e):e(t)}function en(n,e){n instanceof $a&&n.assertNotDestroyed();let t,r=Mr(n),o=Ft(void 0);try{return e()}finally{Mr(r),Ft(o)}}function DE(){return uE()!==void 0||XS()!=null}function Pb(n){if(!DE())throw new F(-203,!1)}function xb(n){return typeof n=="function"}var Jn=0,ne=1,H=2,nt=3,Yt=4,tn=5,Ou=6,Ga=7,Jt=8,cs=9,Cn=10,ze=11,za=12,NC=13,ps=14,En=15,ed=16,Xi=17,ls=18,td=19,ME=20,Rr=21,op=22,Eo=23,kr=25,RE=1;var Io=7,Pu=8,xu=9,Ut=10,dm=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(dm||{});function vo(n){return Array.isArray(n)&&typeof n[RE]=="object"}function Zn(n){return Array.isArray(n)&&n[RE]===!0}function NE(n){return(n.flags&4)!==0}function nd(n){return n.componentOffset>-1}function hm(n){return(n.flags&1)===1}function Or(n){return!!n.template}function Fb(n){return(n[H]&512)!==0}var _p=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function kE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function xr(){return OE}function OE(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ub),Lb}xr.ngInherit=!0;function Lb(){let n=xE(this),e=n?.current;if(e){let t=n.previous;if(t===is)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Ub(n,e,t,r,o){let i=this.declaredInputs[r],s=xE(n)||Vb(n,{previous:is,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new _p(l&&l.currentValue,t,c===is),kE(n,e,o,t)}var PE="__ngSimpleChanges__";function xE(n){return n[PE]||null}function Vb(n,e){return n[PE]=e}var kC=null;var gn=function(n,e,t){kC?.(n,e,t)},Hb="svg",Bb="math",jb=!1;function $b(){return jb}function In(n){for(;Array.isArray(n);)n=n[Jn];return n}function FE(n,e){return In(e[n])}function nn(n,e){return In(e[n.index])}function LE(n,e){return n.data[e]}function Fr(n,e){let t=e[n];return vo(t)?t:t[Jn]}function fm(n){return(n[H]&128)===128}function Gb(n){return Zn(n[nt])}function Fu(n,e){return e==null?null:n[e]}function UE(n){n[Xi]=0}function zb(n){n[H]&1024||(n[H]|=1024,fm(n)&&qa(n))}function qb(n,e){for(;n>0;)e=e[ps],n--;return e}function pm(n){return!!(n[H]&9216||n[Eo]?.dirty)}function Ap(n){n[Cn].changeDetectionScheduler?.notify(1),pm(n)?qa(n):n[H]&64&&($b()?(n[H]|=1024,qa(n)):n[Cn].changeDetectionScheduler?.notify())}function qa(n){n[Cn].changeDetectionScheduler?.notify();let e=Ka(n);for(;e!==null&&!(e[H]&8192||(e[H]|=8192,!fm(e)));)e=Ka(e)}function VE(n,e){if((n[H]&256)===256)throw new F(911,!1);n[Rr]===null&&(n[Rr]=[]),n[Rr].push(e)}function Kb(n,e){if(n[Rr]===null)return;let t=n[Rr].indexOf(e);t!==-1&&n[Rr].splice(t,1)}function Ka(n){let e=n[nt];return Zn(e)?e[nt]:e}var J={lFrame:WE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Wb(){return J.lFrame.elementDepthCount}function Qb(){J.lFrame.elementDepthCount++}function Yb(){J.lFrame.elementDepthCount--}function HE(){return J.bindingsEnabled}function Jb(){return J.skipHydrationRootTNode!==null}function Zb(n){return J.skipHydrationRootTNode===n}function Xb(){J.skipHydrationRootTNode=null}function fe(){return J.lFrame.lView}function Vt(){return J.lFrame.tView}function Tn(n){return J.lFrame.contextLView=n,n[Jt]}function _n(n){return J.lFrame.contextLView=null,n}function bt(){let n=BE();for(;n!==null&&n.type===64;)n=n.parent;return n}function BE(){return J.lFrame.currentTNode}function eD(){let n=J.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Xa(n,e){let t=J.lFrame;t.currentTNode=n,t.isParent=e}function jE(){return J.lFrame.isParent}function tD(){J.lFrame.isParent=!1}function $E(){let n=J.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function nD(){return J.lFrame.bindingIndex}function rD(n){return J.lFrame.bindingIndex=n}function mm(){return J.lFrame.bindingIndex++}function GE(n){let e=J.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function oD(){return J.lFrame.inI18n}function iD(n,e){let t=J.lFrame;t.bindingIndex=t.bindingRootIndex=n,Sp(e)}function sD(){return J.lFrame.currentDirectiveIndex}function Sp(n){J.lFrame.currentDirectiveIndex=n}function aD(n){let e=J.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function zE(n){J.lFrame.currentQueryIndex=n}function cD(n){let e=n[ne];return e.type===2?e.declTNode:e.type===1?n[tn]:null}function qE(n,e,t){if(t&Y.SkipSelf){let o=e,i=n;for(;o=o.parent,o===null&&!(t&Y.Host);)if(o=cD(i),o===null||(i=i[ps],o.type&10))break;if(o===null)return!1;e=o,n=i}let r=J.lFrame=KE();return r.currentTNode=e,r.lView=n,!0}function gm(n){let e=KE(),t=n[ne];J.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function KE(){let n=J.lFrame,e=n===null?null:n.child;return e===null?WE(n):e}function WE(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function QE(){let n=J.lFrame;return J.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var YE=QE;function ym(){let n=QE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function lD(n){return(J.lFrame.contextLView=qb(n,J.lFrame.contextLView))[Jt]}function Do(){return J.lFrame.selectedIndex}function wo(n){J.lFrame.selectedIndex=n}function JE(){let n=J.lFrame;return LE(n.tView,n.selectedIndex)}function uD(){return J.lFrame.currentNamespace}var ZE=!0;function vm(){return ZE}function Cm(n){ZE=n}function dD(n,e,t){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=OE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}function Em(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function _u(n,e,t){XE(n,e,3,t)}function Au(n,e,t,r){(n[H]&3)===t&&XE(n,e,t,r)}function ip(n,e){let t=n[H];(t&3)===e&&(t&=16383,t+=1,n[H]=t)}function XE(n,e,t,r){let o=r!==void 0?n[Xi]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Xi]+=65536),(a<i||i==-1)&&(hD(n,t,e,c),n[Xi]=(n[Xi]&4294901760)+c+2),c++}function OC(n,e){gn(4,n,e);let t=se(null);try{e.call(n)}finally{se(t),gn(5,n,e)}}function hD(n,e,t,r){let o=t[r]<0,i=t[r+1],s=o?-t[r]:t[r],a=n[s];o?n[H]>>14<n[Xi]>>16&&(n[H]&3)===e&&(n[H]+=16384,OC(a,i)):OC(a,i)}var rs=-1,To=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function fD(n){return n instanceof To}function pD(n){return(n.flags&8)!==0}function mD(n){return(n.flags&16)!==0}function eI(n){return n!==rs}function Lu(n){return n&32767}function gD(n){return n>>16}function Uu(n,e){let t=gD(n),r=e;for(;t>0;)r=r[ps],t--;return r}var bp=!0;function PC(n){let e=bp;return bp=n,e}var yD=256,tI=yD-1,nI=5,vD=0,yn={};function CD(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ha)&&(r=t[Ha]),r==null&&(r=t[Ha]=vD++);let o=r&tI,i=1<<o;e.data[n+(o>>nI)]|=i}function Vu(n,e){let t=rI(n,e);if(t!==-1)return t;let r=e[ne];r.firstCreatePass&&(n.injectorIndex=e.length,sp(r.data,n),sp(e,null),sp(r.blueprint,null));let o=Im(n,e),i=n.injectorIndex;if(eI(o)){let s=Lu(o),a=Uu(o,e),c=a[ne].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function sp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rI(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Im(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;o!==null;){if(r=cI(o),r===null)return rs;if(t++,o=o[ps],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return rs}function Dp(n,e,t){CD(n,e,t)}function oI(n,e,t){if(t&Y.Optional||n!==void 0)return n;im(e,"NodeInjector")}function iI(n,e,t,r){if(t&Y.Optional&&r===void 0&&(r=null),!(t&(Y.Self|Y.Host))){let o=n[cs],i=Ft(void 0);try{return o?o.get(e,r,t&Y.Optional):dE(e,r,t&Y.Optional)}finally{Ft(i)}}return oI(r,e,t)}function sI(n,e,t,r=Y.Default,o){if(n!==null){if(e[H]&2048&&!(r&Y.Self)){let s=_D(n,e,t,r,yn);if(s!==yn)return s}let i=aI(n,e,t,r,yn);if(i!==yn)return i}return iI(e,t,r,o)}function aI(n,e,t,r,o){let i=wD(t);if(typeof i=="function"){if(!qE(e,n,r))return r&Y.Host?oI(o,t,r):iI(e,t,r,o);try{let s;if(s=i(r),s==null&&!(r&Y.Optional))im(t);else return s}finally{YE()}}else if(typeof i=="number"){let s=null,a=rI(n,e),c=rs,l=r&Y.Host?e[En][tn]:null;for((a===-1||r&Y.SkipSelf)&&(c=a===-1?Im(n,e):e[a+8],c===rs||!FC(r,!1)?a=-1:(s=e[ne],a=Lu(c),e=Uu(c,e)));a!==-1;){let u=e[ne];if(xC(i,a,u.data)){let h=ED(a,e,t,s,r,l);if(h!==yn)return h}c=e[a+8],c!==rs&&FC(r,e[ne].data[a+8]===l)&&xC(i,a,e)?(s=u,a=Lu(c),e=Uu(c,e)):a=-1}}return o}function ED(n,e,t,r,o,i){let s=e[ne],a=s.data[n+8],c=r==null?nd(a)&&bp:r!=s&&(a.type&3)!==0,l=o&Y.Host&&i===a,u=ID(a,s,t,c,l);return u!==null?us(e,s,u,a):yn}function ID(n,e,t,r,o){let i=n.providerIndexes,s=e.data,a=i&1048575,c=n.directiveStart,l=n.directiveEnd,u=i>>20,h=r?a:a+u,m=o?a+u:l;for(let g=h;g<m;g++){let w=s[g];if(g<c&&t===w||g>=c&&w.type===t)return g}if(o){let g=s[c];if(g&&Or(g)&&g.type===t)return c}return null}function us(n,e,t,r){let o=n[t],i=e.data;if(fD(o)){let s=o;s.resolving&&WS(KS(i[t]));let a=PC(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Ft(s.injectImpl):null,u=qE(n,r,Y.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&dD(t,i[t],e)}finally{l!==null&&Ft(l),PC(a),s.resolving=!1,YE()}}return o}function wD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ha)?n[Ha]:void 0;return typeof e=="number"?e>=0?e&tI:TD:e}function xC(n,e,t){let r=1<<n;return!!(t[e+(n>>nI)]&r)}function FC(n,e){return!(n&Y.Self)&&!(n&Y.Host&&e)}var Co=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return sI(this._tNode,this._lView,e,Ju(r),t)}};function TD(){return new Co(bt(),fe())}function Mo(n){return Ja(()=>{let e=n.prototype.constructor,t=e[Du]||Mp(e),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let i=o[Du]||Mp(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Mp(n){return iE(n)?()=>{let e=Mp(ct(n));return e&&e()}:os(n)}function _D(n,e,t,r,o){let i=n,s=e;for(;i!==null&&s!==null&&s[H]&2048&&!(s[H]&512);){let a=aI(i,s,t,r|Y.Self,yn);if(a!==yn)return a;let c=i.parent;if(!c){let l=s[ME];if(l){let u=l.get(t,yn,r);if(u!==yn)return u}c=cI(s),s=s[ps]}i=c}return o}function cI(n){let e=n[ne],t=e.type;return t===2?e.declTNode:t===1?n[tn]:null}function LC(n,e=null,t=null,r){let o=lI(n,e,t,r);return o.resolveInjectorInitializers(),o}function lI(n,e=null,t=null,r,o=new Set){let i=[t||Lt,Tb(n)];return r=r||(typeof n=="object"?void 0:lt(n)),new $a(i,e||um(),r||null,o)}var rn=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Ba}static{this.NULL=new ku}static create(t,r){if(Array.isArray(t))return LC({name:""},r,t,"");{let o=t.name??"";return LC({name:o},t.parent,t.providers,o)}}static{this.\u0275prov=k({token:n,providedIn:"any",factory:()=>R(pE)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var AD="ngOriginalError";function ap(n){return n[AD]}var wn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ap(e);for(;t&&ap(t);)t=ap(t);return t||null}},uI=new P("",{providedIn:"root",factory:()=>A(wn).handleError.bind(void 0)}),wm=(()=>{class n{static{this.__NG_ELEMENT_ID__=SD}static{this.__NG_ENV_ID__=t=>t}}return n})(),Rp=class extends wm{constructor(e){super(),this._lView=e}onDestroy(e){return VE(this._lView,e),()=>Kb(this._lView,e)}};function SD(){return new Rp(fe())}function bD(){return rd(bt(),fe())}function rd(n,e){return new An(nn(n,e))}var An=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=bD}}return n})();var Np=class extends Fe{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,DE()&&(this.destroyRef=A(wm,{optional:!0})??void 0)}emit(e){let t=se(null);try{super.next(e)}finally{se(t)}}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=cp(i),o&&(o=cp(o)),s&&(s=cp(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof xe&&e.add(a),a}};function cp(n){return e=>{setTimeout(n,void 0,e)}}var ye=Np;function dI(n){return(n.flags&128)===128}var hI=new Map,DD=0;function MD(){return DD++}function RD(n){hI.set(n[td],n)}function ND(n){hI.delete(n[td])}var UC="__ngContext__";function _o(n,e){vo(e)?(n[UC]=e[td],RD(e)):n[UC]=e}function fI(n){return mI(n[za])}function pI(n){return mI(n[Yt])}function mI(n){for(;n!==null&&!Zn(n);)n=n[Yt];return n}var kp;function gI(n){kp=n}function kD(){if(kp!==void 0)return kp;if(typeof document<"u")return document;throw new F(210,!1)}var Tm=new P("",{providedIn:"root",factory:()=>OD}),OD="ng",_m=new P(""),Sn=new P("",{providedIn:"platform",factory:()=>"unknown"});var Am=new P("",{providedIn:"root",factory:()=>kD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var PD="h",xD="b";var FD=()=>null;function Sm(n,e,t=!1){return FD(n,e,t)}var yI=!1,LD=new P("",{providedIn:"root",factory:()=>yI});var Op=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${LS})`}};function bm(n){return n instanceof Op?n.changingThisBreaksApplicationSecurity:n}function vI(n){return n instanceof Function?n():n}function UD(n){return(n??A(rn)).get(Sn)==="browser"}var Qn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qn||{}),VD;function Dm(n,e){return VD(n,e)}function es(n,e,t,r,o){if(r!=null){let i,s=!1;Zn(r)?i=r:vo(r)&&(s=!0,r=r[Jn]);let a=In(r);n===0&&t!==null?o==null?TI(e,t,a):Hu(e,t,a,o||null,!0):n===1&&t!==null?Hu(e,t,a,o||null,!0):n===2?nM(e,a,s):n===3&&e.destroyNode(a),i!=null&&oM(e,n,i,t,o)}}function HD(n,e){return n.createText(e)}function BD(n,e,t){n.setValue(e,t)}function CI(n,e,t){return n.createElement(e,t)}function jD(n,e){EI(n,e),e[Jn]=null,e[tn]=null}function $D(n,e,t,r,o,i){r[Jn]=o,r[tn]=e,od(n,r,t,1,o,i)}function EI(n,e){e[Cn].changeDetectionScheduler?.notify(1),od(n,e,e[ze],2,null,null)}function GD(n){let e=n[za];if(!e)return lp(n[ne],n);for(;e;){let t=null;if(vo(e))t=e[za];else{let r=e[Ut];r&&(t=r)}if(!t){for(;e&&!e[Yt]&&e!==n;)vo(e)&&lp(e[ne],e),e=e[nt];e===null&&(e=n),vo(e)&&lp(e[ne],e),t=e&&e[Yt]}e=t}}function zD(n,e,t,r){let o=Ut+r,i=t.length;r>0&&(t[o-1][Yt]=e),r<i-Ut?(e[Yt]=t[o],fE(t,Ut+r,e)):(t.push(e),e[Yt]=null),e[nt]=t;let s=e[ed];s!==null&&t!==s&&qD(s,e);let a=e[ls];a!==null&&a.insertView(n),Ap(e),e[H]|=128}function qD(n,e){let t=n[xu],o=e[nt][nt][En];e[En]!==o&&(n[H]|=dm.HasTransplantedViews),t===null?n[xu]=[e]:t.push(e)}function II(n,e){let t=n[xu],r=t.indexOf(e);t.splice(r,1)}function Pp(n,e){if(n.length<=Ut)return;let t=Ut+e,r=n[t];if(r){let o=r[ed];o!==null&&o!==n&&II(o,r),e>0&&(n[t-1][Yt]=r[Yt]);let i=Nu(n,Ut+e);jD(r[ne],r);let s=i[ls];s!==null&&s.detachView(i[ne]),r[nt]=null,r[Yt]=null,r[H]&=-129}return r}function wI(n,e){if(!(e[H]&256)){let t=e[ze];t.destroyNode&&od(n,e,t,3,null,null),GD(e)}}function lp(n,e){if(e[H]&256)return;let t=se(null);try{e[H]&=-129,e[H]|=256,e[Eo]&&Qv(e[Eo]),WD(n,e),KD(n,e),e[ne].type===1&&e[ze].destroy();let r=e[ed];if(r!==null&&Zn(e[nt])){r!==e[nt]&&II(r,e);let o=e[ls];o!==null&&o.detachView(n)}ND(e)}finally{se(t)}}function KD(n,e){let t=n.cleanup,r=e[Ga];if(t!==null)for(let i=0;i<t.length-1;i+=2)if(typeof t[i]=="string"){let s=t[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[t[i+1]];t[i].call(s)}r!==null&&(e[Ga]=null);let o=e[Rr];if(o!==null){e[Rr]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function WD(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let o=e[t[r]];if(!(o instanceof To)){let i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];gn(4,a,c);try{c.call(a)}finally{gn(5,a,c)}}else{gn(4,o,i);try{i.call(o)}finally{gn(5,o,i)}}}}}function QD(n,e,t){return YD(n,e.parent,t)}function YD(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[Jn];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=n.data[r.directiveStart+o];if(i===vn.None||i===vn.Emulated)return null}return nn(r,t)}}function Hu(n,e,t,r,o){n.insertBefore(e,t,r,o)}function TI(n,e,t){n.appendChild(e,t)}function VC(n,e,t,r,o){r!==null?Hu(n,e,t,r,o):TI(n,e,t)}function JD(n,e,t,r){n.removeChild(e,t,r)}function Mm(n,e){return n.parentNode(e)}function ZD(n,e){return n.nextSibling(e)}function XD(n,e,t){return tM(n,e,t)}function eM(n,e,t){return n.type&40?nn(n,t):null}var tM=eM,HC;function Rm(n,e,t,r){let o=QD(n,r,e),i=e[ze],s=r.parent||e[tn],a=XD(s,r,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)VC(i,o,t[c],a,!1);else VC(i,o,t,a,!1);HC!==void 0&&HC(i,r,e,t,o)}function Su(n,e){if(e!==null){let t=e.type;if(t&3)return nn(e,n);if(t&4)return xp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Su(n,r);{let o=n[e.index];return Zn(o)?xp(-1,o):In(o)}}else{if(t&32)return Dm(e,n)()||In(n[e.index]);{let r=_I(n,e);if(r!==null){if(Array.isArray(r))return r[0];let o=Ka(n[En]);return Su(o,r)}else return Su(n,e.next)}}}return null}function _I(n,e){if(e!==null){let r=n[En][tn],o=e.projection;return r.projection[o]}return null}function xp(n,e){let t=Ut+n+1;if(t<e.length){let r=e[t],o=r[ne].firstChild;if(o!==null)return Su(r,o)}return e[Io]}function nM(n,e,t){let r=Mm(n,e);r&&JD(n,r,e,t)}function Nm(n,e,t,r,o,i,s){for(;t!=null;){let a=r[t.index],c=t.type;if(s&&e===0&&(a&&_o(In(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Nm(n,e,t.child,r,o,i,!1),es(e,n,o,a,i);else if(c&32){let l=Dm(t,r),u;for(;u=l();)es(e,n,o,u,i);es(e,n,o,a,i)}else c&16?rM(n,e,r,t,o,i):es(e,n,o,a,i);t=s?t.projectionNext:t.next}}function od(n,e,t,r,o,i){Nm(t,r,n.firstChild,e,o,i,!1)}function rM(n,e,t,r,o,i){let s=t[En],c=s[tn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];es(e,n,o,u,i)}else{let l=c,u=s[nt];dI(r)&&(l.flags|=128),Nm(n,e,l,u,o,i,!0)}}function oM(n,e,t,r,o){let i=t[Io],s=In(t);i!==s&&es(e,n,r,i,o);for(let a=Ut;a<t.length;a++){let c=t[a];od(c[ne],c,n,e,r,i)}}function iM(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=r.indexOf("-")===-1?void 0:Qn.DashCase;o==null?n.removeStyle(t,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Qn.Important),n.setStyle(t,r,o,i))}}function sM(n,e,t){n.setAttribute(e,"style",t)}function AI(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function SI(n,e,t){let{mergedAttrs:r,classes:o,styles:i}=t;r!==null&&Ep(n,e,r),o!==null&&AI(n,e,o),i!==null&&sM(n,e,i)}var Xn={};function U(n=1){bI(Vt(),fe(),Do()+n,!1)}function bI(n,e,t,r){if(!r)if((e[H]&3)===3){let i=n.preOrderCheckHooks;i!==null&&_u(e,i,t)}else{let i=n.preOrderHooks;i!==null&&Au(e,i,0,t)}wo(t)}function x(n,e=Y.Default){let t=fe();if(t===null)return R(n,e);let r=bt();return sI(r,t,ct(n),e)}function DI(){let n="invalid";throw new Error(n)}function MI(n,e,t,r,o,i){let s=se(null);try{let a=null;o&Xe.SignalBased&&(a=e[r][xf]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&Xe.HasDecoratorInputTransform&&(i=n.inputTransforms[r].call(e,i)),n.setInput!==null?n.setInput(e,a,i,t,r):kE(e,a,r,i)}finally{se(s)}}function aM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let o=t[r];if(o<0)wo(~o);else{let i=o,s=t[++r],a=t[++r];iD(s,i);let c=e[i];a(2,c)}}}finally{wo(-1)}}function id(n,e,t,r,o,i,s,a,c,l,u){let h=e.blueprint.slice();return h[Jn]=o,h[H]=r|4|128|8|64,(l!==null||n&&n[H]&2048)&&(h[H]|=2048),UE(h),h[nt]=h[ps]=n,h[Jt]=t,h[Cn]=s||n&&n[Cn],h[ze]=a||n&&n[ze],h[cs]=c||n&&n[cs]||null,h[tn]=i,h[td]=MD(),h[Ou]=u,h[ME]=l,h[En]=e.type==2?n[En]:h,h}function sd(n,e,t,r,o){let i=n.data[e];if(i===null)i=cM(n,e,t,r,o),oD()&&(i.flags|=32);else if(i.type&64){i.type=t,i.value=r,i.attrs=o;let s=eD();i.injectorIndex=s===null?-1:s.injectorIndex}return Xa(i,!0),i}function cM(n,e,t,r,o){let i=BE(),s=jE(),a=s?i:i&&i.parent,c=n.data[e]=fM(n,a,t,e,r,o);return n.firstChild===null&&(n.firstChild=c),i!==null&&(s?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function RI(n,e,t,r){if(t===0)return-1;let o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function NI(n,e,t,r,o){let i=Do(),s=r&2;try{wo(-1),s&&e.length>kr&&bI(n,e,kr,!1),gn(s?2:0,o),t(r,o)}finally{wo(i),gn(s?3:1,o)}}function kI(n,e,t){if(NE(e)){let r=se(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{se(r)}}}function OI(n,e,t){HE()&&(CM(n,e,t,nn(t,e)),(t.flags&64)===64&&VI(n,e,t))}function PI(n,e,t=nn){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function xI(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=km(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function km(n,e,t,r,o,i,s,a,c,l,u){let h=kr+r,m=h+o,g=lM(h,m),w=typeof l=="function"?l():l;return g[ne]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:u}}function lM(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Xn);return t}function uM(n,e,t,r){let i=r.get(LD,yI)||t===vn.ShadowDom,s=n.selectRootElement(e,i);return dM(s),s}function dM(n){hM(n)}var hM=()=>null;function fM(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return Jb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function BC(n,e,t,r,o){for(let i in e){if(!e.hasOwnProperty(i))continue;let s=e[i];if(s===void 0)continue;r??={};let a,c=Xe.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=i;if(o!==null){if(!o.hasOwnProperty(i))continue;l=o[i]}n===0?jC(r,t,l,a,c):jC(r,t,l,a)}return r}function jC(n,e,t,r,o){let i;n.hasOwnProperty(t)?(i=n[t]).push(e,r):i=n[t]=[e,r],o!==void 0&&i.push(o)}function pM(n,e,t){let r=e.directiveStart,o=e.directiveEnd,i=n.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<o;u++){let h=i[u],m=t?t.get(h):null,g=m?m.inputs:null,w=m?m.outputs:null;c=BC(0,h.inputs,u,c,g),l=BC(1,h.outputs,u,l,w);let I=c!==null&&s!==null&&!cm(e)?DM(c,u,s):null;a.push(I)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function mM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function FI(n,e,t,r,o,i,s,a){let c=nn(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Om(n,t,u,r,o),nd(e)&&gM(t,e.index)):e.type&3?(r=mM(r),o=s!=null?s(o,e.value||"",r):o,i.setProperty(c,r,o)):e.type&12}function gM(n,e){let t=Fr(e,n);t[H]&16||(t[H]|=64)}function LI(n,e,t,r){if(HE()){let o=r===null?null:{"":-1},i=IM(n,t),s,a;i===null?s=a=null:[s,a]=i,s!==null&&UI(n,e,t,s,o,a),o&&wM(t,r,o)}t.mergedAttrs=ja(t.mergedAttrs,t.attrs)}function UI(n,e,t,r,o,i){for(let l=0;l<r.length;l++)Dp(Vu(t,e),n,r[l].type);_M(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=RI(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=ja(t.mergedAttrs,u.hostAttrs),AM(n,t,e,c,u),TM(c,u,o),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let h=u.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}pM(n,t,i)}function yM(n,e,t,r,o){let i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;vM(s)!=a&&s.push(a),s.push(t,r,i)}}function vM(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function CM(n,e,t,r){let o=t.directiveStart,i=t.directiveEnd;nd(t)&&SM(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||Vu(t,e),_o(r,e);let s=t.initialInputs;for(let a=o;a<i;a++){let c=n.data[a],l=us(e,n,a,t);if(_o(l,e),s!==null&&bM(e,a-o,l,c,t,s),Or(c)){let u=Fr(t.index,e);u[Jt]=us(e,n,a,t)}}}function VI(n,e,t){let r=t.directiveStart,o=t.directiveEnd,i=t.index,s=sD();try{wo(i);for(let a=r;a<o;a++){let c=n.data[a],l=e[a];Sp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&EM(c,l)}}finally{wo(-1),Sp(s)}}function EM(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function IM(n,e){let t=n.directiveRegistry,r=null,o=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];if(pb(e,s.selectors,!1))if(r||(r=[]),Or(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let c=a.length;Fp(n,e,c)}else r.unshift(s),Fp(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function Fp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function wM(n,e,t){if(e){let r=n.localNames=[];for(let o=0;o<e.length;o+=2){let i=t[e[o+1]];if(i==null)throw new F(-301,!1);r.push(e[o],i)}}}function TM(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Or(e)&&(t[""]=n)}}function _M(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function AM(n,e,t,r,o){n.data[r]=o;let i=o.factory||(o.factory=os(o.type,!0)),s=new To(i,Or(o),x);n.blueprint[r]=s,t[r]=s,yM(n,e,r,RI(n,t,o.hostVars,Xn),o)}function SM(n,e,t){let r=nn(e,n),o=xI(t),i=n[Cn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=ad(n,id(n,o,null,s,r,e,null,i.createRenderer(r,t),null,null,null));n[e.index]=a}function bM(n,e,t,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],h=s[a++];MI(r,t,c,l,u,h)}}function DM(n,e,t){let r=null,o=0;for(;o<t.length;){let i=t[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(n.hasOwnProperty(i)){r===null&&(r=[]);let s=n[i];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(i,s[a+1],s[a+2],t[o+1]);break}}o+=2}return r}function HI(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function BI(n,e){let t=n.contentQueries;if(t!==null){let r=se(null);try{for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];zE(i),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function ad(n,e){return n[za]?n[NC][Yt]=e:n[za]=e,n[NC]=e,e}function Lp(n,e,t){zE(0);let r=se(null);try{e(n,t)}finally{se(r)}}function MM(n){return n[Ga]||(n[Ga]=[])}function RM(n){return n.cleanup||(n.cleanup=[])}function jI(n,e){let t=n[cs],r=t?t.get(wn,null):null;r&&r.handleError(e)}function Om(n,e,t,r,o){for(let i=0;i<t.length;){let s=t[i++],a=t[i++],c=t[i++],l=e[s],u=n.data[s];MI(u,l,r,a,c,o)}}function $I(n,e,t){let r=FE(e,n);BD(n[ze],r,t)}function NM(n,e){let t=Fr(e,n),r=t[ne];kM(r,t);let o=t[Jn];o!==null&&t[Ou]===null&&(t[Ou]=Sm(o,t[cs])),Pm(r,t,t[Jt])}function kM(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Pm(n,e,t){gm(e);try{let r=n.viewQuery;r!==null&&Lp(1,r,t);let o=n.template;o!==null&&NI(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ls]?.finishViewCreation(n),n.staticContentQueries&&BI(n,e),n.staticViewQueries&&Lp(2,n.viewQuery,t);let i=n.components;i!==null&&OM(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[H]&=-5,ym()}}function OM(n,e){for(let t=0;t<e.length;t++)NM(n,e[t])}function PM(n,e,t,r){let o=se(null);try{let i=e.tView,a=n[H]&4096?4096:16,c=id(n,i,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ed]=l;let u=n[ls];return u!==null&&(c[ls]=u.createEmbeddedView(i)),Pm(i,c,t),c}finally{se(o)}}function $C(n,e){return!e||e.firstChild===null||dI(n)}function xM(n,e,t,r=!0){let o=e[ne];if(zD(o,e,n,t),r){let s=xp(t,n),a=e[ze],c=Mm(a,n[Io]);c!==null&&$D(o,n[tn],a,e,c,s)}let i=e[Ou];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Bu(n,e,t,r,o=!1){for(;t!==null;){let i=e[t.index];i!==null&&r.push(In(i)),Zn(i)&&FM(i,r);let s=t.type;if(s&8)Bu(n,e,t.child,r);else if(s&32){let a=Dm(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=_I(e,t);if(Array.isArray(a))r.push(...a);else{let c=Ka(e[En]);Bu(c[ne],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function FM(n,e){for(let t=Ut;t<n.length;t++){let r=n[t],o=r[ne].firstChild;o!==null&&Bu(r[ne],r,o,e)}n[Io]!==n[Jn]&&e.push(n[Io])}var GI=[];function LM(n){return n[Eo]??UM(n)}function UM(n){let e=GI.pop()??Object.create(HM);return e.lView=n,e}function VM(n){n.lView[Eo]!==n&&(n.lView=null,GI.push(n))}var HM=S(p({},qv),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{qa(n.lView)},consumerOnSignalRead(){this.lView[Eo]=this}}),zI=100;function qI(n,e=!0,t=0){let r=n[Cn],o=r.rendererFactory,i=!1;i||o.begin?.();try{BM(n,t)}catch(s){throw e&&jI(n,s),s}finally{i||(o.end?.(),r.inlineEffectRunner?.flush())}}function BM(n,e){Up(n,e);let t=0;for(;pm(n);){if(t===zI)throw new F(103,!1);t++,Up(n,1)}}function jM(n,e,t,r){let o=e[H];if((o&256)===256)return;let i=!1;!i&&e[Cn].inlineEffectRunner?.flush(),gm(e);let s=null,a=null;!i&&$M(n)&&(a=LM(e),s=Kv(a));try{UE(e),rD(n.bindingStartIndex),t!==null&&NI(n,e,t,2,r);let c=(o&3)===3;if(!i)if(c){let h=n.preOrderCheckHooks;h!==null&&_u(e,h,null)}else{let h=n.preOrderHooks;h!==null&&Au(e,h,0,null),ip(e,0)}if(GM(e),KI(e,0),n.contentQueries!==null&&BI(n,e),!i)if(c){let h=n.contentCheckHooks;h!==null&&_u(e,h)}else{let h=n.contentHooks;h!==null&&Au(e,h,1),ip(e,1)}aM(n,e);let l=n.components;l!==null&&QI(e,l,0);let u=n.viewQuery;if(u!==null&&Lp(2,u,r),!i)if(c){let h=n.viewCheckHooks;h!==null&&_u(e,h)}else{let h=n.viewHooks;h!==null&&Au(e,h,2),ip(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[op]){for(let h of e[op])h();e[op]=null}i||(e[H]&=-73)}catch(c){throw qa(e),c}finally{a!==null&&(Wv(a,s),VM(a)),ym()}}function $M(n){return n.type!==2}function KI(n,e){for(let t=fI(n);t!==null;t=pI(t))for(let r=Ut;r<t.length;r++){let o=t[r];WI(o,e)}}function GM(n){for(let e=fI(n);e!==null;e=pI(e)){if(!(e[H]&dm.HasTransplantedViews))continue;let t=e[xu];for(let r=0;r<t.length;r++){let o=t[r],i=o[nt];zb(o)}}}function zM(n,e,t){let r=Fr(e,n);WI(r,t)}function WI(n,e){fm(n)&&Up(n,e)}function Up(n,e){let r=n[ne],o=n[H],i=n[Eo],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&Ff(i)),i&&(i.dirty=!1),n[H]&=-9217,s)jM(r,n,r.template,n[Jt]);else if(o&8192){KI(n,1);let a=r.components;a!==null&&QI(n,a,1)}}function QI(n,e,t){for(let r=0;r<e.length;r++)zM(n,e[r],t)}function xm(n){for(n[Cn].changeDetectionScheduler?.notify();n;){n[H]|=64;let e=Ka(n);if(Fb(n)&&!e)return n;n=e}return null}var Ao=class{get rootNodes(){let e=this._lView,t=e[ne];return Bu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jt]}set context(e){this._lView[Jt]=e}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[nt];if(Zn(e)){let t=e[Pu],r=t?t.indexOf(this):-1;r>-1&&(Pp(e,r),Nu(t,r))}this._attachedToViewContainer=!1}wI(this._lView[ne],this._lView)}onDestroy(e){VE(this._lView,e)}markForCheck(){xm(this._cdRefInjectingView||this._lView)}detach(){this._lView[H]&=-129}reattach(){Ap(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,qI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,EI(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e,Ap(this._lView)}},cd=(()=>{class n{static{this.__NG_ELEMENT_ID__=WM}}return n})(),qM=cd,KM=class extends qM{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let o=PM(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ao(o)}};function WM(){return QM(bt(),fe())}function QM(n,e){return n.type&4?new KM(e,n,rd(n,e)):null}var XH=new RegExp(`^(\\d+)*(${xD}|${PD})*(.*)`);var YM=()=>null;function GC(n,e){return YM(n,e)}var ju=class{},Vp=class{},$u=class{};function JM(n){let e=Error(`No component factory found for ${lt(n)}.`);return e[ZM]=n,e}var ZM="ngComponent";var Hp=class{resolveComponentFactory(e){throw JM(e)}},ld=(()=>{class n{static{this.NULL=new Hp}}return n})(),Wa=class{},er=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>XM()}}return n})();function XM(){let n=fe(),e=bt(),t=Fr(e.index,n);return(vo(t)?t:n)[ze]}var eR=(()=>{class n{static{this.\u0275prov=k({token:n,providedIn:"root",factory:()=>null})}}return n})(),up={};var zC=new Set;function ud(n){zC.has(n)||(zC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function qC(...n){}function tR(){let n=typeof Va.requestAnimationFrame=="function",e=Va[n?"requestAnimationFrame":"setTimeout"],t=Va[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var ve=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ye(!1),this.onMicrotaskEmpty=new ye(!1),this.onStable=new ye(!1),this.onError=new ye(!1),typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=tR().nativeRequestAnimationFrame,oR(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new F(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,nR,qC,qC);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},nR={};function Fm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rR(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Va,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Bp(n),n.isCheckStableRunning=!0,Fm(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Bp(n))}function oR(n){let e=()=>{rR(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,i,s,a)=>{if(iR(a))return t.invokeTask(o,i,s,a);try{return KC(n),t.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),WC(n)}},onInvoke:(t,r,o,i,s,a,c)=>{try{return KC(n),t.invoke(o,i,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),WC(n)}},onHasTask:(t,r,o,i)=>{t.hasTask(o,i),r===o&&(i.change=="microTask"?(n._hasPendingMicrotasks=i.microTask,Bp(n),Fm(n)):i.change=="macroTask"&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,o,i)=>(t.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}function Bp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function KC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function WC(n){n._nesting--,Fm(n)}function iR(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var ts=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ts||{}),sR={destroy(){}};function dd(n,e){!e&&Pb(dd);let t=e?.injector??A(rn);if(!UD(t))return sR;ud("NgAfterNextRender");let r=t.get(Lm),o=r.handler??=new $p,i=e?.phase??ts.MixedReadWrite,s=()=>{o.unregister(c),a()},a=t.get(wm).onDestroy(s),c=en(t,()=>new jp(i,()=>{s(),n()}));return o.register(c),{destroy:s}}var jp=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=A(ve),this.errorHandler=A(wn,{optional:!0}),A(ju,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},$p=class{constructor(){this.executingCallbacks=!1,this.buckets={[ts.EarlyRead]:new Set,[ts.Write]:new Set,[ts.MixedReadWrite]:new Set,[ts.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Lm=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Gp(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=IC(o,a);else if(i==2){let c=a,l=e[++s];r=IC(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}var Gu=class extends ld{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Nr(e);return new ds(t,this.ngModule)}};function QC(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function aR(n){let e=n.toLowerCase();return e==="svg"?Hb:e==="math"?Bb:null}var zp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ju(r);let o=this.injector.get(e,up,r);return o!==up||t===up?o:this.parentInjector.get(e,t,r)}},ds=class extends $u{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=QC(e.inputs);if(t!==null)for(let o of r)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return r}get outputs(){return QC(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=vb(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=se(null);try{o=o||this.ngModule;let s=o instanceof tt?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new zp(e,s):e,c=a.get(Wa,null);if(c===null)throw new F(407,!1);let l=a.get(eR,null),u=a.get(Lm,null),h=a.get(ju,null),m={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:h},g=c.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",I=r?uM(g,r,this.componentDef.encapsulation,a):CI(g,w,aR(w)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let L=null;I!==null&&(L=Sm(I,a,!0));let ge=km(0,null,null,1,0,null,null,null,null,null,null),ee=id(null,ge,null,N,null,null,m,g,a,null,L);gm(ee);let Ze,Tt;try{let _t=this.componentDef,Hi,kf=null;_t.findHostDirectiveDefs?(Hi=[],kf=new Map,_t.findHostDirectiveDefs(_t,Hi,kf),Hi.push(_t)):Hi=[_t];let uS=cR(ee,I),dS=lR(uS,I,_t,Hi,ee,m,g);Tt=LE(ge,kr),I&&hR(g,_t,I,r),t!==void 0&&fR(Tt,this.ngContentSelectors,t),Ze=dR(dS,_t,Hi,kf,ee,[pR]),Pm(ge,ee,null)}finally{ym()}return new qp(this.componentType,Ze,rd(Tt,ee),ee,Tt)}finally{se(i)}}},qp=class extends Vp{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ao(o,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,o;if(r!==null&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView;Om(i[ne],i,o,e,t),this.previousInputValues.set(e,t);let s=Fr(this._tNode.index,i);xm(s)}}get injector(){return new Co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function cR(n,e){let t=n[ne],r=kr;return n[r]=e,sd(t,r,2,"#host",null)}function lR(n,e,t,r,o,i,s){let a=o[ne];uR(r,n,e,s);let c=null;e!==null&&(c=Sm(e,o[cs]));let l=i.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let h=id(o,xI(t),null,u,o[n.index],n,i,l,null,null,c);return a.firstCreatePass&&Fp(a,n,r.length-1),ad(o,h),o[n.index]=h}function uR(n,e,t,r){for(let o of n)e.mergedAttrs=ja(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(Gp(e,e.mergedAttrs,!0),t!==null&&SI(r,t,e))}function dR(n,e,t,r,o,i){let s=bt(),a=o[ne],c=nn(s,o);UI(a,o,s,t,null,r);for(let u=0;u<t.length;u++){let h=s.directiveStart+u,m=us(o,a,h,s);_o(m,o)}VI(a,o,s),c&&_o(c,o);let l=us(o,a,s.directiveStart+s.componentOffset,s);if(n[Jt]=o[Jt]=l,i!==null)for(let u of i)u(l,e);return kI(a,s,o),l}function hR(n,e,t,r){if(r)Ep(n,t,["ng-version","17.3.12"]);else{let{attrs:o,classes:i}=Cb(e.selectors[0]);o&&Ep(n,t,o),i&&i.length>0&&AI(n,t,i.join(" "))}}function fR(n,e,t){let r=n.projection=[];for(let o=0;o<e.length;o++){let i=t[o];r.push(i!=null?Array.from(i):null)}}function pR(){let n=bt();Em(fe()[ne],n)}var ms=(()=>{class n{static{this.__NG_ELEMENT_ID__=mR}}return n})();function mR(){let n=bt();return yR(n,fe())}var gR=ms,YI=class extends gR{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return rd(this._hostTNode,this._hostLView)}get injector(){return new Co(this._hostTNode,this._hostLView)}get parentInjector(){let e=Im(this._hostTNode,this._hostLView);if(eI(e)){let t=Uu(e,this._hostLView),r=Lu(e),o=t[ne].data[r+8];return new Co(o,t)}else return new Co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=YC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ut}createEmbeddedView(e,t,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=GC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,s);return this.insertImpl(a,o,$C(this._hostTNode,s)),a}createComponent(e,t,r,o,i){let s=e&&!xb(e),a;if(s)a=t;else{let w=t||{};a=w.index,r=w.injector,o=w.projectableNodes,i=w.environmentInjector||w.ngModuleRef}let c=s?e:new ds(Nr(e)),l=r||this.parentInjector;if(!i&&c.ngModule==null){let I=(s?l:this.parentInjector).get(tt,null);I&&(i=I)}let u=Nr(c.componentType??{}),h=GC(this._lContainer,u?.id??null),m=h?.firstChild??null,g=c.create(l,o,m,i);return this.insertImpl(g.hostView,a,$C(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let o=e._lView;if(Gb(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[nt],l=new YI(c,c[tn],c[nt]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(t),s=this._lContainer;return xM(s,o,i,r),e.attachToViewContainerRef(),fE(dp(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=YC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Pp(this._lContainer,t);r&&(Nu(dp(this._lContainer),t),wI(r[ne],r))}detach(e){let t=this._adjustIndex(e,-1),r=Pp(this._lContainer,t);return r&&Nu(dp(this._lContainer),t)!=null?new Ao(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function YC(n){return n[Pu]}function dp(n){return n[Pu]||(n[Pu]=[])}function yR(n,e){let t,r=e[n.index];return Zn(r)?t=r:(t=HI(r,e,null,n),e[n.index]=t,ad(e,t)),CR(t,e,n,r),new YI(t,n,e)}function vR(n,e){let t=n[ze],r=t.createComment(""),o=nn(e,n),i=Mm(t,o);return Hu(t,i,r,ZD(t,o),!1),r}var CR=wR,ER=()=>!1;function IR(n,e,t){return ER(n,e,t)}function wR(n,e,t,r){if(n[Io])return;let o;t.type&8?o=In(r):o=vR(e,t),n[Io]=o}function TR(n){return typeof n=="function"&&n[xf]!==void 0}function JI(n){return TR(n)&&typeof n.set=="function"}function _R(n){return Object.getPrototypeOf(n.prototype).constructor}function on(n){let e=_R(n.type),t=!0,r=[n];for(;e;){let o;if(Or(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);o=e.\u0275dir}if(o){if(t){r.push(o);let s=n;s.inputs=Iu(n.inputs),s.inputTransforms=Iu(n.inputTransforms),s.declaredInputs=Iu(n.declaredInputs),s.outputs=Iu(n.outputs);let a=o.hostBindings;a&&MR(n,a);let c=o.viewQuery,l=o.contentQueries;if(c&&bR(n,c),l&&DR(n,l),AR(n,o),VS(n.outputs,o.outputs),Or(o)&&o.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(n),a===on&&(t=!1)}}e=Object.getPrototypeOf(e)}SR(r)}function AR(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(o))continue;n.inputTransforms??={},n.inputTransforms[o]=e.inputTransforms[o]}}}function SR(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let o=n[r];o.hostVars=e+=o.hostVars,o.hostAttrs=ja(o.hostAttrs,t=ja(t,o.hostAttrs))}}function Iu(n){return n===is?{}:n===Lt?[]:n}function bR(n,e){let t=n.viewQuery;t?n.viewQuery=(r,o)=>{e(r,o),t(r,o)}:n.viewQuery=e}function DR(n,e){let t=n.contentQueries;t?n.contentQueries=(r,o,i)=>{e(r,o,i),t(r,o,i)}:n.contentQueries=e}function MR(n,e){let t=n.hostBindings;t?n.hostBindings=(r,o)=>{e(r,o),t(r,o)}:n.hostBindings=e}var Pr=class{},Qa=class{};var Kp=class extends Pr{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gu(this);let o=IE(e);this._bootstrapComponents=vI(o.bootstrap),this._r3Injector=lI(e,t,[{provide:Pr,useValue:this},{provide:ld,useValue:this.componentFactoryResolver},...r],lt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wp=class extends Qa{constructor(e){super(),this.moduleType=e}create(e){return new Kp(this.moduleType,e,[])}};var zu=class extends Pr{constructor(e){super(),this.componentFactoryResolver=new Gu(this),this.instance=null;let t=new $a([...e.providers,{provide:Pr,useValue:this},{provide:ld,useValue:this.componentFactoryResolver}],e.parent||um(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function hd(n,e,t=null){return new zu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Ro=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Le(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZI(n){return NR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function RR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function NR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function XI(n,e,t){return n[e]=t}function So(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function ew(n,e,t,r){let o=So(n,e,t);return So(n,e+1,r)||o}function kR(n){return(n.flags&32)===32}function OR(n,e,t,r,o,i,s,a,c){let l=e.consts,u=sd(e,n,4,s||null,Fu(l,a));LI(e,t,u,Fu(l,c)),Em(e,u);let h=u.tView=km(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}function Ke(n,e,t,r,o,i,s,a){let c=fe(),l=Vt(),u=n+kr,h=l.firstCreatePass?OR(u,l,c,e,t,r,o,i,s):l.data[u];Xa(h,!1);let m=PR(l,c,h,n);vm()&&Rm(l,c,m,h),_o(m,c);let g=HI(m,c,m,h);return c[u]=g,ad(c,g),IR(g,h,c),hm(h)&&OI(l,c,h),s!=null&&PI(c,h,a),Ke}var PR=xR;function xR(n,e,t,r){return Cm(!0),e[ze].createComment("")}function FR(n,e,t,r){return So(n,mm(),t)?e+Mu(t)+r:Xn}function LR(n,e,t,r,o,i){let s=nD(),a=ew(n,s,t,o);return GE(2),a?e+Mu(t)+r+Mu(o)+i:Xn}function wu(n,e){return n<<17|e<<2}function bo(n){return n>>17&32767}function UR(n){return(n&2)==2}function VR(n,e){return n&131071|e<<17}function Qp(n){return n|2}function hs(n){return(n&131068)>>2}function hp(n,e){return n&-131069|e<<2}function HR(n){return(n&1)===1}function Yp(n){return n|1}function BR(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=bo(s),c=hs(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||Za(h,u)>0)&&(l=!0)}else u=t;if(o)if(c!==0){let m=bo(n[a+1]);n[r+1]=wu(m,a),m!==0&&(n[m+1]=hp(n[m+1],r)),n[a+1]=VR(n[a+1],r)}else n[r+1]=wu(a,0),a!==0&&(n[a+1]=hp(n[a+1],r)),a=r;else n[r+1]=wu(c,0),a===0?a=r:n[c+1]=hp(n[c+1],r),c=r;l&&(n[r+1]=Qp(n[r+1])),JC(n,u,r,!0),JC(n,u,r,!1),jR(e,u,n,r,i),s=wu(a,c),i?e.classBindings=s:e.styleBindings=s}function jR(n,e,t,r,o){let i=o?n.residualClasses:n.residualStyles;i!=null&&typeof e=="string"&&Za(i,e)>=0&&(t[r+1]=Yp(t[r+1]))}function JC(n,e,t,r){let o=n[t+1],i=e===null,s=r?bo(o):hs(o),a=!1;for(;s!==0&&(a===!1||i);){let c=n[s],l=n[s+1];$R(c,e)&&(a=!0,n[s+1]=r?Yp(l):Qp(l)),s=r?bo(l):hs(l)}a&&(n[t+1]=r?Qp(o):Yp(o))}function $R(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Za(n,e)>=0:!1}function ae(n,e,t){let r=fe(),o=mm();if(So(r,o,e)){let i=Vt(),s=JE();FI(i,s,r,n,e,r[ze],t,!1)}return ae}function ZC(n,e,t,r,o){let i=e.inputs,s=o?"class":"style";Om(n,t,i[s],s,r)}function fd(n,e){return GR(n,e,null,!0),fd}function GR(n,e,t,r){let o=fe(),i=Vt(),s=GE(2);if(i.firstUpdatePass&&qR(i,n,s,r),e!==Xn&&So(o,s,e)){let a=i.data[Do()];JR(i,a,o,o[ze],n,o[s+1]=ZR(e,t),r,s)}}function zR(n,e){return e>=n.expandoStartIndex}function qR(n,e,t,r){let o=n.data;if(o[t+1]===null){let i=o[Do()],s=zR(n,t);XR(i,r)&&e===null&&!s&&(e=!1),e=KR(o,i,e,r),BR(o,i,e,t,s,r)}}function KR(n,e,t,r){let o=aD(n),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(t=fp(null,n,e,t,r),t=Ya(t,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==o)if(t=fp(o,n,e,t,r),i===null){let c=WR(n,e,r);c!==void 0&&Array.isArray(c)&&(c=fp(null,n,e,c[1],r),c=Ya(c,e.attrs,r),QR(n,e,r,c))}else i=YR(n,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),t}function WR(n,e,t){let r=t?e.classBindings:e.styleBindings;if(hs(r)!==0)return n[bo(r)]}function QR(n,e,t,r){let o=t?e.classBindings:e.styleBindings;n[bo(o)]=r}function YR(n,e,t){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=n[i].hostAttrs;r=Ya(r,s,t)}return Ya(r,e.attrs,t)}function fp(n,e,t,r,o){let i=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(i=e[a],r=Ya(r,i.hostAttrs,o),i!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ya(n,e,t){let r=t?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ib(n,s,t?!0:e[++i]))}return n===void 0?null:n}function JR(n,e,t,r,o,i,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=HR(l)?XC(c,e,t,o,hs(l),s):void 0;if(!qu(u)){qu(i)||UR(l)&&(i=XC(c,null,t,o,a,s));let h=FE(Do(),t);iM(r,s,h,o,i)}}function XC(n,e,t,r,o,i){let s=e===null,a;for(;o>0;){let c=n[o],l=Array.isArray(c),u=l?c[1]:c,h=u===null,m=t[o+1];m===Xn&&(m=h?Lt:void 0);let g=h?np(m,r):u===r?m:void 0;if(l&&!qu(g)&&(g=np(c,r)),qu(g)&&(a=g,s))return a;let w=n[o+1];o=s?bo(w):hs(w)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(a=np(c,r))}return a}function qu(n){return n!==void 0}function ZR(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=lt(bm(n)))),n}function XR(n,e){return(n.flags&(e?8:16))!==0}function e0(n,e,t,r,o,i){let s=e.consts,a=Fu(s,o),c=sd(e,n,2,r,a);return LI(e,t,c,Fu(s,i)),c.attrs!==null&&Gp(c,c.attrs,!1),c.mergedAttrs!==null&&Gp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function _(n,e,t,r){let o=fe(),i=Vt(),s=kr+n,a=o[ze],c=i.firstCreatePass?e0(s,i,o,e,t,r):i.data[s],l=t0(i,o,c,a,e,n);o[s]=l;let u=hm(c);return Xa(c,!0),SI(a,l,c),!kR(c)&&vm()&&Rm(i,o,l,c),Wb()===0&&_o(l,o),Qb(),u&&(OI(i,o,c),kI(i,c,o)),r!==null&&PI(o,c),_}function T(){let n=bt();jE()?tD():(n=n.parent,Xa(n,!1));let e=n;Zb(e)&&Xb(),Yb();let t=Vt();return t.firstCreatePass&&(Em(t,n),NE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&pD(e)&&ZC(t,e,fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&mD(e)&&ZC(t,e,fe(),e.stylesWithoutHost,!1),T}function Ue(n,e,t,r){return _(n,e,t,r),T(),Ue}var t0=(n,e,t,r,o,i)=>(Cm(!0),CI(r,o,uD()));function tr(){return fe()}var Ku="en-US";var n0=Ku;function r0(n){typeof n=="string"&&(n0=n.toLowerCase().replace(/_/g,"-"))}function W(n,e,t,r){let o=fe(),i=Vt(),s=bt();return tw(i,o,o[ze],s,n,e,r),W}function o0(n,e,t,r){let o=n.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===t&&o[i+1]===r){let a=e[Ga],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function tw(n,e,t,r,o,i,s){let a=hm(r),l=n.firstCreatePass&&RM(n),u=e[Jt],h=MM(e),m=!0;if(r.type&3||s){let I=nn(r,e),N=s?s(I):I,L=h.length,ge=s?Ze=>s(In(Ze[r.index])):r.index,ee=null;if(!s&&a&&(ee=o0(n,e,o,r.index)),ee!==null){let Ze=ee.__ngLastListenerFn__||ee;Ze.__ngNextListenerFn__=i,ee.__ngLastListenerFn__=i,m=!1}else{i=tE(r,e,u,i,!1);let Ze=t.listen(N,o,i);h.push(i,Ze),l&&l.push(o,ge,L,L+1)}}else i=tE(r,e,u,i,!1);let g=r.outputs,w;if(m&&g!==null&&(w=g[o])){let I=w.length;if(I)for(let N=0;N<I;N+=2){let L=w[N],ge=w[N+1],Tt=e[L][ge].subscribe(i),_t=h.length;h.push(i,Tt),l&&l.push(o,r.index,_t,-(_t+1))}}}function eE(n,e,t,r){let o=se(null);try{return gn(6,e,t),t(r)!==!1}catch(i){return jI(n,i),!1}finally{gn(7,e,t),se(o)}}function tE(n,e,t,r,o){return function i(s){if(s===Function)return r;let a=n.componentOffset>-1?Fr(n.index,e):e;xm(a);let c=eE(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)c=eE(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return o&&c===!1&&s.preventDefault(),c}}function Ve(n=1){return lD(n)}function b(n,e=""){let t=fe(),r=Vt(),o=n+kr,i=r.firstCreatePass?sd(r,o,1,e,null):r.data[o],s=i0(r,t,i,e,n);t[o]=s,vm()&&Rm(r,t,s,i),Xa(i,!1)}var i0=(n,e,t,r,o)=>(Cm(!0),HD(e[ze],r));function Ht(n){return Bt("",n,""),Ht}function Bt(n,e,t){let r=fe(),o=FR(r,n,e,t);return o!==Xn&&$I(r,Do(),o),Bt}function Um(n,e,t,r,o){let i=fe(),s=LR(i,n,e,t,r,o);return s!==Xn&&$I(i,Do(),s),Um}function Vm(n,e,t){JI(e)&&(e=e());let r=fe(),o=mm();if(So(r,o,e)){let i=Vt(),s=JE();FI(i,s,r,n,e,r[ze],t,!1)}return Vm}function nw(n,e){let t=JI(n);return t&&n.set(e),t}function Hm(n,e){let t=fe(),r=Vt(),o=bt();return tw(r,t,t[ze],o,n,e),Hm}function s0(n,e,t){let r=Vt();if(r.firstCreatePass){let o=Or(n);Jp(t,r.data,r.blueprint,o,!0),Jp(e,r.data,r.blueprint,o,!1)}}function Jp(n,e,t,r,o){if(n=ct(n),Array.isArray(n))for(let i=0;i<n.length;i++)Jp(n[i],e,t,r,o);else{let i=Vt(),s=fe(),a=bt(),c=as(n)?n:ct(n.provide),l=bE(n),u=a.providerIndexes&1048575,h=a.directiveStart,m=a.providerIndexes>>20;if(as(n)||!n.multi){let g=new To(l,o,x),w=mp(c,e,o?u:u+m,h);w===-1?(Dp(Vu(a,s),i,c),pp(i,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[w]=g,s[w]=g)}else{let g=mp(c,e,u+m,h),w=mp(c,e,u,u+m),I=g>=0&&t[g],N=w>=0&&t[w];if(o&&!N||!o&&!I){Dp(Vu(a,s),i,c);let L=l0(o?c0:a0,t.length,o,r,l);!o&&N&&(t[w].providerFactory=L),pp(i,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(L),s.push(L)}else{let L=rw(t[o?w:g],l,!o&&r);pp(i,n,g>-1?g:w,L)}!o&&r&&N&&t[w].componentProviders++}}}function pp(n,e,t,r){let o=as(e),i=bb(e);if(o||i){let c=(i?ct(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function rw(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function mp(n,e,t,r){for(let o=t;o<r;o++)if(e[o]===n)return o;return-1}function a0(n,e,t,r){return Zp(this.multi,[])}function c0(n,e,t,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=us(t,t[ne],this.providerFactory.index,r);i=a.slice(0,s),Zp(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],Zp(o,i);return i}function Zp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function l0(n,e,t,r,o){let i=new To(n,t,x);return i.multi=[],i.index=e,i.componentProviders=0,rw(i,o,r&&!t),i}function No(n,e=[]){return t=>{t.providersResolver=(r,o)=>s0(r,o?o(n):n,e)}}var u0=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=_E(!1,t.type),o=r.length>0?hd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=k({token:n,providedIn:"environment",factory:()=>new n(R(tt))})}}return n})();function rt(n){ud("NgStandalone"),n.getStandaloneInjector=e=>e.get(u0).getOrCreateStandaloneInjector(n)}function ow(n,e,t,r){return d0(fe(),$E(),n,e,t,r)}function iw(n,e,t,r,o){return h0(fe(),$E(),n,e,t,r,o)}function sw(n,e){let t=n[e];return t===Xn?void 0:t}function d0(n,e,t,r,o,i){let s=e+t;return So(n,s,o)?XI(n,s+1,i?r.call(i,o):r(o)):sw(n,s+1)}function h0(n,e,t,r,o,i,s){let a=e+t;return ew(n,a,o,i)?XI(n,a+2,s?r.call(s,o,i):r(o,i)):sw(n,a+2)}var pd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var aw=new P("");function ko(n){return!!n&&typeof n.then=="function"}function cw(n){return!!n&&typeof n.subscribe=="function"}var md=new P(""),lw=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=A(md,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let i=o();if(ko(i))t.push(i);else if(cw(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ec=new P("");function f0(){Yv(()=>{throw new F(600,!1)})}function p0(n){return n.isBoundToModule}function m0(n,e,t){try{let r=t();return ko(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var gs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=A(uI),this.afterRenderEffectManager=A(Lm),this.externalTestViews=new Set,this.beforeRender=new Fe,this.afterTick=new Fe,this.componentTypes=[],this.components=[],this.isStable=A(Ro).hasPendingTasks.pipe($(t=>!t)),this._injector=A(tt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let o=t instanceof $u;if(!this._injector.get(lw).done){let m=!o&&EE(t),g=!1;throw new F(405,g)}let s;o?s=t:s=this._injector.get(ld).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=p0(s)?void 0:this._injector.get(Pr),c=r||s.selector,l=s.create(rn.NULL,[],c,a),u=l.location.nativeElement,h=l.injector.get(aw,null);return h?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),gp(this.components,l),h?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new F(101,!1);let r=se(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,se(r)}}detectChangesInAttachedViews(t){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===zI)throw new F(103,!1);if(t){let i=r===0;this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:a}of this._views)g0(s,i,a)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>Xp(i))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>Xp(i))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;gp(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ec,[]);[...this._bootstrapListeners,...r].forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new F(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function g0(n,e,t){!e&&!Xp(n)||y0(n,t,e)}function Xp(n){return pm(n)}function y0(n,e,t){let r;t?(r=0,n[H]|=1024):n[H]&64?r=0:r=1,qI(n,e,r)}var em=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},gd=(()=>{class n{compileModuleSync(t){return new Wp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=IE(t),i=vI(o.declarations).reduce((s,a)=>{let c=Nr(a);return c&&s.push(new ds(c)),s},[]);return new em(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var v0=(()=>{class n{constructor(){this.zone=A(ve),this.applicationRef=A(gs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function C0(n){return[{provide:ve,useFactory:n},{provide:ss,multi:!0,useFactory:()=>{let e=A(v0,{optional:!0});return()=>e.initialize()}},{provide:ss,multi:!0,useFactory:()=>{let e=A(T0);return()=>{e.initialize()}}},{provide:uI,useFactory:E0}]}function E0(){let n=A(ve),e=A(wn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function I0(n){let e=C0(()=>new ve(w0(n)));return fs([[],e])}function w0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var T0=(()=>{class n{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=A(ve),this.pendingTasks=A(Ro)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _0(){return typeof $localize<"u"&&$localize.locale||Ku}var Bm=new P("",{providedIn:"root",factory:()=>A(Bm,Y.Optional|Y.SkipSelf)||_0()});var uw=new P("");var bu=null;function A0(n=[],e){return rn.create({name:e,providers:[{provide:Xu,useValue:"platform"},{provide:uw,useValue:new Set([()=>bu=null])},...n]})}function S0(n=[]){if(bu)return bu;let e=A0(n);return bu=e,f0(),b0(e),e}function b0(n){n.get(_m,null)?.forEach(t=>t())}var Oo=(()=>{class n{static{this.__NG_ELEMENT_ID__=D0}}return n})();function D0(n){return M0(bt(),fe(),(n&16)===16)}function M0(n,e,t){if(nd(n)&&!t){let r=Fr(n.index,e);return new Ao(r,r)}else if(n.type&47){let r=e[En];return new Ao(r,e)}return null}var tm=class{constructor(){}supports(e){return ZI(e)}create(e){return new nm(e)}},R0=(n,e)=>e,nm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||R0}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){let s=!r||t&&t.currentIndex<nE(r,o,i)?t:r,a=nE(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)o++;else{i||(i=[]);let l=a-o,u=c-o;if(l!=u){for(let m=0;m<l;m++){let g=m<i.length?i[m]:i[m]=0,w=g+m;u<=w&&w<l&&(i[m]=g+1)}let h=s.previousIndex;i[h]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ZI(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,o,i,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,i,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,i,s,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)),t=t._next}else o=0,RR(e,a=>{s=this._trackByFn(o,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,o),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,o){let i;return e===null?i=this._itTail:(i=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,o)):e=this._addAfter(new rm(t,r),i,o)),e}_verifyReinsertion(e,t,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,i=e._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let o=t===null?this._itHead:t._next;return e._next=o,e._prev=t,o===null?this._itTail=e:o._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},rm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},om=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Wu=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new om,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,o=this.map.get(r);return o?o.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function nE(n,e,t){let r=n.previousIndex;if(r===null)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+e+o}function rE(){return new jm([new tm])}var jm=(()=>{class n{static{this.\u0275prov=k({token:n,providedIn:"root",factory:rE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||rE()),deps:[[n,new sm,new Zu]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r!=null)return r;throw new F(901,!1)}}return n})();function dw(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,o=S0(r),i=[I0(),...t||[]],a=new zu({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ve);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(wn,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:g=>{l.handleError(g)}})});let h=()=>a.destroy(),m=o.get(uw);return m.add(h),a.onDestroy(()=>{u.unsubscribe(),m.delete(h)}),m0(l,c,()=>{let g=a.get(lw);return g.runInitializers(),g.donePromise.then(()=>{let w=a.get(Bm,Ku);r0(w||Ku);let I=a.get(gs);return e!==void 0&&I.bootstrap(e),I})})})}catch(e){return Promise.reject(e)}}function yd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function hw(n){let e=Nr(n);if(!e)return null;let t=new ds(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var vw=null;function rr(){return vw}function Cw(n){vw??=n}var vd=class{};var We=new P(""),Qm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:()=>A(O0),providedIn:"platform"})}}return n})(),Ew=new P(""),O0=(()=>{class n extends Qm{constructor(){super(),this._doc=A(We),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rr().getBaseHref(this._doc)}onPopState(t){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Ym(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function fw(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function nr(n){return n&&n[0]!=="?"?"?"+n:n}var Po=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:()=>A(Jm),providedIn:"root"})}}return n})(),Iw=new P(""),Jm=(()=>{class n extends Po{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??A(We).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ym(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+nr(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+nr(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+nr(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(R(Qm),R(Iw,8))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ww=(()=>{class n extends Po{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Ym(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+nr(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+nr(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(R(Qm),R(Iw,8))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})(),bn=(()=>{class n{constructor(t){this._subject=new ye,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=F0(fw(pw(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nr(r))}normalize(t){return n.stripTrailingSlash(x0(this._basePath,pw(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nr(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static{this.normalizeQueryParams=nr}static{this.joinWithSlash=Ym}static{this.stripTrailingSlash=fw}static{this.\u0275fac=function(r){return new(r||n)(R(Po))}}static{this.\u0275prov=k({token:n,factory:()=>P0(),providedIn:"root"})}}return n})();function P0(){return new bn(R(Po))}function x0(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function pw(n){return n.replace(/\/index.html$/,"")}function F0(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Cd(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var $m=/\s+/,mw=[],Ed=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=mw,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split($m):mw}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split($m):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let o=this.stateMap.get(t);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split($m).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static{this.\u0275fac=function(r){return new(r||n)(x(An),x(er))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[Xe.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Gm=class{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Tw=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new Gm(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),gw(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);gw(i,o)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(x(ms),x(cd),x(jm))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function gw(n,e){n.context.$implicit=e.item}var Lr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new zm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yw("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yw("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(x(ms),x(cd))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),zm=class{constructor(){this.$implicit=null,this.ngIf=null}};function yw(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${lt(e)}'.`)}var ot=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=Zt({})}}return n})(),Zm="browser",L0="server";function U0(n){return n===Zm}function Id(n){return n===L0}var _w=(()=>{class n{static{this.\u0275prov=k({token:n,providedIn:"root",factory:()=>U0(A(Sn))?new qm(A(We),window):new Km})}}return n})(),qm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=V0(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function V0(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}var Km=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ys=class{};var nc=class{},Td=class{},xo=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let o=t.slice(0,r),i=o.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":let i=e.value;if(!i)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var eg=class{encodeKey(e){return Aw(e)}encodeValue(e){return Aw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function j0(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var $0=/%(\d[a-f0-9])/gi,G0={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Aw(n){return encodeURIComponent(n).replace($0,(e,t)=>G0[t]??e)}function wd(n){return`${n}`}var Ur=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new eg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=j0(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],o=Array.isArray(r)?r.map(wd):[wd(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(wd(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],o=r.indexOf(wd(e.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var tg=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function z0(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Sw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function bw(n){return typeof Blob<"u"&&n instanceof Blob}function Dw(n){return typeof FormData<"u"&&n instanceof FormData}function q0(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var tc=class n{constructor(e,t,r,o){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let i;if(z0(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new xo,this.context??=new tg,!this.params)this.params=new Ur,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Sw(this.body)||bw(this.body)||Dw(this.body)||q0(this.body)?this.body:this.body instanceof Ur?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Dw(this.body)?null:bw(this.body)?this.body.type||null:Sw(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ur?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,g)=>m.set(g,e.setHeaders[g]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((m,g)=>m.set(g,e.setParams[g]),u)),new n(t,r,s,{params:u,headers:l,context:h,reportProgress:c,responseType:o,withCredentials:a,transferCache:i})}},Cs=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Cs||{}),rc=class{constructor(e,t=Sd.Ok,r="OK"){this.headers=e.headers||new xo,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ng=class n extends rc{constructor(e={}){super(e),this.type=Cs.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_d=class n extends rc{constructor(e={}){super(e),this.type=Cs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ad=class extends rc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Sd=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Sd||{});function Xm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var oc=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof tc)i=t;else{let c;o.headers instanceof xo?c=o.headers:c=new xo(o.headers);let l;o.params&&(o.params instanceof Ur?l=o.params:l=new Ur({fromObject:o.params})),i=new tc(t,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=O(i).pipe(xt(c=>this.handler.handle(c)));if(t instanceof tc||o.observe==="events")return s;let a=s.pipe(Ae(c=>c instanceof _d));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe($(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe($(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe($(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe($(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Ur().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,Xm(o,r))}post(t,r,o={}){return this.request("POST",t,Xm(o,r))}put(t,r,o={}){return this.request("PUT",t,Xm(o,r))}static{this.\u0275fac=function(r){return new(r||n)(R(nc))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})();function kw(n,e){return e(n)}function K0(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}function W0(n,e,t){return(r,o)=>en(t,()=>e(r,i=>n(i,o)))}var rg=new P(""),og=new P(""),Q0=new P(""),Y0=new P("");function J0(){let n=null;return(e,t)=>{n===null&&(n=(A(rg,{optional:!0})??[]).reduceRight(K0,kw));let r=A(Ro),o=r.add();return n(e,t).pipe(Dr(()=>r.remove(o)))}}var Mw=(()=>{class n extends nc{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=A(Ro);let o=A(Y0,{optional:!0});this.backend=o??t}handle(t){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(og),...this.injector.get(Q0,[])]));this.chain=o.reduceRight((i,s)=>W0(i,s,this.injector),kw)}let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(Dr(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(R(Td),R(tt))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})();var Z0=/^\)\]\}',?\n/;function X0(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Rw=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new F(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?X(r.\u0275loadImpl()):O(null)).pipe(ke(()=>new ie(i=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((I,N)=>s.setRequestHeader(I,N.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let I=t.detectContentTypeHeader();I!==null&&s.setRequestHeader("Content-Type",I)}if(t.responseType){let I=t.responseType.toLowerCase();s.responseType=I!=="json"?I:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let I=s.statusText||"OK",N=new xo(s.getAllResponseHeaders()),L=X0(s)||t.url;return c=new ng({headers:N,status:s.status,statusText:I,url:L}),c},u=()=>{let{headers:I,status:N,statusText:L,url:ge}=l(),ee=null;N!==Sd.NoContent&&(ee=typeof s.response>"u"?s.responseText:s.response),N===0&&(N=ee?Sd.Ok:0);let Ze=N>=200&&N<300;if(t.responseType==="json"&&typeof ee=="string"){let Tt=ee;ee=ee.replace(Z0,"");try{ee=ee!==""?JSON.parse(ee):null}catch(_t){ee=Tt,Ze&&(Ze=!1,ee={error:_t,text:ee})}}Ze?(i.next(new _d({body:ee,headers:I,status:N,statusText:L,url:ge||void 0})),i.complete()):i.error(new Ad({error:ee,headers:I,status:N,statusText:L,url:ge||void 0}))},h=I=>{let{url:N}=l(),L=new Ad({error:I,status:s.status||0,statusText:s.statusText||"Unknown Error",url:N||void 0});i.error(L)},m=!1,g=I=>{m||(i.next(l()),m=!0);let N={type:Cs.DownloadProgress,loaded:I.loaded};I.lengthComputable&&(N.total=I.total),t.responseType==="text"&&s.responseText&&(N.partialText=s.responseText),i.next(N)},w=I=>{let N={type:Cs.UploadProgress,loaded:I.loaded};I.lengthComputable&&(N.total=I.total),i.next(N)};return s.addEventListener("load",u),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),i.next({type:Cs.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",u),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(R(ys))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})(),Ow=new P(""),eN="XSRF-TOKEN",tN=new P("",{providedIn:"root",factory:()=>eN}),nN="X-XSRF-TOKEN",rN=new P("",{providedIn:"root",factory:()=>nN}),bd=class{},oN=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Cd(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(R(We),R(Sn),R(tN))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})();function iN(n,e){let t=n.url.toLowerCase();if(!A(Ow)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=A(bd).getToken(),o=A(rN);return r!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var Pw=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Pw||{});function sN(n,e){return{\u0275kind:n,\u0275providers:e}}function xw(...n){let e=[oc,Rw,Mw,{provide:nc,useExisting:Mw},{provide:Td,useExisting:Rw},{provide:og,useValue:iN,multi:!0},{provide:Ow,useValue:!0},{provide:bd,useClass:oN}];for(let t of n)e.push(...t.\u0275providers);return fs(e)}var Nw=new P("");function Fw(){return sN(Pw.LegacyInterceptors,[{provide:Nw,useFactory:J0},{provide:og,useExisting:Nw,multi:!0}])}var ag=class extends vd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},cg=class n extends ag{static makeCurrent(){Cw(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=aN();return t==null?null:cN(t)}resetBaseElement(){ic=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Cd(document.cookie,e)}},ic=null;function aN(){return ic=ic||document.querySelector("base"),ic?ic.getAttribute("href"):null}function cN(n){return new URL(n,document.baseURI).pathname}var lN=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})(),lg=new P(""),Bw=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new F(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(R(lg),R(ve))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})(),Dd=class{constructor(e){this._doc=e}},ig="ng-app-id",jw=(()=>{class n{constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Id(i),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ig}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){let o=this.styleRef;if(o.has(t)){let i=o.get(t);return i.usage+=r,i.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===t)return o.delete(r),i.removeAttribute(ig),i;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(ig,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let o=this.getStyleElement(t,r),i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(R(We),R(Tm),R(Am,8),R(Sn))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})(),sg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dg=/%COMP%/g,$w="%COMP%",uN=`_nghost-${$w}`,dN=`_ngcontent-${$w}`,hN=!0,fN=new P("",{providedIn:"root",factory:()=>hN});function pN(n){return dN.replace(dg,n)}function mN(n){return uN.replace(dg,n)}function Gw(n,e){return e.map(t=>t.replace(dg,n))}var Uw=(()=>{class n{constructor(t,r,o,i,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Id(a),this.defaultRenderer=new sc(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vn.ShadowDom&&(r=S(p({},r),{encapsulation:vn.Emulated}));let o=this.getOrCreateRenderer(t,r);return o instanceof Md?o.applyToHost(t):o instanceof ac&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case vn.Emulated:i=new Md(c,l,r,this.appId,u,s,a,h);break;case vn.ShadowDom:return new ug(c,l,t,r,s,a,this.nonce,h);default:i=new ac(c,l,r,u,s,a,h);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(R(Bw),R(jw),R(Tm),R(fN),R(We),R(Sn),R(ve),R(Am))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})(),sc=class{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(sg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Vw(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Vw(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;let i=sg[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let o=sg[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(Qn.DashCase|Qn.Important)?e.style.setProperty(t,r,o&Qn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Qn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=rr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Vw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ug=class extends sc{constructor(e,t,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Gw(o.id,o.styles);for(let u of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ac=class extends sc{constructor(e,t,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=c?Gw(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Md=class extends ac{constructor(e,t,r,o,i,s,a,c){let l=o+"-"+r.id;super(e,t,r,i,s,a,c,l),this.contentAttr=pN(l),this.hostAttr=mN(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},gN=(()=>{class n extends Dd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static{this.\u0275fac=function(r){return new(r||n)(R(We))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})(),Hw=["alt","control","meta","shift"],yN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},CN=(()=>{class n extends Dd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,o){let i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rr().onAndCancel(t,i.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Hw.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=yN[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Hw.forEach(s=>{if(s!==o){let a=vN[s];a(t)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(R(We))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})();function zw(n,e){return dw(p({rootComponent:n},EN(e)))}function EN(n){return{appProviders:[...AN,...n?.providers??[]],platformProviders:_N}}function IN(){cg.makeCurrent()}function wN(){return new wn}function TN(){return gI(document),document}var _N=[{provide:Sn,useValue:Zm},{provide:_m,useValue:IN,multi:!0},{provide:We,useFactory:TN,deps:[]}];var AN=[{provide:Xu,useValue:"root"},{provide:wn,useFactory:wN,deps:[]},{provide:lg,useClass:gN,multi:!0,deps:[We,ve,Sn]},{provide:lg,useClass:CN,multi:!0,deps:[We]},Uw,jw,Bw,{provide:Wa,useExisting:Uw},{provide:ys,useClass:lN,deps:[]},[]];var qw=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(R(We))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Q="primary",Tc=Symbol("RouteTitle"),gg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function _s(n){return new gg(n)}function DN(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function MN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Dn(n[t],e[t]))return!1;return!0}function Dn(n,e){let t=n?yg(n):void 0,r=e?yg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!tT(n[o],e[o]))return!1;return!0}function yg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}else return n===e}function nT(n){return n.length>0?n[n.length-1]:null}function jr(n){return Qf(n)?n:ko(n)?X(Promise.resolve(n)):O(n)}var RN={exact:oT,subset:iT},rT={exact:NN,subset:kN,ignored:()=>!0};function Kw(n,e,t){return RN[t.paths](n.root,e.root,t.matrixParams)&&rT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function NN(n,e){return Dn(n,e)}function oT(n,e,t){if(!Lo(n.segments,e.segments)||!kd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!oT(n.children[r],e.children[r],t))return!1;return!0}function kN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tT(n[t],e[t]))}function iT(n,e,t){return sT(n,e,e.segments,t)}function sT(n,e,t,r){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!Lo(o,t)||e.hasChildren()||!kd(o,t,r))}else if(n.segments.length===t.length){if(!Lo(n.segments,t)||!kd(n.segments,t,r))return!1;for(let o in e.children)if(!n.children[o]||!iT(n.children[o],e.children[o],r))return!1;return!0}else{let o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!Lo(n.segments,o)||!kd(n.segments,o,r)||!n.children[Q]?!1:sT(n.children[Q],e,i,r)}}function kd(n,e,t){return e.every((r,o)=>rT[t](n[o].parameters,r.parameters))}var Vr=class{constructor(e=new ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=_s(this.queryParams),this._queryParamMap}toString(){return xN.serialize(this)}},ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Od(this)}},Fo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=_s(this.parameters),this._parameterMap}toString(){return cT(this)}};function ON(n,e){return Lo(n,e)&&n.every((t,r)=>Dn(t.parameters,e[r].parameters))}function Lo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function PN(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===Q&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Q&&(t=t.concat(e(o,r)))}),t}var _c=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:()=>new pc,providedIn:"root"})}}return n})(),pc=class{parse(e){let t=new Cg(e);return new Vr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${cc(e.root,!0)}`,r=UN(e.queryParams),o=typeof e.fragment=="string"?`#${FN(e.fragment)}`:"";return`${t}${r}${o}`}},xN=new pc;function Od(n){return n.segments.map(e=>cT(e)).join("/")}function cc(n,e){if(!n.hasChildren())return Od(n);if(e){let t=n.children[Q]?cc(n.children[Q],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==Q&&r.push(`${o}:${cc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=PN(n,(r,o)=>o===Q?[cc(n.children[Q],!1)]:[`${o}:${cc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Q]!=null?`${Od(n)}/${t[0]}`:`${Od(n)}/(${t.join("//")})`}}function aT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rd(n){return aT(n).replace(/%3B/gi,";")}function FN(n){return encodeURI(n)}function vg(n){return aT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pd(n){return decodeURIComponent(n)}function Ww(n){return Pd(n.replace(/\+/g,"%20"))}function cT(n){return`${vg(n.path)}${LN(n.parameters)}`}function LN(n){return Object.entries(n).map(([e,t])=>`;${vg(e)}=${vg(t)}`).join("")}function UN(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(o=>`${Rd(t)}=${Rd(o)}`).join("&"):`${Rd(t)}=${Rd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var VN=/^[^\/()?;#]+/;function hg(n){let e=n.match(VN);return e?e[0]:""}var HN=/^[^\/()?;=#]+/;function BN(n){let e=n.match(HN);return e?e[0]:""}var jN=/^[^=?&#]+/;function $N(n){let e=n.match(jN);return e?e[0]:""}var GN=/^[^&#]+/;function zN(n){let e=n.match(GN);return e?e[0]:""}var Cg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Q]=new ce(e,t)),r}parseSegment(){let e=hg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new Fo(Pd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=BN(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=hg(this.remaining);o&&(r=o,this.capture(r))}e[Pd(t)]=Pd(r)}parseQueryParam(e){let t=$N(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=zN(this.remaining);s&&(r=s,this.capture(r))}let o=Ww(t),i=Ww(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hg(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new F(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Q);let s=this.parseChildren();t[i]=Object.keys(s).length===1?s[Q]:new ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function lT(n){return n.segments.length>0?new ce([],{[Q]:n}):n}function uT(n){let e={};for(let[r,o]of Object.entries(n.children)){let i=uT(o);if(r===Q&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let t=new ce(n.segments,e);return qN(t)}function qN(n){if(n.numberOfChildren===1&&n.children[Q]){let e=n.children[Q];return new ce(n.segments.concat(e.segments),e.children)}return n}function As(n){return n instanceof Vr}function KN(n,e,t=null,r=null){let o=dT(n);return hT(o,e,t,r)}function dT(n){let e;function t(i){let s={};for(let c of i.children){let l=t(c);s[c.outlet]=l}let a=new ce(i.url,s);return i===n&&(e=a),a}let r=t(n.root),o=lT(r);return e??o}function hT(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return fg(o,o,o,t,r);let i=WN(e);if(i.toRoot())return fg(o,o,new ce([],{}),t,r);let s=QN(i,o,n),a=s.processChildren?dc(s.segmentGroup,s.index,i.commands):pT(s.segmentGroup,s.index,i.commands);return fg(o,s.segmentGroup,a,t,r)}function xd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function mc(n){return typeof n=="object"&&n!=null&&n.outlets}function fg(n,e,t,r,o){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=fT(n,e,t);let a=lT(uT(s));return new Vr(a,i,o)}function fT(n,e,t){let r={};return Object.entries(n.children).forEach(([o,i])=>{i===e?r[o]=t:r[o]=fT(i,e,t)}),new ce(n.segments,r)}var Fd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xd(r[0]))throw new F(4003,!1);let o=r.find(mc);if(o&&o!==nT(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function WN(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Fd(!0,0,n);let e=0,t=!1,r=n.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Fd(t,e,r)}var ws=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function QN(n,e,t){if(n.isAbsolute)return new ws(e,!0,0);if(!t)return new ws(e,!1,NaN);if(t.parent===null)return new ws(t,!0,0);let r=xd(n.commands[0])?0:1,o=t.segments.length-1+r;return YN(t,o,n.numberOfDoubleDots)}function YN(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new F(4005,!1);o=r.segments.length}return new ws(r,!1,o-i)}function JN(n){return mc(n[0])?n[0].outlets:{[Q]:n}}function pT(n,e,t){if(n??=new ce([],{}),n.segments.length===0&&n.hasChildren())return dc(n,e,t);let r=ZN(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new ce(n.segments.slice(0,r.pathIndex),{});return i.children[Q]=new ce(n.segments.slice(r.pathIndex),n.children),dc(i,0,o)}else return r.match&&o.length===0?new ce(n.segments,{}):r.match&&!n.hasChildren()?Eg(n,e,t):r.match?dc(n,0,o):Eg(n,e,t)}function dc(n,e,t){if(t.length===0)return new ce(n.segments,{});{let r=JN(t),o={};if(Object.keys(r).some(i=>i!==Q)&&n.children[Q]&&n.numberOfChildren===1&&n.children[Q].segments.length===0){let i=dc(n.children[Q],e,t);return new ce(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=pT(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new ce(n.segments,o)}}function ZN(n,e,t){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;let s=n.segments[o],a=t[r];if(mc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Yw(c,l,s))return i;r+=2}else{if(!Yw(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function Eg(n,e,t){let r=n.segments.slice(0,e),o=0;for(;o<t.length;){let i=t[o];if(mc(i)){let c=XN(i.outlets);return new ce(r,c)}if(o===0&&xd(t[0])){let c=n.segments[e];r.push(new Fo(c.path,Qw(t[0]))),o++;continue}let s=mc(i)?i.outlets[Q]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&xd(a)?(r.push(new Fo(s,Qw(a))),o+=2):(r.push(new Fo(s,{})),o++)}return new ce(r,{})}function XN(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Eg(new ce([],{}),0,r))}),e}function Qw(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Yw(n,e,t){return n==t.path&&Dn(e,t.parameters)}var hc="imperative",Qe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Qe||{}),jt=class{constructor(e,t){this.id=e,this.url=t}},Ss=class extends jt{constructor(e,t,r="imperative",o=null){super(e,t),this.type=Qe.NavigationStart,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},or=class extends jt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Mt||{}),Ld=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ld||{}),Hr=class extends jt{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=Qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Br=class extends jt{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=Qe.NavigationSkipped}},gc=class extends jt{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=Qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ud=class extends jt{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ig=class extends jt{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wg=class extends jt{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=Qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tg=class extends jt{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_g=class extends jt{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ag=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Sg=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bg=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dg=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mg=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rg=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},yc=class{},vc=class{constructor(e){this.url=e}};var Ng=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ac,this.attachRef=null}},Ac=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ng,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=kg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=kg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Og(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Og(e,this._root).map(t=>t.value)}};function kg(n,e){if(n===e.value)return e;for(let t of e.children){let r=kg(n,t);if(r)return r}return null}function Og(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Og(n,t);if(r.length)return r.unshift(e),r}return[]}var Dt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Is(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Bd=class extends Hd{constructor(e,t){super(e),this.snapshot=t,$g(this,e)}toString(){return this.snapshot.toString()}};function mT(n){let e=ek(n),t=new Le([new Fo("",{})]),r=new Le({}),o=new Le({}),i=new Le({}),s=new Le(""),a=new Uo(t,r,i,s,o,Q,n,e.root);return a.snapshot=e.root,new Bd(new Dt(a,[]),e)}function ek(n){let e={},t={},r={},o="",i=new Cc([],e,r,o,t,Q,n,null,{});return new jd("",new Dt(i,[]))}var Uo=class{constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe($(l=>l[Tc]))??O(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($(e=>_s(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($(e=>_s(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jg(n,e,t="emptyOnly"){let r,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:p(p({},e.params),n.params),data:p(p({},e.data),n.data),resolve:p(p(p(p({},n.data),e.data),o?.data),n._resolvedData)}:r={params:p({},n.params),data:p({},n.data),resolve:p(p({},n.data),n._resolvedData??{})},o&&yT(o)&&(r.resolve[Tc]=o.title),r}var Cc=class{get title(){return this.data?.[Tc]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_s(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_s(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},jd=class extends Hd{constructor(e,t){super(t),this.url=e,$g(this,t)}toString(){return gT(this._root)}};function $g(n,e){e.value._routerState=n,e.children.forEach(t=>$g(n,t))}function gT(n){let e=n.children.length>0?` { ${n.children.map(gT).join(", ")} } `:"";return`${n.value}${e}`}function pg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Dn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Dn(e.params,t.params)||n.paramsSubject.next(t.params),MN(e.url,t.url)||n.urlSubject.next(t.url),Dn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Pg(n,e){let t=Dn(n.params,e.params)&&ON(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Pg(n.parent,e.parent))}function yT(n){return typeof n.title=="string"||n.title===null}var Gg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Q,this.activateEvents=new ye,this.deactivateEvents=new ye,this.attachEvents=new ye,this.detachEvents=new ye,this.parentContexts=A(Ac),this.location=A(ms),this.changeDetector=A(Oo),this.environmentInjector=A(tt),this.inputBinder=A(qd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=t;let o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new xg(t,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Oe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xr]})}}return n})(),xg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Uo?this.route:e===Ac?this.childContexts:this.parent.get(e,t)}},qd=new P(""),Jw=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,o=Ua([r.queryParams,r.params,r.data]).pipe(ke(([i,s,a],c)=>(a=p(p(p({},i),s),a),c===0?O(a):Promise.resolve(a)))).subscribe(i=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=hw(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(t,o)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})();function tk(n,e,t){let r=Ec(n,e._root,t?t._root:void 0);return new Bd(r,e)}function Ec(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let o=nk(n,e,t);return new Dt(r,o)}else{if(n.shouldAttach(e.value)){let i=n.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ec(n,a)),s}}let r=rk(e.value),o=e.children.map(i=>Ec(n,i));return new Dt(r,o)}}function nk(n,e,t){return e.children.map(r=>{for(let o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Ec(n,r,o);return Ec(n,r)})}function rk(n){return new Uo(new Le(n.url),new Le(n.params),new Le(n.queryParams),new Le(n.fragment),new Le(n.data),n.outlet,n.component,n)}var vT="ngNavigationCancelingError";function CT(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=As(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=ET(!1,Mt.Redirect);return o.url=t,o.navigationBehaviorOptions=r,o}function ET(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[vT]=!0,t.cancellationCode=e,t}function ok(n){return IT(n)&&As(n.url)}function IT(n){return!!n&&n[vT]}var ik=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["ng-component"]],standalone:!0,features:[rt],decls:1,vars:0,template:function(r,o){r&1&&Ue(0,"router-outlet")},dependencies:[Gg],encapsulation:2})}}return n})();function sk(n,e){return n.providers&&!n._injector&&(n._injector=hd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function zg(n){let e=n.children&&n.children.map(zg),t=e?S(p({},n),{children:e}):p({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Q&&(t.component=ik),t}function Mn(n){return n.outlet||Q}function ak(n,e){let t=n.filter(r=>Mn(r)===e);return t.push(...n.filter(r=>Mn(r)!==e)),t}function Sc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ck=(n,e,t,r)=>$(o=>(new Fg(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)),Fg=class{constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let o=Is(t);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Is(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Is(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let o=Is(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Rg(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Dg(e.value.snapshot))}activateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(pg(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),pg(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Sc(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},$d=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ts=class{constructor(e,t){this.component=e,this.route=t}};function lk(n,e,t){let r=n._root,o=e?e._root:null;return lc(r,o,t,[r.value])}function uk(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ds(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!sE(n)?n:e.get(n):r}function lc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Is(e);return n.children.forEach(s=>{dk(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>fc(a,t.getContext(s),o)),o}function dk(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=hk(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new $d(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?lc(n,e,a?a.children:null,r,o):lc(n,e,t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Ts(a.outlet.component,s))}else s&&fc(e,a,o),o.canActivateChecks.push(new $d(r)),i.component?lc(n,null,a?a.children:null,r,o):lc(n,null,t,r,o);return o}function hk(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Lo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Lo(n.url,e.url)||!Dn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pg(n,e)||!Dn(n.queryParams,e.queryParams);case"paramsChange":default:return!Pg(n,e)}}function fc(n,e,t){let r=Is(n),o=n.value;Object.entries(r).forEach(([i,s])=>{o.component?e?fc(s,e.children.getContext(i),t):fc(s,null,t):fc(s,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ts(e.outlet.component,o)):t.canDeactivateChecks.push(new Ts(null,o)):t.canDeactivateChecks.push(new Ts(null,o))}function bc(n){return typeof n=="function"}function fk(n){return typeof n=="boolean"}function pk(n){return n&&bc(n.canLoad)}function mk(n){return n&&bc(n.canActivate)}function gk(n){return n&&bc(n.canActivateChild)}function yk(n){return n&&bc(n.canDeactivate)}function vk(n){return n&&bc(n.canMatch)}function wT(n){return n instanceof Wn||n?.name==="EmptyError"}var Nd=Symbol("INITIAL_VALUE");function bs(){return ke(n=>Ua(n.map(e=>e.pipe(St(1),ep(Nd)))).pipe($(e=>{for(let t of e)if(t!==!0){if(t===Nd)return Nd;if(t===!1||t instanceof Vr)return t}return!0}),Ae(e=>e!==Nd),St(1)))}function Ck(n,e){return Ne(t=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return s.length===0&&i.length===0?O(S(p({},t),{guardsResult:!0})):Ek(s,r,o,n).pipe(Ne(a=>a&&fk(a)?Ik(r,i,n,e):O(a)),$(a=>S(p({},t),{guardsResult:a})))})}function Ek(n,e,t,r){return X(n).pipe(Ne(o=>Sk(o.component,o.route,t,e,r)),mn(o=>o!==!0,!0))}function Ik(n,e,t,r){return X(e).pipe(xt(o=>Yi(Tk(o.route.parent,r),wk(o.route,r),Ak(n,o.path,t),_k(n,o.route,t))),mn(o=>o!==!0,!0))}function wk(n,e){return n!==null&&e&&e(new Mg(n)),O(!0)}function Tk(n,e){return n!==null&&e&&e(new bg(n)),O(!0)}function _k(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return O(!0);let o=r.map(i=>vu(()=>{let s=Sc(e)??t,a=Ds(i,s),c=mk(a)?a.canActivate(e,n):en(s,()=>a(e,n));return jr(c).pipe(mn())}));return O(o).pipe(bs())}function Ak(n,e,t){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>uk(s)).filter(s=>s!==null).map(s=>vu(()=>{let a=s.guards.map(c=>{let l=Sc(s.node)??t,u=Ds(c,l),h=gk(u)?u.canActivateChild(r,n):en(l,()=>u(r,n));return jr(h).pipe(mn())});return O(a).pipe(bs())}));return O(i).pipe(bs())}function Sk(n,e,t,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return O(!0);let s=i.map(a=>{let c=Sc(e)??o,l=Ds(a,c),u=yk(l)?l.canDeactivate(n,e,t,r):en(c,()=>l(n,e,t,r));return jr(u).pipe(mn())});return O(s).pipe(bs())}function bk(n,e,t,r){let o=e.canLoad;if(o===void 0||o.length===0)return O(!0);let i=o.map(s=>{let a=Ds(s,n),c=pk(a)?a.canLoad(e,t):en(n,()=>a(e,t));return jr(c)});return O(i).pipe(bs(),TT(r))}function TT(n){return Gf(Ge(e=>{if(As(e))throw CT(n,e)}),$(e=>e===!0))}function Dk(n,e,t,r){let o=e.canMatch;if(!o||o.length===0)return O(!0);let i=o.map(s=>{let a=Ds(s,n),c=vk(a)?a.canMatch(e,t):en(n,()=>a(e,t));return jr(c)});return O(i).pipe(bs(),TT(r))}var Ic=class{constructor(e){this.segmentGroup=e||null}},Gd=class extends Error{constructor(e){super(),this.urlTree=e}};function Es(n){return Wi(new Ic(n))}function Mk(n){return Wi(new F(4e3,!1))}function Rk(n){return Wi(ET(!1,Mt.GuardRejected))}var Lg=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return O(r);if(o.numberOfChildren>1||!o.children[Q])return Mk(e.redirectTo);o=o.children[Q]}}applyRedirectCommands(e,t,r){let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Gd(o);return o}applyRedirectCreateUrlTree(e,t,r,o){let i=this.createSegmentGroup(e,t.root,r,o);return new Vr(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i.startsWith(":")){let a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){let i=this.createSegments(e,t.segments,r,o),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new ce(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){let o=r[t.path.substring(1)];if(!o)throw new F(4001,!1);return o}findOrReturn(e,t){let r=0;for(let o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}},Ug={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Nk(n,e,t,r,o){let i=qg(n,e,t);return i.matched?(r=sk(e,r),Dk(r,e,t,o).pipe($(s=>s===!0?i:p({},Ug)))):O(i)}function qg(n,e,t){if(e.path==="**")return kk(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?p({},Ug):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||DN)(t,n,e);if(!o)return p({},Ug);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?p(p({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function kk(n){return{matched:!0,parameters:n.length>0?nT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Zw(n,e,t,r){return t.length>0&&xk(n,t,r)?{segmentGroup:new ce(e,Pk(r,new ce(t,n.children))),slicedSegments:[]}:t.length===0&&Fk(n,t,r)?{segmentGroup:new ce(n.segments,Ok(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ce(n.segments,n.children),slicedSegments:t}}function Ok(n,e,t,r){let o={};for(let i of t)if(Kd(n,e,i)&&!r[Mn(i)]){let s=new ce([],{});o[Mn(i)]=s}return p(p({},r),o)}function Pk(n,e){let t={};t[Q]=e;for(let r of n)if(r.path===""&&Mn(r)!==Q){let o=new ce([],{});t[Mn(r)]=o}return t}function xk(n,e,t){return t.some(r=>Kd(n,e,r)&&Mn(r)!==Q)}function Fk(n,e,t){return t.some(r=>Kd(n,e,r))}function Kd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Lk(n,e,t,r){return Mn(n)!==r&&(r===Q||!Kd(e,t,n))?!1:qg(e,n,t).matched}function Uk(n,e,t){return e.length===0&&!n.children[t]}var Vg=class{};function Vk(n,e,t,r,o,i,s="emptyOnly"){return new Hg(n,e,t,r,o,s,i).recognize()}var Hk=31,Hg=class{constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Lg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=Zw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($(t=>{let r=new Cc([],Object.freeze({}),Object.freeze(p({},this.urlTree.queryParams)),this.urlTree.fragment,{},Q,this.rootComponentType,null,{}),o=new Dt(r,t),i=new jd("",o),s=KN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root,null),{state:i,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Q).pipe(Wt(r=>{if(r instanceof Gd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ic?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,o=jg(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(o.params),r.data=Object.freeze(o.data),e.children.forEach(i=>this.inheritParamsAndData(i,r))}processSegmentGroup(e,t,r,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0).pipe($(i=>i instanceof Dt?[i]:[]))}processChildren(e,t,r){let o=[];for(let i of Object.keys(r.children))i==="primary"?o.unshift(i):o.push(i);return X(o).pipe(xt(i=>{let s=r.children[i],a=ak(t,i);return this.processSegmentGroup(e,a,s,i)}),Xf((i,s)=>(i.push(...s),i)),br(null),Zf(),Ne(i=>{if(i===null)return Es(r);let s=_T(i);return Bk(s),O(s)}))}processSegment(e,t,r,o,i,s){return X(t).pipe(xt(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,o,i,s).pipe(Wt(c=>{if(c instanceof Ic)return O(null);throw c}))),mn(a=>!!a),Wt(a=>{if(wT(a))return Uk(r,o,i)?O(new Vg):Es(r);throw a}))}processSegmentAgainstRoute(e,t,r,o,i,s,a){return Lk(r,o,i,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s):Es(o):Es(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=qg(t,o,i);if(!a)return Es(t);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Hk&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,l);return this.applyRedirects.lineralizeSegments(o,h).pipe(Ne(m=>this.processSegment(e,r,t,m.concat(u),s,!1)))}matchSegmentAgainstRoute(e,t,r,o,i){let s=Nk(t,r,o,e,this.urlSerializer);return r.path==="**"&&(t.children={}),s.pipe(ke(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(ke(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:h,parameters:m}=a,g=new Cc(u,m,Object.freeze(p({},this.urlTree.queryParams)),this.urlTree.fragment,$k(r),Mn(r),r.component??r._loadedComponent??null,r,Gk(r)),{segmentGroup:w,slicedSegments:I}=Zw(t,u,h,c);if(I.length===0&&w.hasChildren())return this.processChildren(l,c,w).pipe($(L=>L===null?null:new Dt(g,L)));if(c.length===0&&I.length===0)return O(new Dt(g,[]));let N=Mn(r)===i;return this.processSegment(l,c,w,I,N?Q:i,!0).pipe($(L=>new Dt(g,L instanceof Dt?[L]:[])))}))):Es(t)))}getChildConfig(e,t,r){return t.children?O({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?O({routes:t._loadedRoutes,injector:t._loadedInjector}):bk(e,t,r,this.urlSerializer).pipe(Ne(o=>o?this.configLoader.loadChildren(e,t).pipe(Ge(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):Rk(t))):O({routes:[],injector:e})}};function Bk(n){n.sort((e,t)=>e.value.outlet===Q?-1:t.value.outlet===Q?1:e.value.outlet.localeCompare(t.value.outlet))}function jk(n){let e=n.value.routeConfig;return e&&e.path===""}function _T(n){let e=[],t=new Set;for(let r of n){if(!jk(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),t.add(o)):e.push(r)}for(let r of t){let o=_T(r.children);e.push(new Dt(r.value,o))}return e.filter(r=>!t.has(r))}function $k(n){return n.data||{}}function Gk(n){return n.resolve||{}}function zk(n,e,t,r,o,i){return Ne(s=>Vk(n,e,t,r,s.extractedUrl,o,i).pipe($(({state:a,tree:c})=>S(p({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function qk(n,e){return Ne(t=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return O(t);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let l of AT(c))s.add(l);let a=0;return X(s).pipe(xt(c=>i.has(c)?Kk(c,r,n,e):(c.data=jg(c,c.parent,n).resolve,O(void 0))),Ge(()=>a++),Ji(1),Ne(c=>a===s.size?O(t):at))})}function AT(n){let e=n.children.map(t=>AT(t)).flat();return[n,...e]}function Kk(n,e,t,r){let o=n.routeConfig,i=n._resolve;return o?.title!==void 0&&!yT(o)&&(i[Tc]=o.title),Wk(i,n,e,r).pipe($(s=>(n._resolvedData=s,n.data=jg(n,n.parent,t).resolve,null)))}function Wk(n,e,t,r){let o=yg(n);if(o.length===0)return O({});let i={};return X(o).pipe(Ne(s=>Qk(n[s],e,t,r).pipe(mn(),Ge(a=>{i[s]=a}))),Ji(1),Jf(i),Wt(s=>wT(s)?at:Wi(s)))}function Qk(n,e,t,r){let o=Sc(e)??r,i=Ds(n,o),s=i.resolve?i.resolve(e,t):en(o,()=>i(e,t));return jr(s)}function mg(n){return ke(e=>{let t=n(e);return t?X(t).pipe($(()=>e)):O(e)})}var ST=(()=>{class n{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===Q);return r}getResolvedTitleForRoute(t){return t.data[Tc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:()=>A(Yk),providedIn:"root"})}}return n})(),Yk=(()=>{class n extends ST{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(R(qw))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dc=new P("",{providedIn:"root",factory:()=>({})}),wc=new P(""),Kg=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=A(gd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return O(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=jr(t.loadComponent()).pipe($(bT),Ge(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),Dr(()=>{this.componentLoaders.delete(t)})),o=new Ki(r,()=>new Fe).pipe(qi());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return O({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=Jk(r,this.compiler,t,this.onLoadEndListener).pipe(Dr(()=>{this.childrenLoaders.delete(r)})),s=new Ki(i,()=>new Fe).pipe(qi());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Jk(n,e,t,r){return jr(n.loadChildren()).pipe($(bT),Ne(o=>o instanceof Qa||Array.isArray(o)?O(o):X(e.compileModuleAsync(o))),$(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(t).injector,s=i.get(wc,[],{optional:!0,self:!0}).flat()),{routes:s.map(zg),injector:i}}))}function Zk(n){return n&&typeof n=="object"&&"default"in n}function bT(n){return Zk(n)?n.default:n}var Wg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:()=>A(Xk),providedIn:"root"})}}return n})(),Xk=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DT=new P(""),MT=new P("");function eO(n,e,t){let r=n.get(MT),o=n.get(We);return n.get(ve).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i,s=new Promise(l=>{i=l}),a=o.startViewTransition(()=>(i(),tO(n))),{onViewTransitionCreated:c}=r;return c&&en(n,()=>c({transition:a,from:e,to:t})),s})}function tO(n){return new Promise(e=>{dd(e,{injector:n})})}var Qg=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Fe,this.transitionAbortSubject=new Fe,this.configLoader=A(Kg),this.environmentInjector=A(tt),this.urlSerializer=A(_c),this.rootContexts=A(Ac),this.location=A(bn),this.inputBindingEnabled=A(qd,{optional:!0})!==null,this.titleStrategy=A(ST),this.options=A(Dc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=A(Wg),this.createViewTransition=A(DT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>O(void 0),this.rootComponentType=null;let t=o=>this.events.next(new Ag(o)),r=o=>this.events.next(new Sg(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(S(p(p({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,o){return this.transitions=new Le({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ae(i=>i.id!==0),$(i=>S(p({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ke(i=>{let s=!1,a=!1;return O(i).pipe(ke(c=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Mt.SupersededByNewNavigation),at;this.currentTransition=i,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?S(p({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let h="";return this.events.next(new Br(c.id,this.urlSerializer.serialize(c.rawUrl),h,Ld.IgnoredSameUrlNavigation)),c.resolve(null),at}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return O(c).pipe(ke(h=>{let m=this.transitions?.getValue();return this.events.next(new Ss(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?at:Promise.resolve(h)}),zk(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(h=>{i.targetSnapshot=h.targetSnapshot,i.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=S(p({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let m=new Ud(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:m,source:g,restoredState:w,extras:I}=c,N=new Ss(h,this.urlSerializer.serialize(m),g,w);this.events.next(N);let L=mT(this.rootComponentType).snapshot;return this.currentTransition=i=S(p({},c),{targetSnapshot:L,urlAfterRedirects:m,extras:S(p({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,O(i)}else{let h="";return this.events.next(new Br(c.id,this.urlSerializer.serialize(c.extractedUrl),h,Ld.IgnoredByUrlHandlingStrategy)),c.resolve(null),at}}),Ge(c=>{let l=new Ig(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),$(c=>(this.currentTransition=i=S(p({},c),{guards:lk(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),i)),Ck(this.environmentInjector,c=>this.events.next(c)),Ge(c=>{if(i.guardsResult=c.guardsResult,As(c.guardsResult))throw CT(this.urlSerializer,c.guardsResult);let l=new wg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ae(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Mt.GuardRejected),!1)),mg(c=>{if(c.guards.canActivateChecks.length)return O(c).pipe(Ge(l=>{let u=new Tg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ke(l=>{let u=!1;return O(l).pipe(qk(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",Mt.NoDataFromResolver)}}))}),Ge(l=>{let u=new _g(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),mg(c=>{let l=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ge(m=>{u.component=m}),$(()=>{})));for(let m of u.children)h.push(...l(m));return h};return Ua(l(c.targetSnapshot.root)).pipe(br(null),St(1))}),mg(()=>this.afterPreactivation()),ke(()=>{let{currentSnapshot:c,targetSnapshot:l}=i,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?X(u).pipe($(()=>i)):O(i)}),$(c=>{let l=tk(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i=S(p({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,i}),Ge(()=>{this.events.next(new yc)}),ck(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),St(1),Ge({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new or(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),tp(this.transitionAbortSubject.pipe(Ge(c=>{throw c}))),Dr(()=>{!s&&!a&&this.cancelNavigationTransition(i,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wt(c=>{if(a=!0,IT(c))this.events.next(new Hr(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),ok(c)?this.events.next(new vc(c.url)):i.resolve(!1);else{this.events.next(new gc(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0));try{i.resolve(t.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return at}))}))}cancelNavigationTransition(t,r,o){let i=new Hr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nO(n){return n!==hc}var rO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:()=>A(oO),providedIn:"root"})}}return n})(),Bg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},oO=(()=>{class n extends Bg{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Mo(n)))(o||n)}})()}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),RT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:()=>A(iO),providedIn:"root"})}}return n})(),iO=(()=>{class n extends RT{constructor(){super(...arguments),this.location=A(bn),this.urlSerializer=A(_c),this.options=A(Dc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=A(Wg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ss)this.stateMemento=this.createStateMemento();else if(t instanceof Br)this.rawUrlTree=r.initialUrl;else if(t instanceof Ud){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else t instanceof yc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Hr&&(t.code===Mt.GuardRejected||t.code===Mt.NoDataFromResolver)?this.restoreHistory(r):t instanceof gc?this.restoreHistory(r,!0):t instanceof or&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let i=this.browserPageId,s=p(p({},r.extras.state),this.generateNgRouterState(r.id,i));this.location.replaceState(o,"",s)}else{let i=p(p({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",i)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.currentUrlTree===t.finalUrl&&i===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Mo(n)))(o||n)}})()}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(uc||{});function NT(n,e){n.events.pipe(Ae(t=>t instanceof or||t instanceof Hr||t instanceof gc||t instanceof Br),$(t=>t instanceof or||t instanceof Br?uc.COMPLETE:(t instanceof Hr?t.code===Mt.Redirect||t.code===Mt.SupersededByNewNavigation:!1)?uc.REDIRECTING:uc.FAILED),Ae(t=>t!==uc.REDIRECTING),St(1)).subscribe(()=>{e()})}function sO(n){throw n}var aO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=A(pd),this.stateManager=A(RT),this.options=A(Dc,{optional:!0})||{},this.pendingTasks=A(Ro),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=A(Qg),this.urlSerializer=A(_c),this.location=A(bn),this.urlHandlingStrategy=A(Wg),this._events=new Fe,this.errorHandler=this.options.errorHandler||sO,this.navigated=!1,this.routeReuseStrategy=A(rO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=A(wc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!A(qd,{optional:!0}),this.eventsSubscription=new xe,this.isNgZoneEnabled=A(ve)instanceof ve&&ve.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Hr&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof or)this.navigated=!0;else if(r instanceof vc){let s=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),a={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||nO(o.source)};this.scheduleNavigation(s,hc,null,a,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}uO(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let c=p({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(zg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a){case"merge":u=p(p({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let m=o?o.snapshot:this.routerState.snapshot.root;h=dT(m)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),h=this.currentUrlTree.root}return hT(h,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let o=As(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,hc,null,r)}navigate(t,r={skipLocationChange:!1}){return lO(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=p({},aO):r===!1?o=p({},cO):o=r,As(t))return Kw(this.currentUrlTree,t,o);let i=this.parseUrl(t);return Kw(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,m)=>{a=h,c=m});let u=this.pendingTasks.add();return NT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lO(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new F(4008,!1)}function uO(n){return!(n instanceof yc)&&!(n instanceof vc)}var zd=class{};var dO=(()=>{class n{constructor(t,r,o,i,s){this.router=t,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ae(t=>t instanceof or),xt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let o=[];for(let i of r){i.providers&&!i._injector&&(i._injector=hd(i.providers,t,`Route: ${i.path}`));let s=i._injector??t,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return X(o).pipe(Qi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(t,r):o=O(null);let i=o.pipe(Ne(s=>s===null?O(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return X([i,s]).pipe(Qi())}else return i})}static{this.\u0275fac=function(r){return new(r||n)(R(Rn),R(gd),R(tt),R(zd),R(Kg))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kT=new P(""),hO=(()=>{class n{constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=A(tt),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ss?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof or?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Br&&t.code===Ld.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Vd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>f(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),dd(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Vd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){DI()}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac})}}return n})();function OT(n,...e){return fs([{provide:wc,multi:!0,useValue:n},[],{provide:Uo,useFactory:PT,deps:[Rn]},{provide:ec,multi:!0,useFactory:xT},e.map(t=>t.\u0275providers)])}function PT(n){return n.routerState.root}function Mc(n,e){return{\u0275kind:n,\u0275providers:e}}function xT(){let n=A(rn);return e=>{let t=n.get(gs);if(e!==t.components[0])return;let r=n.get(Rn),o=n.get(FT);n.get(Yg)===1&&r.initialNavigation(),n.get(LT,null,Y.Optional)?.setUpPreloading(),n.get(kT,null,Y.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var FT=new P("",{factory:()=>new Fe}),Yg=new P("",{providedIn:"root",factory:()=>1});function Jg(){return Mc(2,[{provide:Yg,useValue:0},{provide:md,multi:!0,deps:[rn],useFactory:e=>{let t=e.get(Ew,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let o=e.get(Rn),i=e.get(FT);NT(o,()=>{r(!0)}),e.get(Qg).afterPreactivation=()=>(r(!0),i.closed?O(void 0):i),o.initialNavigation()}))}}])}function fO(){return Mc(3,[{provide:md,multi:!0,useFactory:()=>{let e=A(Rn);return()=>{e.setUpLocationChangeListener()}}},{provide:Yg,useValue:2}])}var LT=new P("");function pO(n){return Mc(0,[{provide:LT,useExisting:dO},{provide:zd,useExisting:n}])}function mO(){return Mc(8,[Jw,{provide:qd,useExisting:Jw}])}function gO(n){let e=[{provide:DT,useValue:eO},{provide:MT,useValue:p({skipNextTransition:!!n?.skipInitialTransition},n)}];return Mc(9,e)}var Xw=new P("ROUTER_FORROOT_GUARD"),yO=[bn,{provide:_c,useClass:pc},Rn,Ac,{provide:Uo,useFactory:PT,deps:[Rn]},Kg,[]],Wd=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[yO,[],{provide:wc,multi:!0,useValue:t},{provide:Xw,useFactory:IO,deps:[[Rn,new Zu,new sm]]},{provide:Dc,useValue:r||{}},r?.useHash?CO():EO(),vO(),r?.preloadingStrategy?pO(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?wO(r):[],r?.bindToComponentInputs?mO().\u0275providers:[],r?.enableViewTransitions?gO().\u0275providers:[],TO()]}}static forChild(t){return{ngModule:n,providers:[{provide:wc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(R(Xw,8))}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=Zt({})}}return n})();function vO(){return{provide:kT,useFactory:()=>{let n=A(_w),e=A(ve),t=A(Dc),r=A(Qg),o=A(_c);return t.scrollOffset&&n.setOffset(t.scrollOffset),new hO(o,r,n,e,t)}}}function CO(){return{provide:Po,useClass:ww}}function EO(){return{provide:Po,useClass:Jm}}function IO(n){return"guarded"}function wO(n){return[n.initialNavigation==="disabled"?fO().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Jg().\u0275providers:[]]}var eT=new P("");function TO(){return[{provide:eT,useFactory:xT},{provide:ec,multi:!0,useExisting:eT}]}var Bh={};yt(Bh,{addClientCapabilitiesToClaims:()=>NP,blockAPICallsBeforeInitialize:()=>Vh,blockAcquireTokenInPopups:()=>b_,blockNonBrowserEnvironment:()=>Uh,blockRedirectInIframe:()=>S_,blockReloadInHiddenIframes:()=>A_,clearHash:()=>Ll,createGuid:()=>Dv,getCurrentUri:()=>gt,getHomepage:()=>bv,invoke:()=>Ie,invokeAsync:()=>y,isInIframe:()=>Ul,isInPopup:()=>__,preconnect:()=>Hl,preflightCheck:()=>Vl,redirectPreflightCheck:()=>Hh,replaceHash:()=>Sv});var v={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},sn={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},$t={GET:"GET",POST:"POST"},Rt=[v.OPENID_SCOPE,v.PROFILE_SCOPE,v.OFFLINE_ACCESS_SCOPE],Zg=[...Rt,v.EMAIL_SCOPE],Se={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Qd={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},an={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Ms={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},be={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"};var Rc={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},Nn={QUERY:"query",FRAGMENT:"fragment"},Xg={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},Nc={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Rs={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},ir={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},De={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var kc="appmetadata",VT="client_info",Vo="1",Ns={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},ut={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},He={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},K={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},sr={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Yd={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Jd={username:"username",password:"password"},Ho={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Zd={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},kn={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},Xd={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var Oc=300;var $r={};yt($r,{postRequestFailed:()=>xc,unexpectedError:()=>Pc});var Pc="unexpected_error",xc="post_request_failed";var eh={[Pc]:"Unexpected error in authentication.",[xc]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},HT={unexpectedError:{code:Pc,desc:eh[Pc]},postRequestFailed:{code:xc,desc:eh[xc]}},V=class n extends Error{constructor(e,t,r){let o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||v.EMPTY_STRING,this.errorMessage=t||v.EMPTY_STRING,this.subError=r||v.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function ks(n,e){return new V(n,e?`${eh[n]} ${e}`:eh[n])}var Be={};yt(Be,{authTimeNotFound:()=>ar,authorizationCodeMissingFromServerResponse:()=>ti,bindingKeyNotRemoved:()=>qc,cannotAppendScopeSet:()=>Zo,cannotRemoveEmptyScope:()=>Jo,clientInfoDecodingError:()=>Gr,clientInfoEmptyError:()=>Bo,deviceCodeExpired:()=>Vc,deviceCodePollingCancelled:()=>Uc,deviceCodeUnknownError:()=>Hc,emptyInputScopeSet:()=>Kr,endSessionEndpointNotSupported:()=>ni,endpointResolutionError:()=>dt,hashNotDeserialized:()=>zo,invalidAssertion:()=>$c,invalidCacheEnvironment:()=>lr,invalidCacheRecord:()=>Xo,invalidClientCredential:()=>Gc,invalidState:()=>cn,keyIdMissing:()=>ri,maxAgeTranspired:()=>Wo,methodNotImplemented:()=>G,missingTenantIdError:()=>Qc,multipleMatchingAccounts:()=>Lc,multipleMatchingAppMetadata:()=>Qo,multipleMatchingTokens:()=>Fc,nestedAppAuthBridgeDisabled:()=>Yc,networkError:()=>$o,noAccountFound:()=>Bc,noAccountInSilentRequest:()=>cr,noCryptoObject:()=>Wr,noNetworkConnectivity:()=>Kc,nonceMismatch:()=>Ko,nullOrEmptyToken:()=>jo,openIdConfigError:()=>Go,requestCannotBeMade:()=>Yo,stateMismatch:()=>qo,stateNotFound:()=>qr,tokenClaimsCnfRequiredForSignedJwt:()=>ei,tokenParsingError:()=>zr,tokenRefreshRequired:()=>ur,unexpectedCredentialType:()=>jc,userCanceled:()=>Wc,userTimeoutReached:()=>zc});var Gr="client_info_decoding_error",Bo="client_info_empty_error",zr="token_parsing_error",jo="null_or_empty_token",dt="endpoints_resolution_error",$o="network_error",Go="openid_config_error",zo="hash_not_deserialized",cn="invalid_state",qo="state_mismatch",qr="state_not_found",Ko="nonce_mismatch",ar="auth_time_not_found",Wo="max_age_transpired",Fc="multiple_matching_tokens",Lc="multiple_matching_accounts",Qo="multiple_matching_appMetadata",Yo="request_cannot_be_made",Jo="cannot_remove_empty_scope",Zo="cannot_append_scopeset",Kr="empty_input_scopeset",Uc="device_code_polling_cancelled",Vc="device_code_expired",Hc="device_code_unknown_error",cr="no_account_in_silent_request",Xo="invalid_cache_record",lr="invalid_cache_environment",Bc="no_account_found",Wr="no_crypto_object",jc="unexpected_credential_type",$c="invalid_assertion",Gc="invalid_client_credential",ur="token_refresh_required",zc="user_timeout_reached",ei="token_claims_cnf_required_for_signedjwt",ti="authorization_code_missing_from_server_response",qc="binding_key_not_removed",ni="end_session_endpoint_not_supported",ri="key_id_missing",Kc="no_network_connectivity",Wc="user_canceled",Qc="missing_tenant_id_error",G="method_not_implemented",Yc="nested_app_auth_bridge_disabled";var j={[Gr]:"The client info could not be parsed/decoded correctly",[Bo]:"The client info was empty",[zr]:"Token cannot be parsed",[jo]:"The token is null or empty",[dt]:"Endpoints cannot be resolved",[$o]:"Network request failed",[Go]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[zo]:"The hash parameters could not be deserialized",[cn]:"State was not the expected format",[qo]:"State mismatch error",[qr]:"State not found",[Ko]:"Nonce mismatch error",[ar]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Wo]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Fc]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Lc]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Qo]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Yo]:"Token request cannot be made without authorization code or refresh token.",[Jo]:"Cannot remove null or empty scope from ScopeSet",[Zo]:"Cannot append ScopeSet",[Kr]:"Empty input ScopeSet cannot be processed",[Uc]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Vc]:"Device code is expired.",[Hc]:"Device code stopped polling for unknown reasons.",[cr]:"Please pass an account object, silent flow is not supported without account information",[Xo]:"Cache record object was null or undefined.",[lr]:"Invalid environment when attempting to create cache entry",[Bc]:"No account found in cache for given key.",[Wr]:"No crypto object detected.",[jc]:"Unexpected credential type.",[$c]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Gc]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ur]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[zc]:"User defined timeout for device code polling reached",[ei]:"Cannot generate a POP jwt if the token_claims are not populated",[ti]:"Server response does not contain an authorization code to proceed",[qc]:"Could not remove the credential's binding key from storage.",[ni]:"The provided authority does not support logout",[ri]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Kc]:"No network connectivity. Check your internet connection.",[Wc]:"User cancelled the flow.",[Qc]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[G]:"This method has not been implemented",[Yc]:"The nested app auth bridge is disabled"},BT={clientInfoDecodingError:{code:Gr,desc:j[Gr]},clientInfoEmptyError:{code:Bo,desc:j[Bo]},tokenParsingError:{code:zr,desc:j[zr]},nullOrEmptyToken:{code:jo,desc:j[jo]},endpointResolutionError:{code:dt,desc:j[dt]},networkError:{code:$o,desc:j[$o]},unableToGetOpenidConfigError:{code:Go,desc:j[Go]},hashNotDeserialized:{code:zo,desc:j[zo]},invalidStateError:{code:cn,desc:j[cn]},stateMismatchError:{code:qo,desc:j[qo]},stateNotFoundError:{code:qr,desc:j[qr]},nonceMismatchError:{code:Ko,desc:j[Ko]},authTimeNotFoundError:{code:ar,desc:j[ar]},maxAgeTranspired:{code:Wo,desc:j[Wo]},multipleMatchingTokens:{code:Fc,desc:j[Fc]},multipleMatchingAccounts:{code:Lc,desc:j[Lc]},multipleMatchingAppMetadata:{code:Qo,desc:j[Qo]},tokenRequestCannotBeMade:{code:Yo,desc:j[Yo]},removeEmptyScopeError:{code:Jo,desc:j[Jo]},appendScopeSetError:{code:Zo,desc:j[Zo]},emptyInputScopeSetError:{code:Kr,desc:j[Kr]},DeviceCodePollingCancelled:{code:Uc,desc:j[Uc]},DeviceCodeExpired:{code:Vc,desc:j[Vc]},DeviceCodeUnknownError:{code:Hc,desc:j[Hc]},NoAccountInSilentRequest:{code:cr,desc:j[cr]},invalidCacheRecord:{code:Xo,desc:j[Xo]},invalidCacheEnvironment:{code:lr,desc:j[lr]},noAccountFound:{code:Bc,desc:j[Bc]},noCryptoObj:{code:Wr,desc:j[Wr]},unexpectedCredentialType:{code:jc,desc:j[jc]},invalidAssertion:{code:$c,desc:j[$c]},invalidClientCredential:{code:Gc,desc:j[Gc]},tokenRefreshRequired:{code:ur,desc:j[ur]},userTimeoutReached:{code:zc,desc:j[zc]},tokenClaimsRequired:{code:ei,desc:j[ei]},noAuthorizationCodeFromServer:{code:ti,desc:j[ti]},bindingKeyNotRemovedError:{code:qc,desc:j[qc]},logoutNotSupported:{code:ni,desc:j[ni]},keyIdMissing:{code:ri,desc:j[ri]},noNetworkConnectivity:{code:Kc,desc:j[Kc]},userCanceledError:{code:Wc,desc:j[Wc]},missingTenantIdError:{code:Qc,desc:j[Qc]},nestedAppAuthBridgeDisabled:{code:Yc,desc:j[Yc]}},Jc=class n extends V{constructor(e,t){super(e,t?`${j[e]}: ${t}`:j[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function C(n,e){return new Jc(n,e)}var Qr={createNewGuid:()=>{throw C(G)},base64Decode:()=>{throw C(G)},base64Encode:()=>{throw C(G)},base64UrlEncode:()=>{throw C(G)},encodeKid:()=>{throw C(G)},getPublicKeyThumbprint(){return f(this,null,function*(){throw C(G)})},removeTokenBindingKey(){return f(this,null,function*(){throw C(G)})},clearKeystore(){return f(this,null,function*(){throw C(G)})},signJwt(){return f(this,null,function*(){throw C(G)})},hashString(){return f(this,null,function*(){throw C(G)})}};var le=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(le||{}),ht=class n{constructor(e,t,r){this.level=le.Info;let o=()=>{},i=e||n.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:le.Info,this.correlationId=i.correlationId||v.EMPTY_STRING,this.packageName=t||v.EMPTY_STRING,this.packageVersion=r||v.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:le.Info}}clone(e,t,r){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${le[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:le.Error,containsPii:!1,correlationId:t||v.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:le.Error,containsPii:!0,correlationId:t||v.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:le.Warning,containsPii:!1,correlationId:t||v.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:le.Warning,containsPii:!0,correlationId:t||v.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:le.Info,containsPii:!1,correlationId:t||v.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:le.Info,containsPii:!0,correlationId:t||v.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:le.Verbose,containsPii:!1,correlationId:t||v.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:le.Verbose,containsPii:!0,correlationId:t||v.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:le.Trace,containsPii:!1,correlationId:t||v.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:le.Trace,containsPii:!0,correlationId:t||v.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var th="@azure/msal-common",Os="15.12.0";var Yr={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var ft={};yt(ft,{authorityMismatch:()=>il,authorityUriInsecure:()=>ii,cannotAllowPlatformBroker:()=>ol,cannotSetOIDCOptions:()=>rl,claimsRequestParsingError:()=>Zc,emptyInputScopesError:()=>ai,invalidAuthenticationHeader:()=>nl,invalidAuthorityMetadata:()=>di,invalidAuthorizePostBodyParameters:()=>al,invalidClaims:()=>Jr,invalidCloudDiscoveryMetadata:()=>Zr,invalidCodeChallengeMethod:()=>Xc,invalidRequestMethodForEAR:()=>sl,logoutRequestEmpty:()=>li,missingNonceAuthenticationHeader:()=>tl,missingSshJwk:()=>dr,missingSshKid:()=>el,pkceParamsMissing:()=>ui,redirectUriEmpty:()=>oi,tokenRequestEmpty:()=>ci,untrustedAuthority:()=>hi,urlEmptyError:()=>si,urlParseError:()=>On});var oi="redirect_uri_empty",Zc="claims_request_parsing_error",ii="authority_uri_insecure",On="url_parse_error",si="empty_url_error",ai="empty_input_scopes_error",Jr="invalid_claims",ci="token_request_empty",li="logout_request_empty",Xc="invalid_code_challenge_method",ui="pkce_params_missing",Zr="invalid_cloud_discovery_metadata",di="invalid_authority_metadata",hi="untrusted_authority",dr="missing_ssh_jwk",el="missing_ssh_kid",tl="missing_nonce_authentication_header",nl="invalid_authentication_header",rl="cannot_set_OIDCOptions",ol="cannot_allow_platform_broker",il="authority_mismatch",sl="invalid_request_method_for_EAR",al="invalid_authorize_post_body_parameters";var Ce={[oi]:"A redirect URI is required for all calls, and none has been set.",[Zc]:"Could not parse the given claims request object.",[ii]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[On]:"URL could not be parsed into appropriate segments.",[si]:"URL was empty or null.",[ai]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Jr]:"Given claims parameter must be a stringified JSON object.",[ci]:"Token request was empty and not found in cache.",[li]:"The logout request was null or undefined.",[Xc]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[ui]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Zr]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[di]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[hi]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[dr]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[el]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[tl]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[nl]:"Invalid authentication header provided",[rl]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[ol]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[il]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[al]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[sl]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},jT={redirectUriNotSet:{code:oi,desc:Ce[oi]},claimsRequestParsingError:{code:Zc,desc:Ce[Zc]},authorityUriInsecure:{code:ii,desc:Ce[ii]},urlParseError:{code:On,desc:Ce[On]},urlEmptyError:{code:si,desc:Ce[si]},emptyScopesError:{code:ai,desc:Ce[ai]},invalidClaimsRequest:{code:Jr,desc:Ce[Jr]},tokenRequestEmptyError:{code:ci,desc:Ce[ci]},logoutRequestEmptyError:{code:li,desc:Ce[li]},invalidCodeChallengeMethod:{code:Xc,desc:Ce[Xc]},invalidCodeChallengeParams:{code:ui,desc:Ce[ui]},invalidCloudDiscoveryMetadata:{code:Zr,desc:Ce[Zr]},invalidAuthorityMetadata:{code:di,desc:Ce[di]},untrustedAuthority:{code:hi,desc:Ce[hi]},missingSshJwk:{code:dr,desc:Ce[dr]},missingSshKid:{code:el,desc:Ce[el]},missingNonceAuthenticationHeader:{code:tl,desc:Ce[tl]},invalidAuthenticationHeader:{code:nl,desc:Ce[nl]},cannotSetOIDCOptions:{code:rl,desc:Ce[rl]},cannotAllowPlatformBroker:{code:ol,desc:Ce[ol]},authorityMismatch:{code:il,desc:Ce[il]},invalidAuthorizePostBodyParameters:{code:al,desc:Ce[al]},invalidRequestMethodForEAR:{code:sl,desc:Ce[sl]}},cl=class n extends V{constructor(e){super(e,Ce[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function Z(n){return new cl(n)}var de=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){let[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var Ee=class n{constructor(e){let t=e?de.trimArrayEntries([...e]):[],r=t?de.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw Z(ai);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){let r=(e||v.EMPTY_STRING).split(" ");return new n(r)}static createSearchScopes(e){let t=e&&e.length>0?e:[...Rt],r=new n(t);return r.containsOnlyOIDCScopes()?r.removeScope(v.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let t=this.printScopesLowerCase().split(" "),r=new n(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Zg.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw C(Zo)}}removeScope(e){if(!e)throw C(Jo);this.scopes.delete(e.trim())}removeOIDCScopes(){Zg.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw C(Kr);let t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw C(Kr);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):v.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function ey(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Ps(n,e,t,r){if(r){let{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l,preferred_username:u,upn:h,login_hint:m}=r,g=s||c||l||"";return{tenantId:g,localAccountId:o||i||"",name:a,username:u||h||"",loginHint:m,isHomeTenant:ey(g,n)}}else return{tenantId:t,localAccountId:e,username:"",isHomeTenant:ey(t,n)}}function fi(n,e,t,r){let o=n;if(e){let i=e,{isHomeTenant:a}=i,c=pn(i,["isHomeTenant"]);o=p(p({},n),c)}if(t){let s=Ps(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,c=pn(s,["isHomeTenant"]);return o=S(p(p({},o),c),{idTokenClaims:t,idToken:r}),o}return o}var xs={};yt(xs,{checkMaxAge:()=>ll,extractTokenClaims:()=>hr,getJWSPayload:()=>$T});function hr(n,e){let t=$T(n);try{let r=e(t);return JSON.parse(r)}catch{throw C(zr)}}function $T(n){if(!n)throw C(jo);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw C(zr);return t[2]}function ll(n,e){if(e===0||Date.now()-3e5>n+e)throw C(Wo)}var xn={};yt(xn,{getDeserializedResponse:()=>ty,mapToQueryString:()=>Pn,normalizeUrlForComparison:()=>_O,stripLeadingHashOrQuery:()=>zT});function GT(n){if(!n)return n;let e=n.toLowerCase();return de.endsWith(e,"?")?e=e.slice(0,-1):de.endsWith(e,"?/")&&(e=e.slice(0,-2)),de.endsWith(e,"/")||(e+="/"),e}function zT(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function ty(n){if(!n||n.indexOf("=")<0)return null;try{let e=zT(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw C(zo)}return null}function Pn(n,e=!0,t){let r=new Array;return n.forEach((o,i)=>{!e&&t&&i in t?r.push(`${i}=${o}`):r.push(`${i}=${encodeURIComponent(o)}`)}),r.join("&")}function _O(n){if(!n)return n;let e=n.split("#")[0];try{let t=new URL(e),r=t.origin+t.pathname+t.search;return GT(r)}catch{return GT(e)}}var z=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Z(si);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return de.endsWith(t,"?")?t=t.slice(0,-1):de.endsWith(t,"?/")&&(t=t.slice(0,-2)),de.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Z(On)}if(!e.HostNameAndPort||!e.PathSegments)throw Z(On);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Z(ii)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===an.COMMON||r[0]===an.ORGANIZATIONS)&&(r[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Z(On);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw Z(On);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===v.FORWARD_SLASH){let o=new n(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!ty(e)}};var KT={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},ny=KT.endpointMetadata,ry=KT.instanceDiscoveryMetadata,oy=new Set;ry.metadata.forEach(n=>{n.aliases.forEach(e=>{oy.add(e)})});function WT(n,e){let t,r=n.canonicalAuthority;if(r){let o=new z(r).getUrlComponents().HostNameAndPort;t=qT(o,n.cloudDiscoveryMetadata?.metadata,ut.CONFIG,e)||qT(o,ry.metadata,ut.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function qT(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let o=ul(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function QT(n){return ul(ry.metadata,n)}function ul(n,e){for(let t=0;t<n.length;t++){let r=n[t];if(r.aliases.includes(e))return r}return null}var hl={};yt(hl,{cacheErrorUnknown:()=>dl,cacheQuotaExceeded:()=>nh});var nh="cache_quota_exceeded",dl="cache_error_unknown";var iy={[nh]:"Exceeded cache storage capacity.",[dl]:"Unexpected error occurred when using cache storage."},Xr=class n extends V{constructor(e,t){let r=t||(iy[e]?iy[e]:iy[dl]);super(`${e}: ${r}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}};function Fs(n){return n instanceof Error?n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED"||n.message.includes("exceeded the quota")?new Xr(nh):new Xr(n.name,n.message):new Xr(dl)}var pi=class{constructor(e,t,r,o,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(th,Os),this.staticAuthorityOptions=i,this.performanceClient=o}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(Object.keys(e).length===0||Object.values(e).every(o=>!o))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let r=this.getAllAccounts(e,t);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,t){let r=this.getAccountsFilteredBy(e,t);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,t,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,o,i){let s=null,a;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;let c=this.getIdToken(e,o,t,r.tenantId);return c&&(a=hr(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=fi(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,t,r,o){let i=e.getAccountInfo(),s=i.tenantProfiles||new Map,a=this.getTokenKeys();if(r){let l=s.get(r);if(l)s=new Map([[r,l]]);else return[]}let c=[];return s.forEach(l=>{let u=this.getTenantedAccountInfoByFilter(i,a,l,t,o);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r){return f(this,null,function*(){if(!e)throw C(Xo);try{e.account&&(yield this.setAccount(e.account,t)),e.idToken&&r?.idToken!==!1&&(yield this.setIdTokenCredential(e.idToken,t)),e.accessToken&&r?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken,t)),e.refreshToken&&r?.refreshToken!==!1&&(yield this.setRefreshTokenCredential(e.refreshToken,t)),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof V?o:Fs(o)}})}saveAccessToken(e,t){return f(this,null,function*(){let r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),i=Ee.fromString(e.target);o.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,r,!1))return;let a=this.getAccessTokenCredential(s,t);a&&this.credentialMatchesFilter(a,r)&&Ee.fromString(a.target).intersectingScopeSets(i)&&this.removeAccessToken(s,t)}),yield this.setAccessTokenCredential(e,t)})}getAccountsFilteredBy(e,t){let r=this.getAccountKeys(),o=[];return r.forEach(i=>{let s=this.getAccount(i,t);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;let a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,a));c&&c.length===0||o.push(s)}),o}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===De.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===K.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;let i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,t){this.removeAccountContext(e,t);let r=this.getAccountKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.filter(o).forEach(i=>{this.removeItem(i,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){let r=this.getTokenKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.idToken.filter(o).forEach(i=>{this.removeIdToken(i,t)}),r.accessToken.filter(o).forEach(i=>{this.removeAccessToken(i,t)}),r.refreshToken.filter(o).forEach(i=>{this.removeRefreshToken(i,t)})}removeAccessToken(e,t){let r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==De.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==K.POP)return;let o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${o}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:De.ID_TOKEN,clientId:this.clientId,realm:o},a=this.getIdTokensByFilter(s,t,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){let u=new Map;a.forEach((m,g)=>{m.realm===e.tenantId&&u.set(g,m)});let h=u.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(h===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,h)=>{this.removeIdToken(h,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){let o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,p({clientId:this.clientId},e)))return;let a=this.getIdTokenCredential(s,t);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,o){let i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);let s=Ee.createSearchScopes(t.scopes),a=t.authenticationScheme||K.BEARER,c=a&&a.toLowerCase()!==K.BEARER.toLowerCase()?De.ACCESS_TOKEN_WITH_AUTH_SCHEME:De.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,h=[];u.forEach(g=>{if(this.accessTokenKeyMatchesFilter(g,l,!0)){let w=this.getAccessTokenCredential(g,i);w&&this.credentialMatchesFilter(w,l)&&h.push(w)}});let m=h.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),h.forEach(g=>{this.removeAccessToken(this.generateCredentialKey(g),i)}),this.performanceClient.addFields({multiMatchedAT:h.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),h[0])}accessTokenKeyMatchesFilter(e,t,r){let o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){let r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;let s=this.getAccessTokenCredential(i,t);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?Vo:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:De.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(h=>{if(this.refreshTokenKeyMatchesFilter(h,a)){let m=this.getRefreshTokenCredential(h,r);m&&this.credentialMatchesFilter(m,a)&&l.push(m)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw C(Qo);return o[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===Vo)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let o=WT(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==De.ACCESS_TOKEN&&e.credentialType!==De.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Ee.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(kc)!==-1}isAuthorityMetadata(e){return e.indexOf(Ns.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Ns.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}},fl=class extends pi{setAccount(){return f(this,null,function*(){throw C(G)})}getAccount(){throw C(G)}setIdTokenCredential(){return f(this,null,function*(){throw C(G)})}getIdTokenCredential(){throw C(G)}setAccessTokenCredential(){return f(this,null,function*(){throw C(G)})}getAccessTokenCredential(){throw C(G)}setRefreshTokenCredential(){return f(this,null,function*(){throw C(G)})}getRefreshTokenCredential(){throw C(G)}setAppMetadata(){throw C(G)}getAppMetadata(){throw C(G)}setServerTelemetry(){throw C(G)}getServerTelemetry(){throw C(G)}setAuthorityMetadata(){throw C(G)}getAuthorityMetadata(){throw C(G)}getAuthorityMetadataKeys(){throw C(G)}setThrottlingCache(){throw C(G)}getThrottlingCache(){throw C(G)}removeItem(){throw C(G)}getKeys(){throw C(G)}getAccountKeys(){throw C(G)}getTokenKeys(){throw C(G)}generateCredentialKey(){throw C(G)}generateAccountKey(){throw C(G)}};var me={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var d={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},P2=new Map([[d.AcquireTokenByCode,"ATByCode"],[d.AcquireTokenByRefreshToken,"ATByRT"],[d.AcquireTokenSilent,"ATS"],[d.AcquireTokenSilentAsync,"ATSAsync"],[d.AcquireTokenPopup,"ATPopup"],[d.AcquireTokenRedirect,"ATRedirect"],[d.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[d.CryptoOptsSignJwt,"CryptoSignJwt"],[d.SilentCacheClientAcquireToken,"SltCacheClientAT"],[d.SilentIframeClientAcquireToken,"SltIframeClientAT"],[d.SilentRefreshClientAcquireToken,"SltRClientAT"],[d.SsoSilent,"SsoSlt"],[d.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[d.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[d.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[d.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[d.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[d.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[d.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[d.BrokerHandhshake,"BrokerHandshake"],[d.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[d.AcquireTokenByBroker,"ATByBroker"],[d.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[d.RefreshTokenClientAcquireToken,"RTClientAT"],[d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[d.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[d.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[d.AcquireTokenFromCache,"ATFromCache"],[d.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[d.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[d.AcquireTokenBySilentIframe,"ATBySltIframe"],[d.InitializeBaseRequest,"InitBaseReq"],[d.InitializeSilentRequest,"InitSltReq"],[d.InitializeClientApplication,"InitClientApplication"],[d.InitializeCache,"InitCache"],[d.ImportExistingCache,"importCache"],[d.SetUserData,"setUserData"],[d.LocalStorageUpdated,"localStorageUpdated"],[d.SilentIframeClientTokenHelper,"SIClientTHelper"],[d.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[d.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[d.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[d.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[d.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[d.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[d.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[d.GetAuthCodeUrl,"GetAuthCodeUrl"],[d.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[d.HandleCodeResponse,"HandleCodeResp"],[d.HandleResponseEar,"HandleRespEar"],[d.HandleResponseCode,"HandleRespCode"],[d.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[d.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[d.AuthClientAcquireToken,"AuthClientAT"],[d.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[d.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[d.PopTokenGenerateCnf,"PopTGenCnf"],[d.PopTokenGenerateKid,"PopTGenKid"],[d.HandleServerTokenResponse,"HandleServerTRes"],[d.DeserializeResponse,"DeserializeRes"],[d.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[d.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[d.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[d.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[d.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[d.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[d.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[d.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[d.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[d.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[d.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[d.AcquireTokenByCodeAsync,"ATByCodeAsync"],[d.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[d.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[d.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[d.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[d.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[d.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[d.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[d.NativeGenerateAuthResult,"NtvGenAuthRes"],[d.RemoveHiddenIframe,"RemoveHiddenIframe"],[d.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[d.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[d.GeneratePkceCodes,"GenPkceCodes"],[d.GenerateCodeVerifier,"GenCodeVerifier"],[d.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[d.Sha256Digest,"Sha256Digest"],[d.GetRandomValues,"GetRandomValues"],[d.GenerateHKDF,"genHKDF"],[d.GenerateBaseKey,"genBaseKey"],[d.Base64Decode,"b64Decode"],[d.UrlEncodeArr,"urlEncArr"],[d.Encrypt,"encrypt"],[d.Decrypt,"decrypt"],[d.GenerateEarKey,"genEarKey"],[d.DecryptEarResponse,"decryptEarResp"]]),sy={NotStarted:0,InProgress:1,Completed:2};var rh=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},fr=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:sy.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new rh}}startPerformanceMeasurement(){return new rh}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var oh={tokenRenewalOffsetSeconds:Oc,preventCorsPreflight:!1},AO={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:le.Info,correlationId:v.EMPTY_STRING},SO={claimsBasedCachingEnabled:!1},bO={sendGetRequestAsync(){return f(this,null,function*(){throw C(G)})},sendPostRequestAsync(){return f(this,null,function*(){throw C(G)})}},DO={sku:v.SKU,version:Os,cpu:v.EMPTY_STRING,os:v.EMPTY_STRING},MO={clientSecret:v.EMPTY_STRING,clientAssertion:void 0},RO={azureCloudInstance:Yr.None,tenant:`${v.DEFAULT_COMMON_TENANT}`},NO={application:{appName:"",appVersion:""}};function YT({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:h,serializableCache:m}){let g=p(p({},AO),t);return{authOptions:kO(n),systemOptions:p(p({},oh),e),loggerOptions:g,cacheOptions:p(p({},SO),r),storageInterface:o||new fl(n.clientId,Qr,new ht(g),new fr),networkInterface:i||bO,cryptoInterface:s||Qr,clientCredentials:a||MO,libraryInfo:p(p({},DO),c),telemetry:p(p({},NO),l),serverTelemetryManager:u||null,persistencePlugin:h||null,serializableCache:m||null}}function kO(n){return p({clientCapabilities:[],azureCloudOptions:RO,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},n)}function ih(n){return n.authOptions.authority.options.protocolMode===me.OIDC}var it={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};function Ls(n,e){if(!n)throw C(Bo);try{let t=e(n);return JSON.parse(t)}catch{throw C(Gr)}}function Fn(n){if(!n)throw C(Gr);let e=n.split(ir.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?v.EMPTY_STRING:e[1]}}var Pe={};yt(Pe,{addApplicationTelemetry:()=>gl,addAuthorizationCode:()=>Jy,addBrokerParameters:()=>yr,addCcsOid:()=>mr,addCcsUpn:()=>eo,addClaims:()=>Ci,addClientAssertion:()=>Cl,addClientAssertionType:()=>El,addClientCapabilitiesToClaims:()=>JT,addClientId:()=>yi,addClientInfo:()=>Ii,addClientSecret:()=>vl,addCodeChallengeParams:()=>KO,addCodeVerifier:()=>Xy,addCorrelationId:()=>Ei,addDeviceCode:()=>WO,addDomainHint:()=>Wy,addEARParameters:()=>XO,addExtraQueryParameters:()=>gr,addGrantType:()=>Il,addIdTokenHint:()=>Ky,addInstanceAware:()=>wl,addLibraryInfo:()=>ml,addLoginHint:()=>Vs,addLogoutHint:()=>ev,addNativeBroker:()=>qO,addNonce:()=>Yy,addOboAssertion:()=>QO,addPassword:()=>ZO,addPopToken:()=>Tl,addPostBodyParameters:()=>eP,addPostLogoutRedirectUri:()=>qy,addPrompt:()=>Qy,addRedirectUri:()=>vi,addRefreshToken:()=>Zy,addRequestTokenUse:()=>YO,addResponseMode:()=>zy,addResponseType:()=>zO,addScopes:()=>gi,addServerTelemetry:()=>Al,addSid:()=>dh,addSshJwk:()=>_l,addState:()=>yl,addThrottling:()=>Sl,addUsername:()=>JO,instrumentBrokerParams:()=>mi});var pr={};yt(pr,{ACCESS_TOKEN:()=>xO,BROKER_CLIENT_ID:()=>pl,BROKER_REDIRECT_URI:()=>uh,CCS_HEADER:()=>$O,CLAIMS:()=>uy,CLIENT_ASSERTION:()=>Py,CLIENT_ASSERTION_TYPE:()=>xy,CLIENT_ID:()=>Ln,CLIENT_INFO:()=>HO,CLIENT_REQUEST_ID:()=>Ey,CLIENT_SECRET:()=>Oy,CODE:()=>gy,CODE_CHALLENGE:()=>yy,CODE_CHALLENGE_METHOD:()=>vy,CODE_VERIFIER:()=>Cy,DEVICE_CODE:()=>ky,DOMAIN_HINT:()=>jy,EAR_JWE_CRYPTO:()=>Gy,EAR_JWK:()=>$y,ERROR:()=>OO,ERROR_DESCRIPTION:()=>PO,EXPIRES_IN:()=>LO,FOCI:()=>jO,GRANT_TYPE:()=>ly,ID_TOKEN:()=>FO,ID_TOKEN_HINT:()=>Ny,INSTANCE_AWARE:()=>Us,LOGIN_HINT:()=>By,LOGOUT_HINT:()=>Vy,NATIVE_BROKER:()=>Uy,NONCE:()=>py,OBO_ASSERTION:()=>Fy,ON_BEHALF_OF:()=>BO,POST_LOGOUT_URI:()=>Ry,PROMPT:()=>my,REDIRECT_URI:()=>sh,REFRESH_TOKEN:()=>hy,REFRESH_TOKEN_EXPIRES_IN:()=>UO,REQUESTED_TOKEN_USE:()=>Ly,REQ_CNF:()=>ch,RESPONSE_MODE:()=>cy,RESPONSE_TYPE:()=>ay,RETURN_SPA_CODE:()=>lh,SCOPE:()=>dy,SESSION_STATE:()=>VO,SID:()=>Hy,STATE:()=>fy,TOKEN_TYPE:()=>ah,X_APP_NAME:()=>Dy,X_APP_VER:()=>My,X_CLIENT_CPU:()=>_y,X_CLIENT_CURR_TELEM:()=>Ay,X_CLIENT_EXTRA_SKU:()=>GO,X_CLIENT_LAST_TELEM:()=>Sy,X_CLIENT_OS:()=>Ty,X_CLIENT_SKU:()=>Iy,X_CLIENT_VER:()=>wy,X_MS_LIB_CAPABILITY:()=>by});var Ln="client_id",sh="redirect_uri",ay="response_type",cy="response_mode",ly="grant_type",uy="claims",dy="scope",OO="error",PO="error_description",xO="access_token",FO="id_token",hy="refresh_token",LO="expires_in",UO="refresh_token_expires_in",fy="state",py="nonce",my="prompt",VO="session_state",HO="client_info",gy="code",yy="code_challenge",vy="code_challenge_method",Cy="code_verifier",Ey="client-request-id",Iy="x-client-SKU",wy="x-client-VER",Ty="x-client-OS",_y="x-client-CPU",Ay="x-client-current-telemetry",Sy="x-client-last-telemetry",by="x-ms-lib-capability",Dy="x-app-name",My="x-app-ver",Ry="post_logout_redirect_uri",Ny="id_token_hint",ky="device_code",Oy="client_secret",Py="client_assertion",xy="client_assertion_type",ah="token_type",ch="req_cnf",Fy="assertion",Ly="requested_token_use",BO="on_behalf_of",jO="foci",$O="X-AnchorMailbox",lh="return_spa_code",Uy="nativebroker",Vy="logout_hint",Hy="sid",By="login_hint",jy="domain_hint",GO="x-client-xtra-sku",pl="brk_client_id",uh="brk_redirect_uri",Us="instance_aware",$y="ear_jwk",Gy="ear_jwe_crypto";function mi(n,e,t){if(!e)return;let r=n.get(Ln);r&&n.has(pl)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(sh)},e)}function zO(n,e){n.set(ay,e)}function zy(n,e){n.set(cy,e||Xg.QUERY)}function qO(n){n.set(Uy,"1")}function gi(n,e,t=!0,r=Rt){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");let o=t?[...e||[],...r]:e||[],i=new Ee(o);n.set(dy,i.printScopes())}function yi(n,e){n.set(Ln,e)}function vi(n,e){n.set(sh,e)}function qy(n,e){n.set(Ry,e)}function Ky(n,e){n.set(Ny,e)}function Wy(n,e){n.set(jy,e)}function Vs(n,e){n.set(By,e)}function eo(n,e){n.set(Se.CCS_HEADER,`UPN:${e}`)}function mr(n,e){n.set(Se.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function dh(n,e){n.set(Hy,e)}function Ci(n,e,t){let r=JT(e,t);try{JSON.parse(r)}catch{throw Z(Jr)}n.set(uy,r)}function Ei(n,e){n.set(Ey,e)}function ml(n,e){n.set(Iy,e.sku),n.set(wy,e.version),e.os&&n.set(Ty,e.os),e.cpu&&n.set(_y,e.cpu)}function gl(n,e){e?.appName&&n.set(Dy,e.appName),e?.appVersion&&n.set(My,e.appVersion)}function Qy(n,e){n.set(my,e)}function yl(n,e){e&&n.set(fy,e)}function Yy(n,e){n.set(py,e)}function KO(n,e,t){if(e&&t)n.set(yy,e),n.set(vy,t);else throw Z(ui)}function Jy(n,e){n.set(gy,e)}function WO(n,e){n.set(ky,e)}function Zy(n,e){n.set(hy,e)}function Xy(n,e){n.set(Cy,e)}function vl(n,e){n.set(Oy,e)}function Cl(n,e){e&&n.set(Py,e)}function El(n,e){e&&n.set(xy,e)}function QO(n,e){n.set(Fy,e)}function YO(n,e){n.set(Ly,e)}function Il(n,e){n.set(ly,e)}function Ii(n){n.set(VT,"1")}function wl(n){n.has(Us)||n.set(Us,"true")}function gr(n,e){Object.entries(e).forEach(([t,r])=>{!n.has(t)&&r&&n.set(t,r)})}function JT(n,e){let t;if(!n)t={};else try{t=JSON.parse(n)}catch{throw Z(Jr)}return e&&e.length>0&&(t.hasOwnProperty(Ms.ACCESS_TOKEN)||(t[Ms.ACCESS_TOKEN]={}),t[Ms.ACCESS_TOKEN][Ms.XMS_CC]={values:e}),JSON.stringify(t)}function JO(n,e){n.set(Jd.username,e)}function ZO(n,e){n.set(Jd.password,e)}function Tl(n,e){e&&(n.set(ah,K.POP),n.set(ch,e))}function _l(n,e){e&&(n.set(ah,K.SSH),n.set(ch,e))}function Al(n,e){n.set(Ay,e.generateCurrentRequestHeaderValue()),n.set(Sy,e.generateLastRequestHeaderValue())}function Sl(n){n.set(by,sr.X_MS_LIB_CAPABILITY_VALUE)}function ev(n,e){n.set(Vy,e)}function yr(n,e,t){n.has(pl)||n.set(pl,e),n.has(uh)||n.set(uh,t)}function XO(n,e){n.set($y,encodeURIComponent(e)),n.set(Gy,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function eP(n,e){Object.entries(e).forEach(([t,r])=>{r&&n.set(t,r)})}var gh={};yt(gh,{createDiscoveredInstance:()=>sv});var pt={Default:0,Adfs:1,Dsts:2,Ciam:3};function ZT(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function XT(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function e_(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var Ie=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{let a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},y=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var t_=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)r.region_source=Ho.ENVIRONMENT_VARIABLE;else{let i=n.IMDS_OPTIONS;try{let s=yield y(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(v.IMDS_VERSION,i);if(s.status===sn.SUCCESS&&(o=s.body,r.region_source=Ho.IMDS),s.status===sn.BAD_REQUEST){let a=yield y(this.getCurrentVersion.bind(this),d.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=Ho.FAILED_AUTO_DETECTION,null;let c=yield y(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===sn.SUCCESS&&(o=c.body,r.region_source=Ho.IMDS)}}catch{return r.region_source=Ho.FAILED_AUTO_DETECTION,null}}return o||(r.region_source=Ho.FAILED_AUTO_DETECTION),o||null})}getRegionFromIMDS(t,r){return f(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${v.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,v.IMDS_TIMEOUT)})}getCurrentVersion(t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=yield this.networkInterface.sendGetRequestAsync(`${v.IMDS_ENDPOINT}?format=json`,t);return r.status===sn.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var _e={};yt(_e,{createAccessTokenEntity:()=>rv,createIdTokenEntity:()=>nv,createRefreshTokenEntity:()=>ov,generateAppMetadataKey:()=>lP,generateAuthorityMetadataExpiresAt:()=>fh,isAccessTokenEntity:()=>oP,isAppMetadataEntity:()=>uP,isAuthorityMetadataEntity:()=>dP,isAuthorityMetadataExpired:()=>ph,isCredentialEntity:()=>hh,isIdTokenEntity:()=>iP,isRefreshTokenEntity:()=>sP,isServerTelemetryEntity:()=>aP,isThrottlingEntity:()=>cP,updateAuthorityEndpointMetadata:()=>Bs,updateCloudDiscoveryMetadata:()=>Dl});var je={};yt(je,{delay:()=>rP,isCacheExpired:()=>nP,isTokenExpired:()=>Hs,nowSeconds:()=>Nt,toDateFromSeconds:()=>bl,toSecondsFromDate:()=>tP,wasClockTurnedBack:()=>tv});function Nt(){return Math.round(new Date().getTime()/1e3)}function tP(n){return n.getTime()/1e3}function bl(n){return n?new Date(Number(n)*1e3):new Date}function Hs(n,e){let t=Number(n)||0;return Nt()+e>t}function nP(n,e){let t=Number(n)+e*24*60*60*1e3;return Date.now()>t}function tv(n){return Number(n)>Nt()}function rP(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function nv(n,e,t,r,o){return{credentialType:De.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o,lastUpdatedAt:Date.now().toString()}}function rv(n,e,t,r,o,i,s,a,c,l,u,h,m,g,w){let I={homeAccountId:n,credentialType:De.ACCESS_TOKEN,secret:t,cachedAt:Nt().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||K.BEARER,lastUpdatedAt:Date.now().toString()};if(h&&(I.userAssertionHash=h),l&&(I.refreshOn=l.toString()),g&&(I.requestedClaims=g,I.requestedClaimsHash=w),I.tokenType?.toLowerCase()!==K.BEARER.toLowerCase())switch(I.credentialType=De.ACCESS_TOKEN_WITH_AUTH_SCHEME,I.tokenType){case K.POP:let N=hr(t,c);if(!N?.cnf?.kid)throw C(ei);I.keyId=N.cnf.kid;break;case K.SSH:I.keyId=m}return I}function ov(n,e,t,r,o,i,s){let a={credentialType:De.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,lastUpdatedAt:Date.now().toString()};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function hh(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function oP(n){return n?hh(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===De.ACCESS_TOKEN||n.credentialType===De.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function iP(n){return n?hh(n)&&n.hasOwnProperty("realm")&&n.credentialType===De.ID_TOKEN:!1}function sP(n){return n?hh(n)&&n.credentialType===De.REFRESH_TOKEN:!1}function aP(n,e){let t=n.indexOf(He.CACHE_KEY)===0,r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function cP(n,e){let t=!1;n&&(t=n.indexOf(sr.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function lP({environment:n,clientId:e}){return[kc,n,e].join(ir.CACHE_KEY_SEPARATOR).toLowerCase()}function uP(n,e){return e?n.indexOf(kc)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function dP(n,e){return e?n.indexOf(Ns.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function fh(){return Nt()+Ns.REFRESH_TIME_SECONDS}function Bs(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function Dl(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function ph(n){return n.expiresAt<=Nt()}var Gt=class n{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new t_(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(v.CIAM_AUTH_URL))return pt.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case v.ADFS:return pt.Adfs;case v.DSTS:return pt.Dsts}return pt.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new z(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw C(dt)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw C(dt)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw C(dt)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw C(ni);return this.replacePath(this.metadata.end_session_endpoint)}else throw C(dt)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw C(dt)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw C(dt)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===pt.Default&&this.protocolMode!==me.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,o=new z(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(c===0&&this.canReplaceTenant(o)){let u=new z(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===pt.Adfs||this.protocolMode===me.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield y(this.updateCloudDiscoveryMetadata.bind(this),d.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=yield y(this.updateEndpointMetadata.bind(this),d.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:fh(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==ut.CACHE&&r?.source!==ut.CACHE&&(e.expiresAt=fh(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===ut.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let o=yield y(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Bs(e,o,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=yield y(this.getEndpointMetadataFromNetwork.bind(this),d.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=yield y(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Bs(e,r,!0),ut.NETWORK;throw C(Go,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Bs(e,t,!1),{source:ut.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return Bs(e,o,!1),{source:ut.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=ph(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:ut.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new z(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Z(di)}return null}getEndpointMetadataFromNetwork(){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let r=yield this.networkInterface.sendGetRequestAsync(t,e);return ZT(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in ny?ny[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==v.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Zd.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let r=yield y(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),d.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=Zd.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,n.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=Zd.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=yield y(this.getCloudDiscoveryMetadataFromNetwork.bind(this),d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return Dl(e,r,!0),ut.NETWORK;throw Z(hi)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||v.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||v.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||v.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Dl(e,t,!1),ut.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=QT(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Dl(e,o,!1),ut.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let r=ph(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),ut.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===pt.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=ul(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Z(Zr)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${v.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},r=null;try{let o=yield this.networkInterface.sendGetRequestAsync(e,t),i,s;if(XT(o.body))i=o.body,s=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(e_(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),i=o.body,i.error===v.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=ul(s,this.hostnameAndPort)}catch(o){if(o instanceof V)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let i=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&z.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==Yr.None){let o=t.tenant?t.tenant:v.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return v.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw C(dt)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return oy.has(e)}static isPublicCloudAuthority(e){return v.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let o=new z(e);o.validateAsUri();let i=o.getUrlComponents(),s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${v.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=z.constructAuthorityUriFromObject(S(p({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r=p({},e);return r.authorization_endpoint=n.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=n.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=n.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,o=new z(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(v.CIAM_AUTH_URL)){let i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${v.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};Gt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",an.COMMON,an.CONSUMERS,an.ORGANIZATIONS]);function n_(n){let r=new z(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case an.COMMON:case an.ORGANIZATIONS:case an.CONSUMERS:return;default:return r}}function mh(n){return n.endsWith(v.FORWARD_SLASH)?n:`${n}${v.FORWARD_SLASH}`}function iv(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw Z(Zr)}return{canonicalAuthority:n.authority?mh(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function sv(n,e,t,r,o,i,s){return f(this,null,function*(){s?.addQueueMeasurement(d.AuthorityFactoryCreateDiscoveredInstance,i);let a=Gt.transformCIAMAuthority(mh(n)),c=new Gt(a,e,t,r,o,i,s);try{return yield y(c.resolveEndpointsAsync.bind(c),d.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw C(dt)}})}var Et=class n extends V{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,n.prototype)}};function vr(n,e,t){return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}var Cr=class n{static generateThrottlingStorageKey(e){return`${sr.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){let o=n.generateThrottlingStorageKey(t),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now()){e.removeItem(o,r);return}throw new Et(i.errorCodes?.join(" ")||v.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,o){if(n.checkResponseStatus(r)||n.checkResponseForRetryAfter(r)){let i={throttleTime:n.calculateThrottleTime(parseInt(r.headers[Se.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),i,o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Se.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||sr.DEFAULT_THROTTLE_TIME_SECONDS),r+sr.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){let i=vr(t,r,o),s=this.generateThrottlingStorageKey(i);e.removeItem(s,r.correlationId)}};var js=class n extends V{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}};function wi(n,e,t,r){return n.errorMessage=`${n.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new js(n,e,t)}var to=class{constructor(e,t){this.config=YT(e),this.logger=new ht(this.config.loggerOptions,th,Os),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[Se.CONTENT_TYPE]=v.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case it.HOME_ACCOUNT_ID:try{let r=Fn(e.credential);t[Se.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case it.UPN:t[Se.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,r,o,i,s){return f(this,null,function*(){s&&this.performanceClient?.addQueueMeasurement(s,i);let a=yield this.sendPostRequest(o,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a})}sendPostRequest(e,t,r,o){return f(this,null,function*(){Cr.preProcess(this.cacheManager,e,o);let i;try{i=yield y(this.networkClient.sendPostRequestAsync.bind(this.networkClient),d.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);let s=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:s[Se.X_MS_HTTP_VERSION]||"",requestId:s[Se.X_MS_REQUEST_ID]||""},o)}catch(s){if(s instanceof js){let a=s.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[Se.X_MS_HTTP_VERSION]||"",requestId:a[Se.X_MS_REQUEST_ID]||"",contentTypeHeader:a[Se.CONTENT_TYPE]||void 0,contentLengthHeader:a[Se.CONTENT_LENGTH]||void 0,httpStatus:s.httpStatus},o),s.error}throw s instanceof V?s:C($o)}return Cr.postProcess(this.cacheManager,e,i,o),i})}updateAuthority(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,o=yield sv(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o})}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&yr(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&gr(t,e.tokenQueryParameters),Ei(t,e.correlationId),mi(t,e.correlationId,this.performanceClient),Pn(t)}};function yh(n){return n&&(n.tid||n.tfp||n.acr)||null}var et=class n{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){let o=new n;t.authorityType===pt.Adfs?o.authorityType=Rs.ADFS_ACCOUNT_TYPE:t.protocolMode===me.OIDC?o.authorityType=Rs.GENERIC_ACCOUNT_TYPE:o.authorityType=Rs.MSSTS_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=Ls(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw C(lr);o.environment=s,o.realm=i?.utid||yh(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.loginHint=e.idTokenClaims?.login_hint,o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let l=Ps(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){let o=new n;return o.authorityType=e.authorityType||Rs.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.loginHint=e.loginHint,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,t,r,o,i){if(!(t===pt.Adfs||t===pt.Dsts)){if(e)try{let s=Ls(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){let i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}};var Un={};yt(Un,{badToken:()=>ro,consentRequired:()=>cv,interactionRequired:()=>av,loginRequired:()=>lv,nativeAccountUnavailable:()=>Ml,noTokensFound:()=>no,refreshTokenExpired:()=>Rl,uxNotAllowed:()=>vh});var no="no_tokens_found",Ml="native_account_unavailable",Rl="refresh_token_expired",vh="ux_not_allowed",av="interaction_required",cv="consent_required",lv="login_required",ro="bad_token";var r_=[av,cv,lv,ro,vh],hP=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Ch={[no]:"No refresh token found in the cache. Please sign-in.",[Ml]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Rl]:"Refresh token has expired.",[ro]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[vh]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},o_={noTokensFoundError:{code:no,desc:Ch[no]},native_account_unavailable:{code:Ml,desc:Ch[Ml]},bad_token:{code:ro,desc:Ch[ro]}},Ye=class n extends V{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,n.prototype),this.timestamp=o||v.EMPTY_STRING,this.traceId=i||v.EMPTY_STRING,this.correlationId=s||v.EMPTY_STRING,this.claims=a||v.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function Eh(n,e,t){let r=!!n&&r_.indexOf(n)>-1,o=!!t&&hP.indexOf(t)>-1,i=!!e&&r_.some(s=>e.indexOf(s)>-1);return r||i||o}function Ti(n){return new Ye(n,Ch[n])}var ln=class n{static setRequestState(e,t,r){let o=n.generateLibraryState(e,r);return t?`${o}${v.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw C(Wr);let r={id:e.createNewGuid()};t&&(r.meta=t);let o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw C(Wr);if(!t)throw C(cn);try{let r=t.split(v.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(v.RESOURCE_DELIM):v.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||v.EMPTY_STRING,libraryState:a}}catch{throw C(cn)}}};var fP={SW:"sw"},It=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateCnf,e.correlationId);let r=yield y(this.generateKid.bind(this),d.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}})}generateKid(e){return f(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:fP.SW}})}signPopToken(e,t,r){return f(this,null,function*(){return this.signPayload(e,t,r)})}signPayload(e,t,r,o){return f(this,null,function*(){let{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:l}=r,h=(s?new z(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(p({at:e,ts:Nt(),m:i?.toUpperCase(),u:h?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:h?.AbsolutePath,q:h?.QueryString?[[],h.QueryString]:void 0,client_claims:a||void 0},o),t,l,r.correlationId)})}};var Ih=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var un=class n{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||v.NOT_AVAILABLE} - Timestamp: ${e.timestamp||v.NOT_AVAILABLE} - Description: ${e.error_description||v.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||v.NOT_AVAILABLE} - Trace ID: ${e.trace_id||v.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new Et(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=sn.SERVER_ERROR_RANGE_START&&e.status<=sn.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(t&&e.status&&e.status>=sn.CLIENT_ERROR_RANGE_START&&e.status<=sn.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw Eh(e.error,e.error_description,e.suberror)?new Ye(e.error,e.error_description,e.suberror,e.timestamp||v.EMPTY_STRING,e.trace_id||v.EMPTY_STRING,e.correlation_id||v.EMPTY_STRING,e.claims||v.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=hr(e.id_token||v.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw C(Ko);if(o.maxAge||o.maxAge===0){let w=u.auth_time;if(!w)throw C(ar);ll(w,o.maxAge)}}this.homeAccountIdentifier=et.generateHomeAccountId(e.client_info||v.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let h;i&&i.state&&(h=ln.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;let m=this.generateCacheRecord(e,t,r,o,u,s,i),g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new Ih(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(g)),a&&!c&&m.account){let w=this.cacheStorage.generateAccountKey(m.account.getAccountInfo());if(!this.cacheStorage.getAccount(w,o.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,m,!1,o,u,h,void 0,l)}yield this.cacheStorage.saveCacheRecord(m,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(g))}return n.generateAuthenticationResult(this.cryptoObj,t,m,!1,o,u,h,e,l)})}generateCacheRecord(e,t,r,o,i,s,a){let c=t.getPreferredCache();if(!c)throw C(lr);let l=yh(i),u,h;e.id_token&&i&&(u=nv(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),h=$s(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,l,a,void 0,this.logger));let m=null;if(e.access_token){let I=e.scope?Ee.fromString(e.scope):new Ee(o.scopes||[]),N=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,L=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,ge=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,ee=r+N,Ze=ee+L,Tt=ge&&ge>0?r+ge:void 0;m=rv(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",I.printScopes(),ee,Ze,this.cryptoObj.base64Decode,Tt,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let g=null;if(e.refresh_token){let I;if(e.refresh_token_expires_in){let N=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;I=r+N}g=ov(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,I)}let w=null;return e.foci&&(w={clientId:this.clientId,environment:c,familyId:e.foci}),{account:h,idToken:u,accessToken:m,refreshToken:g,appMetadata:w}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return f(this,null,function*(){let u=v.EMPTY_STRING,h=[],m=null,g,w,I=v.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===K.POP&&!i.popKid){let ee=new It(e),{secret:Ze,keyId:Tt}=r.accessToken;if(!Tt)throw C(ri);u=yield ee.signPopToken(Ze,Tt,i)}else u=r.accessToken.secret;h=Ee.fromString(r.accessToken.target).asArray(),m=bl(r.accessToken.expiresOn),g=bl(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(w=bl(r.accessToken.refreshOn))}r.appMetadata&&(I=r.appMetadata.familyId===Vo?Vo:"");let N=s?.oid||s?.sub||"",L=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);let ge=r.account?fi(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:N,tenantId:L,scopes:h,account:ge,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:m,extExpiresOn:g,refreshOn:w,correlationId:i.correlationId,requestId:l||v.EMPTY_STRING,familyId:I,tokenType:r.accessToken?.tokenType||v.EMPTY_STRING,state:a?a.userRequestState:v.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||v.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||v.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})}};function $s(n,e,t,r,o,i,s,a,c,l,u,h){h?.verbose("setCachedAccount called");let g=n.getAccountKeys().find(ge=>ge.startsWith(t)),w=null;g&&(w=n.getAccount(g,o));let I=w||et.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},e,r),N=I.tenantProfiles||[],L=c||I.realm;if(L&&!N.find(ge=>ge.tenantId===L)){let ge=Ps(t,I.localAccountId,L,i);N.push(ge)}return I.tenantProfiles=N,I}function wh(n,e,t){return f(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var _i=class extends to{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}acquireToken(e,t){return f(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(d.AuthClientAcquireToken,e.correlationId),!e.code)throw C(Yo);let r=Nt(),o=yield y(this.executeTokenRequest.bind(this),d.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=o.headers?.[Se.X_MS_REQUEST_ID],s=new un(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),y(s.handleServerTokenResponse.bind(s),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)})}getLogoutUri(e){if(!e)throw Z(li);let t=this.createLogoutUrlQueryString(e);return z.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientExecuteTokenRequest,t.correlationId);let r=this.createTokenQueryParameters(t),o=z.appendQueryString(e.tokenEndpoint,r),i=yield y(this.createTokenRequestBody.bind(this),d.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let l=Ls(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${l.uid}${ir.CLIENT_INFO_SEPARATOR}${l.utid}`,type:it.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),c=vr(this.config.authOptions.clientId,t);return y(this.executePostToTokenEndpoint.bind(this),d.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,c,t.correlationId,d.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(yi(t,e.embeddedClientId||e.tokenBodyParameters?.[Ln]||this.config.authOptions.clientId),this.includeRedirectUri)vi(t,e.redirectUri);else if(!e.redirectUri)throw Z(oi);if(gi(t,e.scopes,!0,this.oidcDefaultScopes),Jy(t,e.code),ml(t,this.config.libraryInfo),gl(t,this.config.telemetry.application),Sl(t),this.serverTelemetryManager&&!ih(this.config)&&Al(t,this.serverTelemetryManager),e.codeVerifier&&Xy(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&vl(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;Cl(t,yield wh(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),El(t,o.assertionType)}if(Il(t,Nc.AUTHORIZATION_CODE_GRANT),Ii(t),e.authenticationScheme===K.POP){let o=new It(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield y(o.generateCnf.bind(o),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Tl(t,i)}else if(e.authenticationScheme===K.SSH)if(e.sshJwk)_l(t,e.sshJwk);else throw Z(dr);(!de.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Ci(t,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{let o=Ls(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${ir.CLIENT_INFO_SEPARATOR}${o.utid}`,type:it.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case it.HOME_ACCOUNT_ID:try{let o=Fn(r.credential);mr(t,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case it.UPN:eo(t,r.credential);break}return e.embeddedClientId&&yr(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&gr(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[lh])&&gr(t,{[lh]:"1"}),mi(t,e.correlationId,this.performanceClient),Pn(t)})}createLogoutUrlQueryString(e){let t=new Map;return e.postLogoutRedirectUri&&qy(t,e.postLogoutRedirectUri),e.correlationId&&Ei(t,e.correlationId),e.idTokenHint&&Ky(t,e.idTokenHint),e.state&&yl(t,e.state),e.logoutHint&&ev(t,e.logoutHint),e.extraQueryParameters&&gr(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&wl(t),Pn(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};var pP=300,Nl=class extends to{constructor(e,t){super(e,t)}acquireToken(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireToken,e.correlationId);let t=Nt(),r=yield y(this.executeTokenRequest.bind(this),d.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=r.headers?.[Se.X_MS_REQUEST_ID],i=new un(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),y(i.handleServerTokenResponse.bind(i),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)})}acquireTokenByRefreshToken(e){return f(this,null,function*(){if(!e)throw Z(ci);if(this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw C(cr);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield y(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let o=r instanceof Ye&&r.errorCode===no,i=r instanceof Et&&r.errorCode===Yd.INVALID_GRANT_ERROR&&r.subError===Yd.CLIENT_MISMATCH_ERROR;if(o||i)return y(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return y(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=Ie(this.cacheManager.getRefreshToken.bind(this.cacheManager),d.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw Ti(no);if(r.expiresOn&&Hs(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||pP))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Ti(Rl);let o=S(p({},e),{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||K.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:it.HOME_ACCOUNT_ID}});try{return yield y(this.acquireToken.bind(this),d.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(i){if(i instanceof Ye&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),i.subError===ro)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(s,e.correlationId)}throw i}})}executeTokenRequest(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),o=z.appendQueryString(t.tokenEndpoint,r),i=yield y(this.createTokenRequestBody.bind(this),d.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a=vr(this.config.authOptions.clientId,e);return y(this.executePostToTokenEndpoint.bind(this),d.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,d.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(yi(t,e.embeddedClientId||e.tokenBodyParameters?.[Ln]||this.config.authOptions.clientId),e.redirectUri&&vi(t,e.redirectUri),gi(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Il(t,Nc.REFRESH_TOKEN_GRANT),Ii(t),ml(t,this.config.libraryInfo),gl(t,this.config.telemetry.application),Sl(t),this.serverTelemetryManager&&!ih(this.config)&&Al(t,this.serverTelemetryManager),Zy(t,e.refreshToken),this.config.clientCredentials.clientSecret&&vl(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let r=this.config.clientCredentials.clientAssertion;Cl(t,yield wh(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),El(t,r.assertionType)}if(e.authenticationScheme===K.POP){let r=new It(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(yield y(r.generateCnf.bind(r),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Tl(t,o)}else if(e.authenticationScheme===K.SSH)if(e.sshJwk)_l(t,e.sshJwk);else throw Z(dr);if((!de.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Ci(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case it.HOME_ACCOUNT_ID:try{let r=Fn(e.ccsCredential.credential);mr(t,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case it.UPN:eo(t,e.ccsCredential.credential);break}return e.embeddedClientId&&yr(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&gr(t,e.tokenBodyParameters),mi(t,e.correlationId,this.performanceClient),Pn(t)})}};var kl=class extends to{constructor(e,t){super(e,t)}acquireCachedToken(e){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientAcquireCachedToken,e.correlationId);let t=kn.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!de.isEmptyObj(e.claims))throw this.setCacheOutcome(kn.FORCE_REFRESH_OR_CLAIMS,e.correlationId),C(ur);if(!e.account)throw C(cr);let r=e.account.tenantId||n_(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r);if(i){if(tv(i.cachedAt)||Hs(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(kn.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),C(ur);i.refreshOn&&Hs(i.refreshOn,0)&&(t=kn.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(kn.NO_CACHED_ACCESS_TOKEN,e.correlationId),C(ur);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield y(this.generateResultFromCacheRecord.bind(this),d.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==kn.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return f(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=hr(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let o=r?.auth_time;if(!o)throw C(ar);ll(o,t.maxAge)}return un.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)})}};var uv={sendGetRequestAsync:()=>Promise.reject(C(G)),sendPostRequestAsync:()=>Promise.reject(C(G))};var Vn={};yt(Vn,{getAuthorizationCodePayload:()=>yP,getAuthorizeUrl:()=>gP,getStandardAuthorizeRequestParameters:()=>mP,validateAuthorizationResponse:()=>i_});function mP(n,e,t,r){let o=e.correlationId,i=new Map;yi(i,e.embeddedClientId||e.extraQueryParameters?.[Ln]||n.clientId);let s=[...e.scopes||[],...e.extraScopesToConsent||[]];if(gi(i,s,!0,n.authority.options.OIDCOptions?.defaultScopes),vi(i,e.redirectUri),Ei(i,o),zy(i,e.responseMode),Ii(i),e.prompt&&(Qy(i,e.prompt),r?.addFields({prompt:e.prompt},o)),e.domainHint&&(Wy(i,e.domainHint),r?.addFields({domainHintFromRequest:!0},o)),e.prompt!==be.SELECT_ACCOUNT)if(e.sid&&e.prompt===be.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),dh(i,e.sid),r?.addFields({sidFromRequest:!0},o);else if(e.account){let a=CP(e.account),c=EP(e.account);if(c&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Vs(i,c),r?.addFields({loginHintFromClaim:!0},o);try{let l=Fn(e.account.homeAccountId);mr(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===be.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),dh(i,a),r?.addFields({sidFromClaim:!0},o);try{let l=Fn(e.account.homeAccountId);mr(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Vs(i,e.loginHint),eo(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Vs(i,e.account.username),r?.addFields({loginHintFromUpn:!0},o);try{let l=Fn(e.account.homeAccountId);mr(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Vs(i,e.loginHint),eo(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Yy(i,e.nonce),e.state&&yl(i,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&Ci(i,e.claims,n.clientCapabilities),e.embeddedClientId&&yr(i,n.clientId,n.redirectUri),n.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(Us))&&wl(i),i}function gP(n,e,t,r){let o=Pn(e,t,r);return z.appendQueryString(n.authorizationEndpoint,o)}function yP(n,e){if(i_(n,e),!n.code)throw C(ti);return n}function i_(n,e){if(!n.state||!e)throw n.state?C(qr,"Cached State"):C(qr,"Server State");let t,r;try{t=decodeURIComponent(n.state)}catch{throw C(cn,n.state)}try{r=decodeURIComponent(e)}catch{throw C(cn,n.state)}if(t!==r)throw C(qo);if(n.error||n.error_description||n.suberror){let o=vP(n);throw Eh(n.error,n.error_description,n.suberror)?new Ye(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",o):new Et(n.error||"",n.error_description,n.suberror,o)}}function vP(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}function CP(n){return n.idTokenClaims?.sid||null}function EP(n){return n.loginHint||n.idTokenClaims?.login_hint||null}var s_=",",a_="|";function IP(n){let{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]),a=[];if(e?.length){if(a=e.split(s_),a.length<4)return e}else a=Array.from({length:4},()=>a_);return s.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&wP({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(s_)}function wP(n){let{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(a_))}var Ai=class n{constructor(e,t){this.cacheOutcome=kn.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||v.EMPTY_STRING,this.wrapperVer=e.wrapperVer||v.EMPTY_STRING,this.telemetryCacheKey=He.CACHE_KEY+ir.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${He.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let o=t.join(He.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(He.VALUE_SEPARATOR);return[He.SCHEMA_VERSION,s,o].join(He.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(He.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(He.VALUE_SEPARATOR),i=e.errors.length,s=t<i?He.OVERFLOW_TRUE:He.OVERFLOW_FALSE,a=[i,s].join(He.VALUE_SEPARATOR);return[He.SCHEMA_VERSION,e.cacheHits,r,o,a].join(He.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=He.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof V?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(He.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,o=0,i=e.errors.length;for(t=0;t<i;t++){let s=e.failedRequests[2*t]||v.EMPTY_STRING,a=e.failedRequests[2*t+1]||v.EMPTY_STRING,c=e.errors[t]||v.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<He.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||v.EMPTY_STRING),e.push(this.regionSource||v.EMPTY_STRING),e.push(this.regionOutcome||v.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return IP(e)}};var Th="missing_kid_error",_h="missing_alg_error";var TP={[Th]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[_h]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},dv=class n extends V{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function hv(n){return new dv(n,TP[n])}var Ol=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw hv(Th);if(!e.alg)throw hv(_h);let t=new n({typ:e.typ||Xd.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var Si="pkce_not_created",Pl="ear_jwk_empty",Ah="ear_jwe_empty",bi="crypto_nonexistent",Hn="empty_navigate_uri",Gs="hash_empty_error",oo="no_state_in_hash",zs="hash_does_not_contain_known_properties",qs="unable_to_parse_state",Ks="state_interaction_type_mismatch",Ws="interaction_in_progress",Qs="popup_window_error",Ys="empty_window_error",dn="user_cancelled",Sh="monitor_popup_timeout",Js="monitor_window_timeout",Zs="redirect_in_iframe",Xs="block_iframe_reload",ea="block_nested_popups",bh="iframe_closed_prematurely",Bn="silent_logout_unsupported",ta="no_account_error",Dh="silent_prompt_value_error",na="no_token_request_cache_error",ra="unable_to_parse_token_request_cache_error",Mh="auth_request_not_set_error",Rh="invalid_cache_type",jn="non_browser_environment",$n="database_not_open",Er="no_network_connectivity",oa="post_request_failed",ia="get_request_failed",Di="failed_to_parse_response",sa="unable_to_load_token",io="crypto_key_not_found",aa="auth_code_required",ca="auth_code_or_nativeAccountId_required",la="spa_code_and_nativeAccountId_present",so="database_unavailable",ua="unable_to_acquire_token_from_native_platform",da="native_handshake_timeout",ha="native_extension_not_installed",ao="native_connection_not_established",Gn="uninitialized_public_client_application",fa="native_prompt_not_supported",pa="invalid_base64_string",ma="invalid_pop_token_request",Nh="failed_to_build_headers",kh="failed_to_parse_headers",ga="failed_to_decrypt_ear_response",Mi="timed_out";var Ir="For more visit: aka.ms/msaljs/browser-errors",B={[Si]:"The PKCE code challenge and verifier could not be generated.",[Pl]:"No EAR encryption key provided. This is unexpected.",[Ah]:"Server response does not contain ear_jwe property. This is unexpected.",[bi]:"The crypto object or function is not available.",[Hn]:"Navigation URI is empty. Please check stack trace for more info.",[Gs]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Ir}`,[oo]:"Hash does not contain state. Please verify that the request originated from msal.",[zs]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Ir}`,[qs]:"Unable to parse state. Please verify that the request originated from msal.",[Ks]:"Hash contains state but the interaction type does not match the caller.",[Ws]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Ir}`,[Qs]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Ys]:"window.open returned null or undefined window object.",[dn]:"User cancelled the flow.",[Sh]:`Token acquisition in popup failed due to timeout.  ${Ir}`,[Js]:`Token acquisition in iframe failed due to timeout.  ${Ir}`,[Zs]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Xs]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Ir}`,[ea]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[bh]:"The iframe being monitored was closed prematurely.",[Bn]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[ta]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Dh]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[na]:"No token request found in cache.",[ra]:"The cached token request could not be parsed.",[Mh]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Rh]:"Invalid cache type",[jn]:"Login and token requests are not supported in non-browser environments.",[$n]:"Database is not open!",[Er]:"No network connectivity. Check your internet connection.",[oa]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ia]:"Network request failed. Please check the network trace to determine root cause.",[Di]:"Failed to parse network response. Check network trace.",[sa]:"Error loading token to cache.",[io]:"Cryptographic Key or Keypair not found in browser storage.",[aa]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[ca]:"An authorization code or nativeAccountId must be provided to this flow.",[la]:"Request cannot contain both spa code and native account id.",[so]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[ua]:`Unable to acquire token from native platform.  ${Ir}`,[da]:"Timed out while attempting to establish connection to browser extension",[ha]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[ao]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Ir}`,[Gn]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Ir}`,[fa]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[pa]:"Invalid base64 encoded string.",[ma]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Nh]:"Failed to build request headers object.",[kh]:"Failed to parse response headers",[ga]:"Failed to decrypt ear response",[Mi]:"The request timed out."},PK={pkceNotGenerated:{code:Si,desc:B[Si]},cryptoDoesNotExist:{code:bi,desc:B[bi]},emptyNavigateUriError:{code:Hn,desc:B[Hn]},hashEmptyError:{code:Gs,desc:B[Gs]},hashDoesNotContainStateError:{code:oo,desc:B[oo]},hashDoesNotContainKnownPropertiesError:{code:zs,desc:B[zs]},unableToParseStateError:{code:qs,desc:B[qs]},stateInteractionTypeMismatchError:{code:Ks,desc:B[Ks]},interactionInProgress:{code:Ws,desc:B[Ws]},popupWindowError:{code:Qs,desc:B[Qs]},emptyWindowError:{code:Ys,desc:B[Ys]},userCancelledError:{code:dn,desc:B[dn]},monitorPopupTimeoutError:{code:Sh,desc:B[Sh]},monitorIframeTimeoutError:{code:Js,desc:B[Js]},redirectInIframeError:{code:Zs,desc:B[Zs]},blockTokenRequestsInHiddenIframeError:{code:Xs,desc:B[Xs]},blockAcquireTokenInPopupsError:{code:ea,desc:B[ea]},iframeClosedPrematurelyError:{code:bh,desc:B[bh]},silentLogoutUnsupportedError:{code:Bn,desc:B[Bn]},noAccountError:{code:ta,desc:B[ta]},silentPromptValueError:{code:Dh,desc:B[Dh]},noTokenRequestCacheError:{code:na,desc:B[na]},unableToParseTokenRequestCacheError:{code:ra,desc:B[ra]},authRequestNotSet:{code:Mh,desc:B[Mh]},invalidCacheType:{code:Rh,desc:B[Rh]},notInBrowserEnvironment:{code:jn,desc:B[jn]},databaseNotOpen:{code:$n,desc:B[$n]},noNetworkConnectivity:{code:Er,desc:B[Er]},postRequestFailed:{code:oa,desc:B[oa]},getRequestFailed:{code:ia,desc:B[ia]},failedToParseNetworkResponse:{code:Di,desc:B[Di]},unableToLoadTokenError:{code:sa,desc:B[sa]},signingKeyNotFoundInStorage:{code:io,desc:B[io]},authCodeRequired:{code:aa,desc:B[aa]},authCodeOrNativeAccountRequired:{code:ca,desc:B[ca]},spaCodeAndNativeAccountPresent:{code:la,desc:B[la]},databaseUnavailable:{code:so,desc:B[so]},unableToAcquireTokenFromNativePlatform:{code:ua,desc:B[ua]},nativeHandshakeTimeout:{code:da,desc:B[da]},nativeExtensionNotInstalled:{code:ha,desc:B[ha]},nativeConnectionNotEstablished:{code:ao,desc:B[ao]},uninitializedPublicClientApplication:{code:Gn,desc:B[Gn]},nativePromptNotSupported:{code:fa,desc:B[fa]},invalidBase64StringError:{code:pa,desc:B[pa]},invalidPopTokenRequest:{code:ma,desc:B[ma]}},Ri=class n extends V{constructor(e,t){super(e,B[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function E(n,e){return new Ri(n,e)}var we={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},mt={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},ya={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},pe={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},fv={GET:"GET",POST:"POST"},hn={SIGNIN:"signin",SIGNOUT:"signout"},Te={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},xl={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},re={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},M=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(M||{}),he={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},pv={scopes:Rt},mv="jwk",gv={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Oh="msal.db",c_=1,l_=`${Oh}.keys`,Je={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},u_=[Je.Default,Je.Skip,Je.RefreshTokenAndNetwork];function Fl(n){return encodeURIComponent(co(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function zt(n){return d_(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function co(n){return d_(new TextEncoder().encode(n))}function d_(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}function st(n){return new TextDecoder().decode(zn(n))}function zn(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw E(pa)}let t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}var _P="RSASSA-PKCS1-v1_5",va="AES-GCM",p_="HKDF",vv="SHA-256",AP=2048,SP=new Uint8Array([1,0,1]),h_="0123456789abcdef",f_=new Uint32Array(1),Cv="raw",m_="encrypt",Ev="decrypt",bP="deriveKey",DP="crypto_subtle_undefined",Iv={name:_P,hash:vv,modulusLength:AP,publicExponent:SP};function g_(n){if(!window)throw E(jn);if(!window.crypto)throw E(bi);if(!n&&!window.crypto.subtle)throw E(bi,DP)}function wv(n,e,t){return f(this,null,function*(){e?.addQueueMeasurement(d.Sha256Digest,t);let o=new TextEncoder().encode(n);return window.crypto.subtle.digest(vv,o)})}function y_(n){return window.crypto.getRandomValues(n)}function yv(){return window.crypto.getRandomValues(f_),f_[0]}function $e(){let n=Date.now(),e=yv()*1024+(yv()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=yv();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=h_.charAt(t[a]>>>4),s+=h_.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}function v_(n,e){return f(this,null,function*(){return window.crypto.subtle.generateKey(Iv,n,e)})}function Ph(n){return f(this,null,function*(){return window.crypto.subtle.exportKey(mv,n)})}function C_(n,e,t){return f(this,null,function*(){return window.crypto.subtle.importKey(mv,n,Iv,e,t)})}function E_(n,e){return f(this,null,function*(){return window.crypto.subtle.sign(Iv,n,e)})}function Ca(){return f(this,null,function*(){let n=yield Tv(),t={alg:"dir",kty:"oct",k:zt(new Uint8Array(n))};return co(JSON.stringify(t))})}function MP(n){return f(this,null,function*(){let e=st(n),r=JSON.parse(e).k,o=zn(r);return window.crypto.subtle.importKey(Cv,o,va,!1,[Ev])})}function I_(n,e){return f(this,null,function*(){let t=e.split(".");if(t.length!==5)throw E(ga,"jwe_length");let r=yield MP(n).catch(()=>{throw E(ga,"import_key")});try{let o=new TextEncoder().encode(t[0]),i=zn(t[2]),s=zn(t[3]),a=zn(t[4]),c=a.byteLength*8,l=new Uint8Array(s.length+a.length);l.set(s),l.set(a,s.length);let u=yield window.crypto.subtle.decrypt({name:va,iv:i,tagLength:c,additionalData:o},r,l);return new TextDecoder().decode(u)}catch{throw E(ga,"decrypt")}})}function Tv(){return f(this,null,function*(){let n=yield window.crypto.subtle.generateKey({name:va,length:256},!0,[m_,Ev]);return window.crypto.subtle.exportKey(Cv,n)})}function _v(n){return f(this,null,function*(){return window.crypto.subtle.importKey(Cv,n,p_,!1,[bP])})}function w_(n,e,t){return f(this,null,function*(){return window.crypto.subtle.deriveKey({name:p_,salt:e,hash:vv,info:new TextEncoder().encode(t)},n,{name:va,length:256},!1,[m_,Ev])})}function T_(n,e,t){return f(this,null,function*(){let r=new TextEncoder().encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),i=yield w_(n,o,t),s=yield window.crypto.subtle.encrypt({name:va,iv:new Uint8Array(12)},i,r);return{data:zt(new Uint8Array(s)),nonce:zt(o)}})}function Av(n,e,t,r){return f(this,null,function*(){let o=zn(r),i=yield w_(n,zn(e),t),s=yield window.crypto.subtle.decrypt({name:va,iv:new Uint8Array(12)},i,o);return new TextDecoder().decode(s)})}function xh(n){return f(this,null,function*(){let e=yield wv(n),t=new Uint8Array(e);return zt(t)})}var lo="storage_not_supported",Fh="stubbed_public_client_application_called",Ea="in_mem_redirect_unavailable";var Lh={[lo]:"Given storage configuration option was not supported.",[Fh]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Ea]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},RP={storageNotSupportedError:{code:lo,desc:Lh[lo]},stubPcaInstanceCalled:{code:Fh,desc:Lh[Fh]},inMemRedirectUnavailable:{code:Ea,desc:Lh[Ea]}},Ni=class n extends V{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function Ia(n){return new Ni(n,Lh[n])}function Ll(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function Sv(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function Ul(){return window.parent!==window}function __(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${we.POPUP_NAME_PREFIX}.`)===0}function gt(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function bv(){let e=new z(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function A_(){if(z.hashContainsKnownProperties(window.location.hash)&&Ul())throw E(Xs)}function S_(n){if(Ul()&&!n)throw E(Zs)}function b_(){if(__())throw E(ea)}function Uh(){if(typeof window>"u")throw E(jn)}function Vh(n){if(!n)throw E(Gn)}function Vl(n){Uh(),A_(),b_(),Vh(n)}function Hh(n,e){if(Vl(n),S_(e.system.allowRedirectInIframe),e.cache.cacheLocation===pe.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Ia(Ea)}function Hl(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function Dv(){return $e()}var NP=Pe.addClientCapabilitiesToClaims;var Bl=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,o)=>{setTimeout(()=>{o(E(Mi,"failed_to_redirect"))},t.timeout)})}};var jh=class{sendGetRequestAsync(e,t){return f(this,null,function*(){let r,o={},i=0,s=D_(t);try{r=yield fetch(e,{method:fv.GET,headers:s})}catch(a){throw wi(E(window.navigator.onLine?ia:Er),void 0,void 0,a)}o=M_(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch(a){throw wi(E(Di),i,o,a)}})}sendPostRequestAsync(e,t){return f(this,null,function*(){let r=t&&t.body||"",o=D_(t),i,s=0,a={};try{i=yield fetch(e,{method:fv.POST,headers:o,body:r})}catch(c){throw wi(E(window.navigator.onLine?oa:Er),void 0,void 0,c)}a=M_(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch(c){throw wi(E(Di),s,a,c)}})}};function D_(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch(e){throw wi(E(Nh),void 0,void 0,e)}}function M_(n){try{let e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw E(kh)}}var kP=6e4,$h=1e4,OP=3e4,Mv=2e3;function R_({auth:n,cache:e,system:t,telemetry:r},o){let i={clientId:v.EMPTY_STRING,authority:`${v.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:v.EMPTY_STRING,authorityMetadata:v.EMPTY_STRING,redirectUri:typeof window<"u"?gt():"",postLogoutRedirectUri:v.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:me.AAD,OIDCOptions:{serverResponseType:Nn.FRAGMENT,defaultScopes:[v.OPENID_SCOPE,v.PROFILE_SCOPE,v.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Yr.None,tenant:v.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:pe.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:pe.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===pe.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:le.Info,piiLoggingEnabled:!1},c=S(p({},oh),{loggerOptions:a,networkClient:o?new jh:uv,navigationClient:new Bl,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||kP,iframeHashTimeout:t?.loadFrameTimeout||$h,navigateFrameWait:0,redirectNavigationTimeout:OP,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||Mv,pollIntervalMilliseconds:we.DEFAULT_POLL_INTERVAL_MS}),l=S(p(p({},c),t),{loggerOptions:t?.loggerOptions||a}),u={application:{appName:v.EMPTY_STRING,appVersion:v.EMPTY_STRING},client:new fr};if(n?.protocolMode!==me.OIDC&&n?.OIDCOptions&&new ht(l.loggerOptions).warning(JSON.stringify(Z(ft.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode===me.OIDC&&l?.allowPlatformBroker)throw Z(ft.cannotAllowPlatformBroker);return{auth:S(p(p({},i),n),{OIDCOptions:p(p({},i.OIDCOptions),n?.OIDCOptions)}),cache:p(p({},s),e),system:l,telemetry:p(p({},u),r)}}var N_="@azure/msal-browser",kt="4.22.1";var Me="msal",Gh="browser",zh="-";var P_=`${Me}.${Gh}.log.level`,x_=`${Me}.${Gh}.log.pii`,A3=`${Me}.${Gh}.performance.enabled`,F_=`${Me}.${Gh}.platform.auth.dom`,Rv=`${Me}.version`,k_="account.keys",O_="token.keys";function Ot(n=1){return n<1?`${Me}.${k_}`:`${Me}.${n}.${k_}`}function qn(n,e=1){return e<1?`${Me}.${O_}.${n}`:`${Me}.${e}.${O_}.${n}`}var qh=class n{static loggerCallback(e,t){switch(e){case le.Error:console.error(t);return;case le.Info:console.info(t);return;case le.Verbose:console.debug(t);return;case le.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=R_(e,this.browserEnvironment);let t;try{t=window[pe.SessionStorage]}catch{}let r=t?.getItem(P_),o=t?.getItem(x_)?.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s=p({},this.config.system.loggerOptions),a=r&&Object.keys(le).includes(r)?le[r]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new ht(s,N_,kt),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var Kh=(()=>{class n extends qh{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return f(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();var Wh=class{constructor(){this.dbName=Oh,this.version=c_,this.tableName=l_,this.dbOpen=!1}open(){return f(this,null,function*(){return new Promise((e,t)=>{let r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{let i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(E(so)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return f(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(E($n));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}setItem(e,t){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(E($n));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})})}removeItem(e){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(E($n));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}getKeys(){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(E($n));let i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})})}containsKey(e){return f(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(E($n));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}deleteDatabase(){return f(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let r=window.indexedDB.deleteDatabase(Oh),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})})}};var wr=class{constructor(){this.cache=new Map}initialize(){return f(this,null,function*(){})}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}setUserData(e,t){return f(this,null,function*(){this.setItem(e,t)})}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}};var Qh=class{constructor(e){this.inMemoryCache=new wr,this.indexedDBCache=new Wh,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Ri&&e.errorCode===so)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return f(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}setItem(e,t){return f(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}})}removeItem(e){return f(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return f(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return f(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return f(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var wa=(()=>{class n{constructor(t,r,o){this.logger=t,g_(o??!1),this.cache=new Qh(this.logger),this.performanceClient=r}createNewGuid(){return $e()}base64Encode(t){return co(t)}base64Decode(t){return st(t)}base64UrlEncode(t){return Fl(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return f(this,null,function*(){let r=this.performanceClient?.startMeasurement(d.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=yield v_(n.EXTRACTABLE,n.POP_KEY_USAGES),i=yield Ph(o.publicKey),s={e:i.e,kty:i.kty,n:i.n},a=L_(s),c=yield this.hashString(a),l=yield Ph(o.privateKey),u=yield C_(l,!1,["sign"]);return yield this.cache.setItem(c,{privateKey:u,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),r&&r.end({success:!0}),c})}removeTokenBindingKey(t){return f(this,null,function*(){if(yield this.cache.removeItem(t),yield this.cache.containsKey(t))throw C(Be.bindingKeyNotRemoved)})}clearKeystore(){return f(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,r,o,i){return f(this,null,function*(){let s=this.performanceClient?.startMeasurement(d.CryptoOptsSignJwt,i),a=yield this.cache.getItem(r);if(!a)throw E(io);let c=yield Ph(a.publicKey),l=L_(c),u=Fl(JSON.stringify({kid:r})),h=Ol.getShrHeaderString(S(p({},o?.header),{alg:c.alg,kid:u})),m=Fl(h);t.cnf={jwk:JSON.parse(l)};let g=Fl(JSON.stringify(t)),w=`${m}.${g}`,N=new TextEncoder().encode(w),L=yield E_(a.privateKey,N),ge=zt(new Uint8Array(L)),ee=`${w}.${ge}`;return s&&s.end({success:!0}),ee})}hashString(t){return f(this,null,function*(){return xh(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function L_(n){return JSON.stringify(n,Object.keys(n).sort())}var PP=24*60*60*1e3,Yh={Lax:"Lax",None:"None"},Ta=class{initialize(){return Promise.resolve()}getItem(e){let t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}getUserData(){throw C(Be.methodNotImplemented)}setItem(e,t,r,o=!0,i=Yh.Lax){let s=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${i};`;if(r){let a=xP(r);s+=`expires=${a};`}(o||i===Yh.None)&&(s+="Secure;"),document.cookie=s}setUserData(){return f(this,null,function*(){return Promise.reject(C(Be.methodNotImplemented))})}removeItem(e){this.setItem(e,"",-1)}getKeys(){let e=document.cookie.split(";"),t=[];return e.forEach(r=>{let o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}};function xP(n){let e=new Date;return new Date(e.getTime()+n*PP).toUTCString()}function ki(n,e){let t=n.getItem(Ot(e));return t?JSON.parse(t):[]}function Oi(n,e,t){let r=e.getItem(qn(n,t));if(r){let o=JSON.parse(r);if(o&&o.hasOwnProperty("idToken")&&o.hasOwnProperty("accessToken")&&o.hasOwnProperty("refreshToken"))return o}return{idToken:[],accessToken:[],refreshToken:[]}}function jl(n){return n.hasOwnProperty("id")&&n.hasOwnProperty("nonce")&&n.hasOwnProperty("data")}var U_="msal.cache.encryption",FP="msal.broadcast.cache",Jh=class{constructor(e,t,r){if(!window.localStorage)throw Ia(lo);this.memoryStorage=new wr,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel(FP)}initialize(e){return f(this,null,function*(){let t=new Ta,r=t.getItem(U_),o={key:"",id:""};if(r)try{o=JSON.parse(r)}catch{}if(o.key&&o.id){let i=Ie(zn,d.Base64Decode,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:yield y(_v,d.GenerateHKDF,this.logger,this.performanceClient,e)(i)}}else{let i=$e(),s=yield y(Tv,d.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=Ie(zt,d.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(s));this.encryptionCookie={id:i,key:yield y(_v,d.GenerateHKDF,this.logger,this.performanceClient,e)(s)};let c={id:i,key:a};t.setItem(U_,JSON.stringify(c),0,!0,Yh.None)}yield y(this.importExistingCache.bind(this),d.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0})}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw E(Gn);return this.memoryStorage.getItem(e)}decryptData(e,t,r){return f(this,null,function*(){if(!this.initialized||!this.encryptionCookie)throw E(Gn);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;let o=yield y(Av,d.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!o)return null;try{return JSON.parse(o)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}})}setItem(e,t){window.localStorage.setItem(e,t)}setUserData(e,t,r,o){return f(this,null,function*(){if(!this.initialized||!this.encryptionCookie)throw E(Gn);let{data:i,nonce:s}=yield y(T_,d.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:s,data:i,lastUpdatedAt:o};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),ki(this).forEach(r=>this.removeItem(r));let t=Oi(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Me)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}importExistingCache(e){return f(this,null,function*(){if(!this.encryptionCookie)return;let t=ki(this);t=yield this.importArray(t,e),t.length?this.setItem(Ot(),JSON.stringify(t)):this.removeItem(Ot());let r=Oi(this.clientId,this);r.idToken=yield this.importArray(r.idToken,e),r.accessToken=yield this.importArray(r.accessToken,e),r.refreshToken=yield this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(qn(this.clientId),JSON.stringify(r)):this.removeItem(qn(this.clientId))})}getItemFromEncryptedCache(e,t){return f(this,null,function*(){if(!this.encryptionCookie)return null;let r=this.getItem(e);if(!r)return null;let o;try{o=JSON.parse(r)}catch{return null}return jl(o)?o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):y(Av,d.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),o)})}importArray(e,t){return f(this,null,function*(){let r=[],o=[];return e.forEach(i=>{let s=this.getItemFromEncryptedCache(i,t).then(a=>{a?(this.memoryStorage.setItem(i,a),r.push(i)):this.removeItem(i)});o.push(s)}),yield Promise.all(o),r})}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");let t=this.performanceClient.startMeasurement(d.LocalStorageUpdated);t.add({isBackground:!0});let{key:r,value:o,context:i}=e.data;if(!r){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(i&&i!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),t.end({success:!1,errorCode:"contextMismatch"});return}o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}};var Zh=class{constructor(){if(!window.sessionStorage)throw Ia(lo)}initialize(){return f(this,null,function*(){})}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}setUserData(e,t){return f(this,null,function*(){this.setItem(e,t)})}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}};var D={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function Nv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var _a=class n extends pi{constructor(e,t,r,o,i,s,a){super(e,r,o,i,a),this.cacheConfig=t,this.logger=o,this.internalStorage=new wr,this.browserStorage=H_(e,t.cacheLocation,o,i),this.temporaryCacheStorage=H_(e,t.temporaryCacheLocation,o,i),this.cookieStorage=new Ta,this.eventHandler=s}initialize(e){return f(this,null,function*(){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),yield this.browserStorage.initialize(e),yield this.migrateExistingCache(e),this.trackVersionChanges(e)})}migrateExistingCache(e){return f(this,null,function*(){let t=ki(this.browserStorage,0),r=Oi(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:t.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);let o=ki(this.browserStorage,1),i=Oi(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:o.length,currAccessCount:i.accessToken.length,currIdCount:i.idToken.length,currRefreshCount:i.refreshToken.length},e),yield Promise.all([this.updateV0ToCurrent(1,t,o,e),this.updateV0ToCurrent(1,r.idToken,i.idToken,e),this.updateV0ToCurrent(1,r.accessToken,i.accessToken,e),this.updateV0ToCurrent(1,r.refreshToken,i.refreshToken,e)]),t.length>0?this.browserStorage.setItem(Ot(0),JSON.stringify(t)):this.browserStorage.removeItem(Ot(0)),o.length>0?this.browserStorage.setItem(Ot(1),JSON.stringify(o)):this.browserStorage.removeItem(Ot(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(i,e,1)})}updateV0ToCurrent(e,t,r,o){return f(this,null,function*(){let i=[];for(let s of[...t]){let a=this.browserStorage.getItem(s),c=this.validateAndParseJson(a||"");if(!c){Nv(t,s);continue}c.lastUpdatedAt||(c.lastUpdatedAt=Date.now().toString(),this.setItem(s,JSON.stringify(c),o));let l=jl(c)?yield this.browserStorage.decryptData(s,c,o):c,u;if(l&&(_e.isAccessTokenEntity(l)||_e.isRefreshTokenEntity(l))&&(u=l.expiresOn),!l||je.isCacheExpired(c.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||u&&je.isTokenExpired(u,Oc)){this.browserStorage.removeItem(s),Nv(t,s),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},o);continue}if(this.cacheConfig.cacheLocation!==pe.LocalStorage||jl(c)){let h=`${Me}.${e}${zh}${s}`,m=this.browserStorage.getItem(h);if(m){let g=this.validateAndParseJson(m);if(Number(c.lastUpdatedAt)>Number(g.lastUpdatedAt)){i.push(this.setUserData(h,JSON.stringify(l),o,c.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},o)}));continue}}else{i.push(this.setUserData(h,JSON.stringify(l),o,c.lastUpdatedAt).then(()=>{r.push(h),this.performanceClient.incrementFields({upgradedCacheCount:1},o)}));continue}}}return Promise.all(i)})}trackVersionChanges(e){let t=this.browserStorage.getItem(Rv);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==kt&&this.setItem(Rv,kt,e)}validateAndParseJson(e){if(!e)return null;try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}setItem(e,t,r){let o=0,i=[],s=20;for(let a=0;a<=s;a++)try{this.browserStorage.setItem(e,t),a>0&&(a<=o?this.removeAccessTokenKeys(i.slice(0,a),r,0):(this.removeAccessTokenKeys(i.slice(0,o),r,0),this.removeAccessTokenKeys(i.slice(o,a),r)));break}catch(c){let l=Fs(c);if(l.errorCode===hl.cacheQuotaExceeded&&a<s){if(!i.length){let u=e===qn(this.clientId,0)?JSON.parse(t).accessToken:this.getTokenKeys(0).accessToken,h=e===qn(this.clientId)?JSON.parse(t).accessToken:this.getTokenKeys().accessToken;i=[...u,...h],o=u.length}if(i.length<=a)throw l;this.removeAccessToken(i[a],r,!1)}else throw l}}setUserData(e,t,r,o){return f(this,null,function*(){let i=0,s=[],a=20;for(let c=0;c<=a;c++)try{yield y(this.browserStorage.setUserData.bind(this.browserStorage),d.SetUserData,this.logger,this.performanceClient)(e,t,r,o),c>0&&(c<=i?this.removeAccessTokenKeys(s.slice(0,c),r,0):(this.removeAccessTokenKeys(s.slice(0,i),r,0),this.removeAccessTokenKeys(s.slice(i,c),r)));break}catch(l){let u=Fs(l);if(u.errorCode===hl.cacheQuotaExceeded&&c<a){if(!s.length){let h=this.getTokenKeys(0).accessToken,m=this.getTokenKeys().accessToken;s=[...h,...m],i=h.length}if(s.length<=c)throw u;this.removeAccessToken(s[c],r,!1)}else throw u}})}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");let r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;let o=this.validateAndParseJson(r);return!o||!et.isAccountEntity(o)?null:pi.toObject(new et,o)}setAccount(e,t){return f(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccount called");let r=this.generateAccountKey(e.getAccountInfo()),o=Date.now().toString();e.lastUpdatedAt=o,yield this.setUserData(r,JSON.stringify(e),t,o);let i=this.addAccountKeyToMap(r,t);this.cacheConfig.cacheLocation===pe.LocalStorage&&i&&this.eventHandler.emitEvent(D.ACCOUNT_ADDED,void 0,e.getAccountInfo())})}getAccountKeys(){return ki(this.browserStorage)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Ot(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let r=this.getAccountKeys(),o=r.indexOf(e);if(o>-1){if(r.splice(o,1),r.length===0){this.removeItem(Ot());return}else this.setItem(Ot(),JSON.stringify(r),t);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){let r=this.getActiveAccount(t);r?.homeAccountId===e.homeAccountId&&r?.environment===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(o=>{o.includes(e.homeAccountId)&&o.includes(e.environment)&&this.browserStorage.removeItem(o)}),this.cacheConfig.cacheLocation===pe.LocalStorage&&this.eventHandler.emitEvent(D.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);let r=this.getTokenKeys(),o=r.idToken.indexOf(e);o>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(o,1),this.setTokenKeys(r,t))}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,r=1){this.logger.trace("removeAccessTokenKey called");let o=this.getTokenKeys(r),i=0;if(e.forEach(s=>{let a=o.accessToken.indexOf(s);a>-1&&(o.accessToken.splice(a,1),i++)}),i>0){this.logger.info(`removed ${i} accessToken keys from tokenKeys map`),this.setTokenKeys(o,t,r);return}}removeRefreshToken(e,t){super.removeRefreshToken(e,t);let r=this.getTokenKeys(),o=r.refreshToken.indexOf(e);o>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(o,1),this.setTokenKeys(r,t))}getTokenKeys(e=1){return Oi(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,r=1){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(qn(this.clientId,r));return}else this.setItem(qn(this.clientId,r),JSON.stringify(e),t)}getIdTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;let o=this.validateAndParseJson(r);return!o||!_e.isIdTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o)}setIdTokenCredential(e,t){return f(this,null,function*(){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let r=this.generateCredentialKey(e),o=Date.now().toString();e.lastUpdatedAt=o,yield this.setUserData(r,JSON.stringify(e),t,o);let i=this.getTokenKeys();i.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),i.idToken.push(r),this.setTokenKeys(i,t))})}getAccessTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;let o=this.validateAndParseJson(r);return!o||!_e.isAccessTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o)}setAccessTokenCredential(e,t){return f(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let r=this.generateCredentialKey(e),o=Date.now().toString();e.lastUpdatedAt=o,yield this.setUserData(r,JSON.stringify(e),t,o);let i=this.getTokenKeys(),s=i.accessToken.indexOf(r);s!==-1&&i.accessToken.splice(s,1),this.logger.trace(`access token ${s===-1?"added to":"updated in"} map`),i.accessToken.push(r),this.setTokenKeys(i,t)})}getRefreshTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;let o=this.validateAndParseJson(r);return!o||!_e.isRefreshTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o)}setRefreshTokenCredential(e,t){return f(this,null,function*(){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let r=this.generateCredentialKey(e),o=Date.now().toString();e.lastUpdatedAt=o,yield this.setUserData(r,JSON.stringify(e),t,o);let i=this.getTokenKeys();i.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),i.refreshToken.push(r),this.setTokenKeys(i,t))})}getAppMetadata(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!_e.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");let r=_e.generateAppMetadataKey(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!_e.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return r&&_e.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(xl.WRAPPER_SKU,e),this.internalStorage.setItem(xl.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(xl.WRAPPER_SKU)||v.EMPTY_STRING,t=this.internalStorage.getItem(xl.WRAPPER_VER)||v.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){let t=this.generateCacheKey(Qd.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;let o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){let r=this.generateCacheKey(Qd.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");let o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:je.nowSeconds().toString()};this.setItem(r,JSON.stringify(o),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(D.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!_e.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){let r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}let o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===pe.LocalStorage){let i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){let o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(t.indexOf(Me)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(t.indexOf(Me)!==-1||t.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(d.ClearTokensAndKeysWithClaims,e);let t=this.getTokenKeys(),r=0;t.accessToken.forEach(o=>{let i=this.getAccessTokenCredential(o,e);i?.requestedClaimsHash&&o.includes(i.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(o,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return de.startsWith(e,Me)?e:`${Me}.${this.clientId}.${e}`}generateCredentialKey(e){let t=e.credentialType===De.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==K.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${Me}.${1}`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(zh).toLowerCase()}generateAccountKey(e){let t=e.homeAccountId.split(".")[1];return[`${Me}.${1}`,e.homeAccountId,e.environment,t||e.tenantId||""].join(zh).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Te.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Te.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Te.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Te.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Te.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");let r=co(JSON.stringify(e));if(this.setTemporaryCache(Te.REQUEST_PARAMS,r,!0),t){let o=co(t);this.setTemporaryCache(Te.VERIFIER,o,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");let e=this.getTemporaryCache(Te.REQUEST_PARAMS,!0);if(!e)throw E(na);let t=this.getTemporaryCache(Te.VERIFIER,!0),r,o="";try{r=JSON.parse(st(e)),t&&(o=st(t))}catch(i){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${i}`),E(ra)}return[r,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(Te.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${Me}.${Te.INTERACTION_STATUS_KEY}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),Ll(window),null}}setInteractionInProgress(e,t=hn.SIGNIN){let r=`${Me}.${Te.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw E(Ws);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}hydrateCache(e,t){return f(this,null,function*(){let r=_e.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),o;t.claims&&(o=yield this.cryptoImpl.hashString(t.claims));let i=_e.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?je.toSecondsFromDate(e.expiresOn):0,e.extExpiresOn?je.toSecondsFromDate(e.extExpiresOn):0,st,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s,e.correlationId)})}saveCacheRecord(e,t,r){return f(this,null,function*(){try{yield Of(n.prototype,this,"saveCacheRecord").call(this,e,t,r)}catch(o){if(o instanceof Xr&&this.performanceClient&&t)try{let i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},t)}catch{}throw o}})}};function H_(n,e,t,r){try{switch(e){case pe.LocalStorage:return new Jh(n,t,r);case pe.SessionStorage:return new Zh;case pe.MemoryStorage:default:break}}catch(o){t.error(o)}return new wr}var B_=(n,e,t,r)=>{let o={cacheLocation:pe.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:pe.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new _a(n,o,Qr,e,t,r)};function j_(n,e,t,r,o){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(o||{},r):[]}function $_(n,e,t,r){let o=t.getAccountInfoFilteredBy(n,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}function G_(n,e,t,r){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let o=t.getAccountInfoFilteredBy({username:n},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function z_(n,e,t,r){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let o=t.getAccountInfoFilteredBy({homeAccountId:n},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function q_(n,e,t,r){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let o=t.getAccountInfoFilteredBy({localAccountId:n},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function K_(n,e,t){e.setActiveAccount(n,t)}function W_(n,e){return n.getActiveAccount(e)}var LP="msal.broadcast.event",Xh=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ht({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(LP)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){let o=r||Dv();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){let i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case D.ACCOUNT_ADDED:case D.ACCOUNT_REMOVED:case D.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(i);break;default:this.invokeCallbacks(i);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],o)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){let t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}};var Aa=class{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.platformAuthProvider=c,this.correlationId=l||$e(),this.logger=o.clone(we.MSAL_SKU,kt,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e,t){return f(this,null,function*(){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return z.getAbsoluteUrl(t,gt())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Ai(r,this.browserStorage)}getDiscoveredAuthority(e){return f(this,null,function*(){let{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r?.length?r==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(z.getDomainFromUrl(i),t.environment):i,c=Gt.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=yield y(gh.createDiscoveredInstance,d.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw Z(ft.authorityMismatch);return l})}};function $l(n,e,t,r){return f(this,null,function*(){t.addQueueMeasurement(d.InitializeBaseRequest,n.correlationId);let o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s=S(p({},n),{correlationId:n.correlationId,authority:o,scopes:i});if(!s.authenticationScheme)s.authenticationScheme=K.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===K.SSH){if(!n.sshJwk)throw Z(ft.missingSshJwk);if(!n.sshKid)throw Z(ft.missingSshKid)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!de.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield xh(n.claims)),s})}function Q_(n,e,t,r,o){return f(this,null,function*(){r.addQueueMeasurement(d.InitializeSilentRequest,n.correlationId);let i=yield y($l,d.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return S(p(p({},n),i),{account:e,forceRefresh:n.forceRefresh||!1})})}function ef(n,e){let t,r=n.httpMethod;if(e===me.EAR){if(t=r||$t.POST,t!==$t.POST)throw Z(ft.invalidRequestMethodForEAR)}else t=r||$t.GET;if(n.authorizePostBodyParameters&&t!==$t.POST)throw Z(ft.invalidAuthorizePostBodyParameters);return t}var wt=class extends Aa{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=p({correlationId:this.correlationId||$e()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=z.getAbsoluteUrl(e.postLogoutRedirectUri,gt())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=z.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,gt())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=z.getAbsoluteUrl(gt(),gt())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new _i(t,this.performanceClient)})}getClientConfiguration(e){return f(this,null,function*(){let{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:we.MSAL_SKU,version:kt,cpu:v.EMPTY_STRING,os:v.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=ln.setRequestState(this.browserCrypto,e&&e.state||v.EMPTY_STRING,o),s=yield y($l,d.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(S(p({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=S(p({},s),{redirectUri:r,state:i,nonce:e.nonce||$e(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),c=S(p({},a),{httpMethod:ef(a,this.config.auth.protocolMode)});if(e.loginHint||e.sid)return c;let l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),c.account=l),c})}};function Y_(n,e){if(!e)return null;try{return ln.parseRequestState(n,e).libraryState.meta}catch{throw C(Be.invalidState)}}function xi(n,e,t){let r=xn.getDeserializedResponse(n);if(!r)throw xn.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),E(zs)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),E(Gs));return r}function J_(n,e,t){if(!n.state)throw E(oo);let r=Y_(e,n.state);if(!r)throw E(qs);if(r.interactionType!==t)throw E(Ks)}var Sa=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.HandleCodeResponse,t.correlationId);let r;try{r=Vn.getAuthorizationCodePayload(e,t.state)}catch(o){throw o instanceof Et&&o.subError===dn?E(dn):o}return y(this.handleCodeResponseFromServer.bind(this),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)})}handleCodeResponseFromServer(e,t,r=!0){return f(this,null,function*(){if(this.performanceClient.addQueueMeasurement(d.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield y(this.authModule.updateAuthority.bind(this.authModule),d.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return yield y(this.authModule.acquireToken.bind(this.authModule),d.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:it.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:it.UPN}:null}};var Z_="ContentError",tf="user_switch";var X_="USER_INTERACTION_REQUIRED",eA="USER_CANCEL",tA="NO_NETWORK",nA="DISABLED",rA="ACCOUNT_UNAVAILABLE",oA="UX_NOT_ALLOWED";var UP=-2147186943,VP={[tf]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},qt=class n extends V{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=r}};function uo(n){if(n.ext&&n.ext.status&&n.ext.status===nA||n.ext&&n.ext.error&&n.ext.error===UP)return!0;switch(n.errorCode){case Z_:return!0;default:return!1}}function Fi(n,e,t){if(t&&t.status)switch(t.status){case rA:return Ti(Un.nativeAccountUnavailable);case X_:return new Ye(n,e);case eA:return E(dn);case tA:return E(Er);case oA:return Ti(Un.uxNotAllowed)}return new qt(n,VP[n]||e,t)}var ba=class extends wt{acquireToken(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(re.acquireTokenSilent_silentFlow),r=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new kl(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(yield y(o.acquireCachedToken.bind(o),d.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof Ri&&i.errorCode===io&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t?.account)}};var ho=class extends Aa{constructor(e,t,r,o,i,s,a,c,l,u,h,m){super(e,t,r,o,i,s,c,l,m),this.apiId=a,this.accountId=u,this.platformAuthProvider=l,this.nativeStorageManager=h,this.silentCacheClient=new ba(e,this.nativeStorageManager,r,o,i,s,c,l,m);let g=this.platformAuthProvider.getExtensionName();this.skus=Ai.makeExtraSkuString({libraryName:we.MSAL_SKU,libraryVersion:kt,extensionName:g,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=S(p({},e.extraParameters),{[pr.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e,t){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let r=this.performanceClient.startMeasurement(d.NativeInteractionClientAcquireToken,this.correlationId),o=je.nowSeconds(),i=this.initializeServerTelemetryManager(this.apiId);try{let s=yield this.initializeNativeRequest(e);try{let c=yield this.acquireTokensFromCache(this.accountId,s);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch(c){if(t===Je.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),c;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let a=yield this.platformAuthProvider.sendMessage(s);return yield this.handleNativeResponse(a,s,o).then(c=>(r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),i.clearNativeBrokerErrorCode(),c)).catch(c=>{throw r.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError}),c})}catch(s){throw s instanceof qt&&i.setNativeBrokerErrorCode(s.errorCode),r.end({success:!1}),s}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Ee.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return f(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),C(Be.noAccountFound);let r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw C(Be.noAccountFound);try{let o=this.createSilentCacheRequest(t,r),i=yield this.silentCacheClient.acquireToken(o),s=S(p({},r),{idTokenClaims:i?.idTokenClaims,idToken:i?.idToken});return S(p({},i),{account:s})}catch(o){throw o}})}acquireTokenRedirect(e,t){return f(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let r=pn(e,[]);delete r.onRedirectNavigate;let o=yield this.initializeNativeRequest(r);try{yield this.platformAuthProvider.sendMessage(o)}catch(a){if(a instanceof qt&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),uo(a)))throw a}this.browserStorage.setTemporaryCache(Te.NATIVE_REQUEST,JSON.stringify(o),!0);let i={apiId:re.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(s,i)})}handleRedirectPromise(e,t){return f(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let a=r,{prompt:o}=a,i=pn(a,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Te.NATIVE_REQUEST));let s=je.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let c=yield this.platformAuthProvider.sendMessage(i),l=yield this.handleNativeResponse(c,i,s);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),l}catch(c){throw c}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){return f(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=xs.extractTokenClaims(e.id_token,st),i=this.createHomeAccountIdentifier(e,o),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId)?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(i!==s&&e.account.id!==t.accountId)throw Fi(tf);let a=yield this.getDiscoveredAuthority({requestAuthority:t.authority}),c=$s(this.browserStorage,a,i,st,this.correlationId,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);let l=yield this.generateAuthenticationResult(e,t,o,c,a.canonicalAuthority,r);return yield this.cacheAccount(c,this.correlationId),yield this.cacheNativeTokens(e,t,i,o,e.access_token,l.tenantId,r),l})}createHomeAccountIdentifier(e,t){return et.generateHomeAccountId(e.client_info||v.EMPTY_STRING,pt.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?Ee.fromString(t):Ee.fromString(e)}generatePopAccessToken(e,t){return f(this,null,function*(){if(t.tokenType===K.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let r=new It(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw C(Be.keyIdMissing);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token})}generateAuthenticationResult(e,t,r,o,i,s){return f(this,null,function*(){let a=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(t.scope,e.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||v.EMPTY_STRING,h=l.TenantId||r.tid||v.EMPTY_STRING,m=fi(o.getAccountInfo(),void 0,r,e.id_token);m.nativeAccountId!==e.account.id&&(m.nativeAccountId=e.account.id);let g=yield this.generatePopAccessToken(e,t),w=t.tokenType===K.POP?K.POP:K.BEARER;return{authority:i,uniqueId:u,tenantId:h,scopes:c.asArray(),account:m,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:je.toDateFromSeconds(s+e.expires_in),tokenType:w,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e,t){return f(this,null,function*(){yield this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),t)})}cacheNativeTokens(e,t,r,o,i,s,a){let c=_e.createIdTokenEntity(r,t.authority,e.id_token||"",t.clientId,o.tid||""),l=t.tokenType===K.POP?v.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,h=this.generateScopes(e.scope,t.scope),m=_e.createAccessTokenEntity(r,t.authority,i,t.clientId,o.tid||s,h.printScopes(),u,0,st,void 0,t.tokenType,void 0,t.keyId),g={idToken:c,accessToken:m};return this.nativeStorageManager.saveCacheRecord(g,this.correlationId,t.storeInCache)}getExpiresInValue(e,t){return e===K.POP?v.SHR_NONCE_VALIDITY:(typeof t=="string"?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return f(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=yield this.getCanonicalAuthority(e),a=e,{scopes:r}=a,o=pn(a,["scopes"]),i=new Ee(r||[]);i.appendScopes(Rt);let s=S(p({},o),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:p(p({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(s.signPopToken&&e.popKid)throw E(ma);if(this.handleExtraBrokerParams(s),s.extraParameters=s.extraParameters||{},s.extraParameters.telemetry=mt.MATS_TELEMETRY,e.authenticationScheme===K.POP){let c={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},l=new It(this.browserCrypto),u;if(s.keyId)u=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:s.keyId})),s.signPopToken=!1;else{let h=yield y(l.generateCnf.bind(l),d.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(c,this.logger);u=h.reqCnfString,s.keyId=h.kid,s.signPopToken=!0}s.reqCnf=u}return this.addRequestSKUs(s),s})}getCanonicalAuthority(e){return f(this,null,function*(){let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));let r=new z(t);return r.validateAsUri(),r})}getPrompt(e){switch(this.apiId){case re.ssoSilent:case re.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),be.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case be.NONE:case be.CONSENT:case be.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),E(fa)}}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(pr.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(pr.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(pr.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let r="",o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[pr.BROKER_REDIRECT_URI],r=e.extraParameters[pr.CLIENT_ID]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},this.correlationId)}};function kv(n,e,t,r,o){return f(this,null,function*(){let i=Vn.getStandardAuthorizeRequestParameters(S(p({},n.auth),{authority:e}),t,r,o);if(Pe.addLibraryInfo(i,{sku:we.MSAL_SKU,version:kt,os:"",cpu:""}),n.auth.protocolMode!==me.OIDC&&Pe.addApplicationTelemetry(i,n.telemetry.application),t.platformBroker&&(Pe.addNativeBroker(i),o.addFields({isPlatformAuthorizeRequest:!0},t.correlationId),t.authenticationScheme===K.POP)){let s=new wa(r,o),a=new It(s),c;t.popKid?c=s.encodeKid(t.popKid):c=(yield y(a.generateCnf.bind(a),d.PopTokenGenerateCnf,r,o,t.correlationId)(t,r)).reqCnfString,Pe.addPopToken(i,c)}return Pe.instrumentBrokerParams(i,t.correlationId,o),i})}function Da(n,e,t,r,o){return f(this,null,function*(){if(!t.codeChallenge)throw Z(ft.pkceParamsMissing);let i=yield y(kv,d.GetStandardParams,r,o,t.correlationId)(n,e,t,r,o);return Pe.addResponseType(i,Rc.CODE),Pe.addCodeChallengeParams(i,t.codeChallenge,v.S256_CODE_CHALLENGE_METHOD),Pe.addExtraQueryParameters(i,t.extraQueryParameters||{}),Vn.getAuthorizeUrl(e,i,n.auth.encodeExtraQueryParams,t.extraQueryParameters)})}function Ma(n,e,t,r,o,i){return f(this,null,function*(){if(!r.earJwk)throw E(Pl);let s=yield kv(e,t,r,o,i);Pe.addResponseType(s,Rc.IDTOKEN_TOKEN_REFRESHTOKEN),Pe.addEARParameters(s,r.earJwk);let a=new Map;Pe.addExtraQueryParameters(a,r.extraQueryParameters||{});let c=Vn.getAuthorizeUrl(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return iA(n,c,s)})}function Ra(n,e,t,r,o,i){return f(this,null,function*(){let s=yield kv(e,t,r,o,i);Pe.addResponseType(s,Rc.CODE),Pe.addCodeChallengeParams(s,r.codeChallenge,r.codeChallengeMethod||v.S256_CODE_CHALLENGE_METHOD),Pe.addPostBodyParameters(s,r.authorizePostBodyParameters||{});let a=new Map;Pe.addExtraQueryParameters(a,r.extraQueryParameters||{});let c=Vn.getAuthorizeUrl(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return iA(n,c,s)})}function iA(n,e,t){let r=n.createElement("form");return r.method="post",r.action=e,t.forEach((o,i)=>{let s=n.createElement("input");s.hidden=!0,s.name=i,s.value=o,r.appendChild(s)}),n.body.appendChild(r),r}function sA(n,e,t,r,o,i,s,a,c,l){return f(this,null,function*(){if(a.verbose("Account id found, calling WAM for token"),!l)throw E(ao);let u=new wa(a,c),h=new ho(r,o,u,a,s,r.system.navigationClient,t,c,l,e,i,n.correlationId),{userRequestState:m}=ln.parseRequestState(u,n.state);return y(h.acquireToken.bind(h),d.NativeInteractionClientAcquireToken,a,c,n.correlationId)(S(p({},n),{state:m,prompt:void 0}))})}function Li(n,e,t,r,o,i,s,a,c,l,u,h){return f(this,null,function*(){if(Cr.removeThrottle(s,o.auth.clientId,n),e.accountId)return y(sA,d.HandleResponsePlatformBroker,l,u,n.correlationId)(n,e.accountId,r,o,s,a,c,l,u,h);let m=S(p({},n),{code:e.code||"",codeVerifier:t}),g=new Sa(i,s,m,l,u);return yield y(g.handleCodeResponse.bind(g),d.HandleCodeResponse,l,u,n.correlationId)(e,n)})}function Na(n,e,t,r,o,i,s,a,c,l,u){return f(this,null,function*(){if(Cr.removeThrottle(i,r.auth.clientId,n),Vn.validateAuthorizationResponse(e,n.state),!e.ear_jwe)throw E(Ah);if(!n.earJwk)throw E(Pl);let h=JSON.parse(yield y(I_,d.DecryptEarResponse,c,l,n.correlationId)(n.earJwk,e.ear_jwe));if(h.accountId)return y(sA,d.HandleResponsePlatformBroker,c,l,n.correlationId)(n,h.accountId,t,r,i,s,a,c,l,u);let m=new un(r.auth.clientId,i,new wa(c,l),c,null,null,l);m.validateTokenResponse(h);let g={code:"",state:n.state,nonce:n.nonce,client_info:h.client_info,cloud_graph_host_name:h.cloud_graph_host_name,cloud_instance_host_name:h.cloud_instance_host_name,cloud_instance_name:h.cloud_instance_name,msgraph_host:h.msgraph_host};return yield y(m.handleServerTokenResponse.bind(m),d.HandleServerTokenResponse,c,l,n.correlationId)(h,o,je.nowSeconds(),n,g,void 0,void 0,void 0,void 0)})}var HP=32;function fo(n,e,t){return f(this,null,function*(){n.addQueueMeasurement(d.GeneratePkceCodes,t);let r=Ie(BP,d.GenerateCodeVerifier,e,n,t)(n,e,t),o=yield y(jP,d.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}})}function BP(n,e,t){try{let r=new Uint8Array(HP);return Ie(y_,d.GetRandomValues,e,n,t)(r),zt(r)}catch{throw E(Si)}}function jP(n,e,t,r){return f(this,null,function*(){e.addQueueMeasurement(d.GenerateCodeChallengeFromVerifier,r);try{let o=yield y(wv,d.Sha256Digest,t,e,r)(n,e,r);return zt(new Uint8Array(o))}catch{throw E(Si)}})}var nf=class n{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(d.NativeMessageHandlerHandshake),this.platformAuthType=mt.PLATFORM_EXTENSION_PROVIDER}sendMessage(e){return f(this,null,function*(){this.logger.trace(this.platformAuthType+" - sendMessage called.");let t={method:ya.GetToken,request:e},r={channel:mt.CHANNEL_ID,extensionId:this.extensionId,responseId:$e(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);let o=yield new Promise((s,a)=>{this.resolvers.set(r.responseId,{resolve:s,reject:a})});return this.validatePlatformBrokerResponse(o)})}static createProvider(e,t,r){return f(this,null,function*(){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{let o=new n(e,t,r,mt.PREFERRED_EXTENSION_ID);return yield o.sendHandshakeRequest(),o}catch{let i=new n(e,t,r);return yield i.sendHandshakeRequest(),i}})}sendHandshakeRequest(){return f(this,null,function*(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:mt.CHANNEL_ID,extensionId:this.extensionId,responseId:$e(),body:{method:ya.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(E(da)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==mt.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===ya.HandshakeRequest){let r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(E(ha))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");let t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{let i=t.body.method;if(i===ya.Response){if(!r)return;let s=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(Fi(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(Fi(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw ks($r.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===ya.HandshakeResponse){if(!o){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw ks($r.unexpectedError,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===mt.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}};var rf=class n{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType=mt.PLATFORM_DOM_PROVIDER}static createProvider(e,t,r){return f(this,null,function*(){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(yield window.navigator.platformAuthentication.getSupportedContracts(mt.MICROSOFT_ENTRA_BROKERID))?.includes(mt.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new n(e,t,r)})}getExtensionId(){return mt.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return mt.DOM_API_NAME}sendMessage(e){return f(this,null,function*(){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{let t=this.initializePlatformDOMRequest(e),r=yield window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(r)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}})}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");let I=e,{accountId:t,clientId:r,authority:o,scope:i,redirectUri:s,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:h}=I,m=pn(I,["accountId","clientId","authority","scope","redirectUri","correlationId","state","storeInCache","embeddedClientId","extraParameters"]),g=this.getDOMExtraParams(m);return{accountId:t,brokerId:this.getExtensionId(),authority:o,clientId:r,correlationId:a||this.correlationId,extraParameters:p(p({},h),g),isSecurityTokenService:!1,redirectUri:s,scope:i,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){let t=e;if(t.isSuccess===!1&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),Fi(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw ks($r.unexpectedError,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){let t=Object.entries(e).reduce((o,[i,s])=>(o[i]=String(s),o),{});return p({},t)}};function aA(n,e,t,r){return f(this,null,function*(){n.trace("getPlatformAuthProvider called",t);let o=$P();n.trace("Has client allowed platform auth via DOM API: "+o);let i;try{o&&(i=yield rf.createProvider(n,e,t)),i||(n.trace("Platform auth via DOM API not available, checking for extension"),i=yield nf.createProvider(n,r||Mv,e))}catch(s){n.trace("Platform auth not available",s)}return i})}function $P(){let n;try{return n=window[pe.SessionStorage],n?.getItem(F_)==="true"}catch{return!1}}function Tr(n,e,t,r){if(e.trace("isPlatformAuthAllowed called"),!n.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!t)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case K.BEARER:case K.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}var of=class extends wt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=i}acquireToken(e,t){let r;try{if(r={popupName:this.generatePopupName(e.scopes||Rt,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{let i=S(p({},e),{httpMethod:ef(e,this.config.auth.protocolMode)});return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(i,r,t)}}catch(o){return Promise.reject(o)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t,r){return f(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let o=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,M.Popup);t.popup&&Hl(o.authority);let i=Tr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return o.platformBroker=i,this.config.auth.protocolMode===me.EAR?this.executeEarFlow(o,t):this.executeCodeFlow(o,t,r)})}executeCodeFlow(e,t,r){return f(this,null,function*(){let o=e.correlationId,i=this.initializeServerTelemetryManager(re.acquireTokenPopup),s=r||(yield y(fo,d.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o)),a=S(p({},e),{codeChallenge:s.challenge});try{let c=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,o)({serverTelemetryManager:i,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});if(a.httpMethod===$t.POST)return yield this.executeCodeFlowWithPost(a,t,c,s.verifier);{let l=yield y(Da,d.GetAuthCodeUrl,this.logger,this.performanceClient,o)(this.config,c.authority,a,this.logger,this.performanceClient),u=this.initiateAuthRequest(l,t);this.eventHandler.emitEvent(D.POPUP_OPENED,M.Popup,{popupWindow:u},null);let h=yield this.monitorPopupForHash(u,t.popupWindowParent),m=Ie(xi,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(h,this.config.auth.OIDCOptions.serverResponseType,this.logger);return yield y(Li,d.HandleResponseCode,this.logger,this.performanceClient,o)(e,m,s.verifier,re.acquireTokenPopup,this.config,c,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(c){throw t.popup?.close(),c instanceof V&&(c.setCorrelationId(this.correlationId),i.cacheFailedRequest(c)),c}})}executeEarFlow(e,t){return f(this,null,function*(){let r=e.correlationId,o=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=yield y(Ca,d.GenerateEarKey,this.logger,this.performanceClient,r)(),s=S(p({},e),{earJwk:i}),a=t.popup||this.openPopup("about:blank",t);(yield Ma(a.document,this.config,o,s,this.logger,this.performanceClient)).submit();let l=yield y(this.monitorPopupForHash.bind(this),d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,t.popupWindowParent),u=Ie(xi,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return y(Na,d.HandleResponseEar,this.logger,this.performanceClient,r)(s,u,re.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}executeCodeFlowWithPost(e,t,r,o){return f(this,null,function*(){let i=e.correlationId,s=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=t.popup||this.openPopup("about:blank",t);(yield Ra(a.document,this.config,s,e,this.logger,this.performanceClient)).submit();let l=yield y(this.monitorPopupForHash.bind(this),d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,i)(a,t.popupWindowParent),u=Ie(xi,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return y(Li,d.HandleResponseCode,this.logger,this.performanceClient,i)(e,u,o,re.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}logoutPopupAsync(e,t,r,o){return f(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(D.LOGOUT_START,M.Popup,e);let i=this.initializeServerTelemetryManager(re.logoutPopup);try{yield this.clearCacheOnLogout(this.correlationId,e.account);let s=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===me.OIDC){if(this.eventHandler.emitEvent(D.LOGOUT_SUCCESS,M.Popup,e),o){let l={apiId:re.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=z.getAbsoluteUrl(o,gt());yield this.navigationClient.navigateInternal(u,l)}t.popup?.close();return}}let a=s.getLogoutUri(e);this.eventHandler.emitEvent(D.LOGOUT_SUCCESS,M.Popup,e);let c=this.openPopup(a,t);if(this.eventHandler.emitEvent(D.POPUP_OPENED,M.Popup,{popupWindow:c},null),yield this.monitorPopupForHash(c,t.popupWindowParent).catch(()=>{}),o){let l={apiId:re.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=z.getAbsoluteUrl(o,gt());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${u}`),yield this.navigationClient.navigateInternal(u,l)}else this.logger.verbose("No main window navigation requested")}catch(s){throw t.popup?.close(),s instanceof V&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),this.eventHandler.emitEvent(D.LOGOUT_FAILURE,M.Popup,null,s),this.eventHandler.emitEvent(D.LOGOUT_END,M.Popup),s}this.eventHandler.emitEvent(D.LOGOUT_END,M.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),E(Hn)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(E(dn));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="",c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===Nn.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw E(Ys);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),E(Qs)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){let i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=r.popupSize?.width,u=r.popupSize?.height,h=r.popupPosition?.top,m=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=we.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=we.POPUP_HEIGHT),(!h||h<0||h>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),h=Math.max(0,c/2-we.POPUP_HEIGHT/2+s)),(!m||m<0||m>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),m=Math.max(0,a/2-we.POPUP_WIDTH/2+i)),o.open(e,t,`width=${l}, height=${u}, top=${h}, left=${m}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${we.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${we.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};function GP(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var sf=class extends wt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){return f(this,null,function*(){let t=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,M.Redirect);t.platformBroker=Tr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);let r=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(D.RESTORE_FROM_BFCACHE,M.Redirect))},o=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${o}`),this.browserStorage.setTemporaryCache(Te.ORIGIN_URI,o,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===me.EAR?yield this.executeEarFlow(t):yield this.executeCodeFlow(t,e.onRedirectNavigate)}catch(i){throw i instanceof V&&i.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),i}})}executeCodeFlow(e,t){return f(this,null,function*(){let r=e.correlationId,o=this.initializeServerTelemetryManager(re.acquireTokenRedirect),i=yield y(fo,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s=S(p({},e),{codeChallenge:i.challenge});this.browserStorage.cacheAuthorizeRequest(s,i.verifier);try{if(s.httpMethod===$t.POST)return yield this.executeCodeFlowWithPost(s);{let a=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:s.authority,requestAzureCloudOptions:s.azureCloudOptions,requestExtraQueryParameters:s.extraQueryParameters,account:s.account}),c=yield y(Da,d.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,s,this.logger,this.performanceClient);return yield this.initiateAuthRequest(c,t)}}catch(a){throw a instanceof V&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),a}})}executeEarFlow(e){return f(this,null,function*(){let t=e.correlationId,r=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=yield y(Ca,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=S(p({},e),{earJwk:o});return this.browserStorage.cacheAuthorizeRequest(i),(yield Ma(document,this.config,r,i,this.logger,this.performanceClient)).submit(),new Promise((a,c)=>{setTimeout(()=>{c(E(Mi,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})})}executeCodeFlowWithPost(e){return f(this,null,function*(){let t=e.correlationId,r=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(yield Ra(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((i,s)=>{setTimeout(()=>{s(E(Mi,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})})}handleRedirectPromise(e="",t,r,o){return f(this,null,function*(){let i=this.initializeServerTelemetryManager(re.handleRedirectPromise);try{let[s,a]=this.getRedirectResponse(e||"");if(!s)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),GP()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let c=this.browserStorage.getTemporaryCache(Te.ORIGIN_URI,!0)||v.EMPTY_STRING,l=xn.normalizeUrlForComparison(c),u=xn.normalizeUrlForComparison(window.location.href);if(l===u&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&Sv(c),yield this.handleResponse(s,t,r,i);if(this.config.auth.navigateToLoginRequestUrl){if(!Ul()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Te.URL_HASH,a,!0);let h={apiId:re.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},m=!0;if(!c||c==="null"){let g=bv();this.browserStorage.setTemporaryCache(Te.ORIGIN_URI,g,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),m=yield this.navigationClient.navigateInternal(g,h)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),m=yield this.navigationClient.navigateInternal(c,h);if(!m)return yield this.handleResponse(s,t,r,i)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(s,t,r,i);return null}catch(s){throw s instanceof V&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),s}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===Nn.QUERY?t=window.location.search:t=window.location.hash);let r=xn.getDeserializedResponse(t);if(r){try{J_(r,this.browserCrypto,M.Redirect)}catch(i){return i instanceof V&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return Ll(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}let o=this.browserStorage.getTemporaryCache(Te.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Te.URL_HASH)),o&&(r=xn.getDeserializedResponse(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t,r,o){return f(this,null,function*(){if(!e.state)throw E(oo);if(e.ear_jwe){let a=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return y(Na,d.HandleResponseEar,this.logger,this.performanceClient,t.correlationId)(t,e,re.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}let s=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority});return y(Li,d.HandleResponseCode,this.logger,this.performanceClient,t.correlationId)(t,e,r,re.acquireTokenRedirect,this.config,s,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}initiateAuthRequest(e,t){return f(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let r={apiId:re.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=t||this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),o(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),E(Hn)})}logout(e){return f(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(re.logout);try{this.eventHandler.emitEvent(D.LOGOUT_START,M.Redirect,e),yield this.clearCacheOnLogout(this.correlationId,t.account);let o={apiId:re.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(i.authority.protocolMode===me.OIDC)try{i.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.eventHandler.emitEvent(D.LOGOUT_SUCCESS,M.Redirect,t);return}}let s=i.getLogoutUri(t);if(this.eventHandler.emitEvent(D.LOGOUT_SUCCESS,M.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),yield this.navigationClient.navigateExternal(s,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),yield this.navigationClient.navigateExternal(s,o);return}}catch(o){throw o instanceof V&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.eventHandler.emitEvent(D.LOGOUT_FAILURE,M.Redirect,null,o),this.eventHandler.emitEvent(D.LOGOUT_END,M.Redirect),o}this.eventHandler.emitEvent(D.LOGOUT_END,M.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return z.getAbsoluteUrl(t,gt())}};function cA(n,e,t,r,o){return f(this,null,function*(){if(e.addQueueMeasurement(d.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),E(Hn);return o?y(zP,d.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Ie(qP,d.SilentHandlerLoadFrameSync,t,e,r)(n)})}function lA(n,e,t,r,o){return f(this,null,function*(){let i=af();if(!i.contentDocument)throw"No document associated with iframe!";return(yield Ra(i.contentDocument,n,e,t,r,o)).submit(),i})}function uA(n,e,t,r,o){return f(this,null,function*(){let i=af();if(!i.contentDocument)throw"No document associated with iframe!";return(yield Ma(i.contentDocument,n,e,t,r,o)).submit(),i})}function Ov(n,e,t,r,o,i,s){return f(this,null,function*(){return r.addQueueMeasurement(d.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<$h&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${$h}ms). This may result in timeouts.`);let l=window.setTimeout(()=>{window.clearInterval(u),c(E(Js))},e),u=window.setInterval(()=>{let h="",m=n.contentWindow;try{h=m?m.location.href:""}catch{}if(!h||h==="about:blank")return;let g="";m&&(s===Nn.QUERY?g=m.location.search:g=m.location.hash),window.clearTimeout(l),window.clearInterval(u),a(g)},t)}).finally(()=>{Ie(KP,d.RemoveHiddenIframe,o,r,i)(n)})})}function zP(n,e,t,r){return t.addQueueMeasurement(d.SilentHandlerLoadFrame,r),new Promise((o,i)=>{let s=af();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function qP(n){let e=af();return e.src=n,e}function af(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function KP(n){document.body===n.parentNode&&document.body.removeChild(n)}var cf=class extends wt{constructor(e,t,r,o,i,s,a,c,l,u,h){super(e,t,r,o,i,s,c,u,h),this.apiId=a,this.nativeStorage=l}acquireToken(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=p({},e);t.prompt?t.prompt!==be.NONE&&t.prompt!==be.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${be.NONE}`),t.prompt=be.NONE):t.prompt=be.NONE;let r=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,M.Silent);return r.platformBroker=Tr(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),Hl(r.authority),this.config.auth.protocolMode===me.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)})}executeCodeFlow(e){return f(this,null,function*(){let t,r=this.initializeServerTelemetryManager(this.apiId);try{return t=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),yield y(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(o){if(o instanceof V&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),!t||!(o instanceof V)||o.errorCode!==we.INVALID_GRANT_ERROR)throw o;return this.performanceClient.addFields({retryError:o.errorCode},this.correlationId),yield y(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,e)}})}executeEarFlow(e){return f(this,null,function*(){let t=e.correlationId,r=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=yield y(Ca,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=S(p({},e),{earJwk:o}),s=yield y(uA,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,t)(this.config,r,i,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=yield y(Ov,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,t)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,a),l=Ie(xi,d.DeserializeResponse,this.logger,this.performanceClient,t)(c,a,this.logger);return y(Na,d.HandleResponseEar,this.logger,this.performanceClient,t)(i,l,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}logout(){return Promise.reject(E(Bn))}silentTokenHelper(e,t){return f(this,null,function*(){let r=t.correlationId;this.performanceClient.addQueueMeasurement(d.SilentIframeClientTokenHelper,r);let o=yield y(fo,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),i=S(p({},t),{codeChallenge:o.challenge}),s;if(t.httpMethod===$t.POST)s=yield y(lA,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient);else{let u=yield y(Da,d.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient);s=yield y(cA,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(u,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}let a=this.config.auth.OIDCOptions.serverResponseType,c=yield y(Ov,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,a),l=Ie(xi,d.DeserializeResponse,this.logger,this.performanceClient,r)(c,a,this.logger);return y(Li,d.HandleResponseCode,this.logger,this.performanceClient,r)(t,l,o.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}};var lf=class extends wt{acquireToken(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentRefreshClientAcquireToken,e.correlationId);let t=yield y($l,d.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r=p(p({},e),t);e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));let o=this.initializeServerTelemetryManager(re.acquireTokenSilent_silentFlow),i=yield this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return y(i.acquireTokenByRefreshToken.bind(i),d.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})})}logout(){return Promise.reject(E(Bn))}createRefreshTokenClient(e){return f(this,null,function*(){let t=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Nl(t,this.performanceClient)})}};var uf=class{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){return f(this,null,function*(){if(!this.isBrowserEnvironment)throw E(jn);let o=e.correlationId||$e(),i=t.id_token?xs.extractTokenClaims(t.id_token,st):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new Gt(Gt.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||$e()):void 0,c=yield this.loadAccount(e,r.clientInfo||t.client_info||"",o,i,a),l=yield this.loadIdToken(t,c.homeAccountId,c.environment,c.realm,o),u=yield this.loadAccessToken(e,t,c.homeAccountId,c.environment,c.realm,r,o),h=yield this.loadRefreshToken(t,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:h},i,a)})}loadAccount(e,t,r,o,i){return f(this,null,function*(){if(this.logger.verbose("TokenCache - loading account"),e.account){let l=et.createFromAccountInfo(e.account);return yield this.storage.setAccount(l,r),l}else if(!i||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),E(sa);let s=et.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=$s(this.storage,i,s,st,r,o,t,i.hostnameAndPort,a,void 0,void 0,this.logger);return yield this.storage.setAccount(c,r),c})}loadIdToken(e,t,r,o,i){return f(this,null,function*(){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let s=_e.createIdTokenEntity(t,r,e.id_token,this.config.auth.clientId,o);return yield this.storage.setIdTokenCredential(s,i),s})}loadAccessToken(e,t,r,o,i,s,a){return f(this,null,function*(){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let c=t.scope?Ee.fromString(t.scope):new Ee(e.scopes),l=s.expiresOn||t.expires_in+je.nowSeconds(),u=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+je.nowSeconds(),h=_e.createAccessTokenEntity(r,o,t.access_token,this.config.auth.clientId,i,c.printScopes(),l,u,st);return yield this.storage.setAccessTokenCredential(h,a),h})}loadRefreshToken(e,t,r,o){return f(this,null,function*(){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let i=_e.createRefreshTokenEntity(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return yield this.storage.setRefreshTokenCredential(i,o),i})}generateAuthenticationResult(e,t,r,o){let i="",s=[],a=null,c;t?.accessToken&&(i=t.accessToken.secret,s=Ee.fromString(t.accessToken.target).asArray(),a=je.toDateFromSeconds(t.accessToken.expiresOn),c=je.toDateFromSeconds(t.accessToken.extendedExpiresOn));let l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}};var df=class extends _i{constructor(e){super(e),this.includeRedirectUri=!1}};var hf=class extends wt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){return f(this,null,function*(){if(!e.code)throw E(aa);let t=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,M.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{let o=S(p({},t),{code:e.code}),i=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new df(i);this.logger.verbose("Auth code client created");let a=new Sa(s,this.browserStorage,o,this.logger,this.performanceClient);return yield y(a.handleCodeResponseFromServer.bind(a),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof V&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}})}logout(){return Promise.reject(E(Bn))}};function dA(n,e,t){let r=window.msal?.clientIds||[],o=r.length,i=r.filter(s=>s===n).length;i>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:o,sameClientIdInstanceCount:i})}function Kn(n){let e=n?.idTokenClaims;if(e?.tfp||e?.acr)return"B2C";if(e?.tid){if(e?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function ff(n,e){try{Vl(n)}catch(t){throw e.end({success:!1},t),t}}var ka=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new wa(this.logger,this.performanceClient):Qr,this.eventHandler=new Xh(this.logger),this.browserStorage=this.isBrowserEnvironment?new _a(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,iv(this.config.auth)):B_(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);let t={cacheLocation:pe.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:pe.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new _a(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new uf(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(e,t){return f(this,null,function*(){let r=new n(e);return yield r.initialize(t),r})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e,t){return f(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(D.INITIALIZE_END);return}let r=e?.correlationId||this.getRequestCorrelationId(),o=this.config.system.allowPlatformBroker,i=this.performanceClient.startMeasurement(d.InitializeClientApplication,r);if(this.eventHandler.emitEvent(D.INITIALIZE_START),!t)try{this.logMultipleInstances(i)}catch{}if(yield y(this.browserStorage.initialize.bind(this.browserStorage),d.InitializeCache,this.logger,this.performanceClient,r)(r),o)try{this.platformAuthProvider=yield aA(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(s){this.logger.verbose(s)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Ie(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),d.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(r)),this.initialized=!0,this.eventHandler.emitEvent(D.INITIALIZE_END),i.end({allowPlatformBroker:o,success:!0})})}handleRedirectPromise(e){return f(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),Vh(this.initialized),this.isBrowserEnvironment){let t=e||"",r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return f(this,null,function*(){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===hn.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);let r=this.getAllAccounts(),o=this.browserStorage.getCachedNativeRequest(),i=o&&this.platformAuthProvider&&!e,s;this.eventHandler.emitEvent(D.HANDLE_REDIRECT_START,M.Redirect);let a;try{if(i&&this.platformAuthProvider){s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,o?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),s.add({isPlatformBrokerRequest:!0});let c=new ho(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,o.accountId,this.nativeInternalStorage,o.correlationId);a=y(c.handleRedirectPromise.bind(c),d.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{let[c,l]=this.browserStorage.getCachedRequest(),u=c.correlationId;s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,u),this.logger.trace("handleRedirectPromise - acquiring token from web flow");let h=this.createRedirectClient(u);a=y(h.handleRedirectPromise.bind(h),d.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,c,l,s)}}catch(c){throw this.browserStorage.resetRequestCache(),c}return a.then(c=>(c?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(D.LOGIN_SUCCESS,M.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_SUCCESS,M.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:Kn(c.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(D.HANDLE_REDIRECT_END,M.Redirect),c)).catch(c=>{this.browserStorage.resetRequestCache();let l=c;throw r.length>0?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_FAILURE,M.Redirect,null,l):this.eventHandler.emitEvent(D.LOGIN_FAILURE,M.Redirect,null,l),this.eventHandler.emitEvent(D.HANDLE_REDIRECT_END,M.Redirect),s.end({success:!1},l),c})})}acquireTokenRedirect(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenPreRedirect,t);r.add({accountType:Kn(e.account),scenarioId:e.scenarioId});let o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{let a=typeof o=="function"?o(s):void 0;return r.add({navigateCallbackResult:a!==!1}),r.event=r.end({success:!0})||r.event,a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let c=typeof s=="function"?s(a):void 0;return r.add({navigateCallbackResult:c!==!1}),r.event=r.end({success:!0})||r.event,c}}let i=this.getAllAccounts().length>0;try{Hh(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,hn.SIGNIN),i?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_START,M.Redirect,e):this.eventHandler.emitEvent(D.LOGIN_START,M.Redirect,e);let s;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?s=new ho(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(c=>{if(r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof qt&&uo(c))return this.platformAuthProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof Ye)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw c}):s=this.createRedirectClient(t).acquireToken(e),yield s}catch(s){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(d.AcquireTokenRedirect,t).end({success:!1},s):r.end({success:!1},s),i?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_FAILURE,M.Redirect,null,s):this.eventHandler.emitEvent(D.LOGIN_FAILURE,M.Redirect,null,s),s}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:Kn(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),ff(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,hn.SIGNIN)}catch(a){return Promise.reject(a)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_START,M.Popup,e):this.eventHandler.emitEvent(D.LOGIN_START,M.Popup,e);let i,s=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(S(p({},e),{correlationId:t}),re.acquireTokenPopup).then(a=>(r.end({success:!0,accountType:Kn(a.account)}),a)).catch(a=>{if(r.add({brokerErrorName:a.name,brokerErrorCode:a.errorCode}),a instanceof qt&&uo(a))return this.platformAuthProvider=void 0,this.createPopupClient(t).acquireToken(e,s);if(a instanceof Ye)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,s);throw a})):i=this.createPopupClient(t).acquireToken(e,s),i.then(a=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(D.LOGIN_SUCCESS,M.Popup,a):this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_SUCCESS,M.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:Kn(a.account)}),a)).catch(a=>(o.length>0?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_FAILURE,M.Popup,null,a):this.eventHandler.emitEvent(D.LOGIN_FAILURE,M.Popup,null,a),r.end({success:!1},a),Promise.reject(a))).finally(()=>f(this,null,function*(){this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(t))}))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e),r=S(p({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(d.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:Kn(e.account)}),ff(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(D.SSO_SILENT_START,M.Silent,r);let o;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),o=this.acquireTokenNative(r,re.ssoSilent).catch(i=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i instanceof qt&&uo(i))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw i})):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(i=>(this.eventHandler.emitEvent(D.SSO_SILENT_SUCCESS,M.Silent,i),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length,accountType:Kn(i.account)}),i)).catch(i=>{throw this.eventHandler.emitEvent(D.SSO_SILENT_FAILURE,M.Silent,null,i),this.ssoSilentMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenByCode,t);ff(this.initialized,r),this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_BY_CODE_START,M.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw E(la);if(e.code){let o=e.code,i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(S(p({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_BY_CODE_SUCCESS,M.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Kn(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_BY_CODE_FAILURE,M.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),yield i}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});let o=yield this.acquireTokenNative(S(p({},e),{correlationId:t}),re.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof qt&&uo(i)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i});return r.end({accountType:Kn(o.account),success:!0}),o}else throw E(ua);else throw E(ca)}catch(o){throw this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_BY_CODE_FAILURE,M.Silent,null,o),r.end({success:!1},o),o}})}acquireTokenByCodeAsync(e){return f(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(d.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return f(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenFromCache,e.correlationId),t){case Je.Default:case Je.AccessToken:case Je.AccessTokenAndRefreshToken:let r=this.createSilentCacheClient(e.correlationId);return y(r.acquireToken.bind(r),d.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw C(Be.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return f(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenByRefreshToken,e.correlationId),t){case Je.Default:case Je.AccessTokenAndRefreshToken:case Je.RefreshToken:case Je.RefreshTokenAndNetwork:let r=this.createSilentRefreshClient(e.correlationId);return y(r.acquireToken.bind(r),d.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw C(Be.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return f(this,null,function*(){this.performanceClient.addQueueMeasurement(d.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return y(t.acquireToken.bind(t),d.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(p({correlationId:t},e))})}logoutRedirect(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);return Hh(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return Vl(this.initialized),this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}clearCache(e){return f(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){let t=this.getRequestCorrelationId();return j_(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){let t=this.getRequestCorrelationId();return $_(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){let t=this.getRequestCorrelationId();return G_(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){let t=this.getRequestCorrelationId();return z_(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){let t=this.getRequestCorrelationId();return q_(e,this.logger,this.browserStorage,t)}setActiveAccount(e){let t=this.getRequestCorrelationId();K_(e,this.browserStorage,t)}getActiveAccount(){let e=this.getRequestCorrelationId();return W_(this.browserStorage,e)}hydrateCache(e,t){return f(this,null,function*(){this.logger.verbose("hydrateCache called");let r=et.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return yield this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,r,o){return f(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw E(ao);return new ho(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,o)})}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Tr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case be.NONE:case be.CONSENT:case be.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new of(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new sf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new cf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new ba(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new lf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new hf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,re.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Uh(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==pe.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==pe.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?$e():v.EMPTY_STRING}loginRedirect(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(p({correlationId:t},e||pv))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(p({correlationId:t},e||pv))}acquireTokenSilent(e){return f(this,null,function*(){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),ff(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);let o=e.account||this.getActiveAccount();if(!o)throw E(ta);return r.add({accountType:Kn(o)}),this.acquireTokenSilentDeduped(e,o,t).then(i=>(r.end({success:!0,fromCache:i.fromCache,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length}),S(p({},i),{state:e.state,correlationId:t}))).catch(i=>{throw i instanceof V&&i.setCorrelationId(t),r.end({success:!1},i),i})})}acquireTokenSilentDeduped(e,t,r){return f(this,null,function*(){let o=vr(this.config.auth.clientId,S(p({},e),{authority:e.authority||this.config.auth.authority,correlationId:r}),t.homeAccountId),i=JSON.stringify(o),s=this.activeSilentTokenRequests.get(i);if(typeof s>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);let a=y(this.acquireTokenSilentAsync.bind(this),d.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)(S(p({},e),{correlationId:r}),t);return this.activeSilentTokenRequests.set(i,a),a.finally(()=>{this.activeSilentTokenRequests.delete(i)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),s})}acquireTokenSilentAsync(e,t){return f(this,null,function*(){let r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(d.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_START,M.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);let o=yield y(Q_,d.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||Je.Default;return this.acquireTokenSilentNoIframe(o,i).catch(a=>f(this,null,function*(){if(WP(a,i))if(this.activeIframeRequest)if(i!==Je.Skip){let[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,o.correlationId);let h=this.performanceClient.startMeasurement(d.AwaitConcurrentIframe,o.correlationId);h.add({awaitIframeCorrelationId:u});let m=yield l;if(h.end({success:m}),m)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),y(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),y(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a})).then(a=>(this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_SUCCESS,M.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_FAILURE,M.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})})}acquireTokenSilentNoIframe(e,t){return f(this,null,function*(){return Tr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,re.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(r=>f(this,null,function*(){throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof qt&&uo(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,C(Be.tokenRefreshRequired)):r}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Je.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),y(this.acquireTokenFromCache.bind(this),d.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===Je.AccessToken)throw r;return this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_NETWORK_START,M.Silent,e),y(this.acquireTokenByRefreshToken.bind(this),d.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}preGeneratePkceCodes(e){return f(this,null,function*(){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=yield y(fo,d.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()})}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");let t=this.pkceCode?p({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){let t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),dA(t,e,this.logger)}};function WP(n,e){let t=!(n instanceof Ye&&n.subError!==Un.badToken),r=n.errorCode===we.INVALID_GRANT_ERROR||n.errorCode===Be.tokenRefreshRequired,o=t&&r||n.errorCode===Un.noTokensFound||n.errorCode===Un.refreshTokenExpired,i=u_.includes(e);return o&&i}function hA(n,e){return f(this,null,function*(){let t=new Kh(n);return yield t.initialize(),ka.createController(t,e)})}var Gl=class n{static createPublicClientApplication(e){return f(this,null,function*(){let t=yield hA(e);return new n(e,t)})}constructor(e,t){this.isBroker=!1,this.controller=t||new ka(new Kh(e))}initialize(e){return f(this,null,function*(){return this.controller.initialize(e,this.isBroker)})}acquireTokenPopup(e){return f(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return f(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var zl=class{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case D.LOGIN_START:return he.Login;case D.SSO_SILENT_START:return he.SsoSilent;case D.ACQUIRE_TOKEN_START:if(e.interactionType===M.Redirect||e.interactionType===M.Popup)return he.AcquireToken;break;case D.HANDLE_REDIRECT_START:return he.HandleRedirect;case D.LOGOUT_START:return he.Logout;case D.SSO_SILENT_SUCCESS:case D.SSO_SILENT_FAILURE:if(t&&t!==he.SsoSilent)break;return he.None;case D.LOGOUT_END:if(t&&t!==he.Logout)break;return he.None;case D.HANDLE_REDIRECT_END:if(t&&t!==he.HandleRedirect)break;return he.None;case D.LOGIN_SUCCESS:case D.LOGIN_FAILURE:case D.ACQUIRE_TOKEN_SUCCESS:case D.ACQUIRE_TOKEN_FAILURE:case D.RESTORE_FROM_BFCACHE:if(e.interactionType===M.Redirect||e.interactionType===M.Popup){if(t&&t!==he.Login&&t!==he.AcquireToken)break;return he.None}break}return null}};var pf="@azure/msal-angular",ql="4.0.19",mf=new P("MSAL_INSTANCE"),Pv=new P("MSAL_GUARD_CONFIG"),xv=new P("MSAL_INTERCEPTOR_CONFIG"),QP=new P("MSAL_BROADCAST_CONFIG"),_r=(()=>{class n{constructor(t,r){this.msalInstance=t,this.msalBroadcastConfig=r,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.msalInstance.getLogger().clone(pf,ql).verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new La(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new Fe,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new Le(he.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(o=>{this._msalSubject.next(o);let i=zl.getInteractionStatusFromEvent(o,this._inProgress.value);i!==null&&(this.msalInstance.getLogger().clone(pf,ql).verbose(`BroadcastService - ${o.eventType} results in setting inProgress from ${this._inProgress.value} to ${i}`),this._inProgress.next(i))})}resetInProgressEvent(){this._inProgress.value===he.Startup&&this._inProgress.next(he.None)}}return n.\u0275fac=function(t){return new(t||n)(R(mf),R(QP,8))},n.\u0275prov=k({token:n,factory:n.\u0275fac}),n})(),Pt=(()=>{class n{constructor(t,r,o){this.instance=t,this.location=r,this.injector=o;let i=this.location.path(!0).split("#").pop();i&&(this.redirectHash=`#${i}`),this.instance.initializeWrapperLibrary(gv.Angular,ql)}initialize(){return X(this.instance.initialize())}acquireTokenPopup(t){return X(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return X(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return X(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return X(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)).finally(()=>{this.injector.get(_r).resetInProgressEvent()}))}loginPopup(t){return X(this.instance.loginPopup(t))}loginRedirect(t){return X(this.instance.loginRedirect(t))}logout(t){return X(this.instance.logout(t))}logoutRedirect(t){return X(this.instance.logoutRedirect(t))}logoutPopup(t){return X(this.instance.logoutPopup(t))}ssoSilent(t){return X(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(pf,ql)),this.logger}setLogger(t){this.logger=t.clone(pf,ql),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(R(mf),R(bn),R(rn))},n.\u0275prov=k({token:n,factory:n.\u0275fac}),n})(),gf=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");let r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){let r=typeof this.msalGuardConfig.authRequest=="function"?this.msalGuardConfig.authRequest(this.authService,t):p({},this.msalGuardConfig.authRequest);if(this.msalGuardConfig.interactionType===M.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe($(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");let o=this.getDestinationUrl(t.url);return this.authService.loginRedirect(p({redirectStartPage:o},r)).pipe($(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==M.Popup&&this.msalGuardConfig.interactionType!==M.Redirect)throw new Ni("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),typeof window<"u"){if(z.hashContainsKnownProperties(window.location.hash)&&Bh.isInIframe()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),O(!1)}else return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),O(!0);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));let r=this.location.path(!0);return this.authService.initialize().pipe(xt(()=>this.authService.handleRedirectObservable()),xt(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),O(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){let o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=this.location.prepareExternalUrl(t.url).indexOf("#")===0;if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?O(this.parseUrl(this.location.path())):O(this.parseUrl(""))}return O(!0)}),Wt(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),O(this.loginFailedRoute)):O(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(R(Pv),R(_r),R(Pt),R(bn),R(Rn))},n.\u0275prov=k({token:n,factory:n.\u0275fac}),n})(),fA=(()=>{class n{constructor(t,r,o,i,s){this.msalInterceptorConfig=t,this.authService=r,this.location=o,this.msalBroadcastService=i,this._document=s}intercept(t,r){if(this.msalInterceptorConfig.interactionType!==M.Popup&&this.msalInterceptorConfig.interactionType!==M.Redirect)throw new Ni("invalid_interaction_type","Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration");this.authService.getLogger().verbose("MSAL Interceptor activated");let o=this.getScopesForEndpoint(t.url,t.method);if(!o||o.length===0)return this.authService.getLogger().verbose("Interceptor - no scopes for endpoint"),r.handle(t);let i;this.authService.instance.getActiveAccount()?(this.authService.getLogger().verbose("Interceptor - active account selected"),i=this.authService.instance.getActiveAccount()):(this.authService.getLogger().verbose("Interceptor - no active account, fallback to first account"),i=this.authService.instance.getAllAccounts()[0]);let s=typeof this.msalInterceptorConfig.authRequest=="function"?this.msalInterceptorConfig.authRequest(this.authService,t,{account:i}):S(p({},this.msalInterceptorConfig.authRequest),{account:i});return this.authService.getLogger().info(`Interceptor - ${o.length} scopes found for endpoint`),this.authService.getLogger().infoPii(`Interceptor - [${o}] scopes found for ${t.url}`),this.acquireToken(s,o,i).pipe(ke(a=>{this.authService.getLogger().verbose("Interceptor - setting authorization headers");let c=t.headers.set("Authorization",`Bearer ${a.accessToken}`),l=t.clone({headers:c});return r.handle(l)}))}acquireToken(t,r,o){return this.authService.acquireTokenSilent(S(p({},t),{scopes:r,account:o})).pipe(Wt(()=>(this.authService.getLogger().error("Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(St(1),ke(i=>i===he.None?this.acquireTokenInteractively(t,r):this.msalBroadcastService.inProgress$.pipe(Ae(s=>s===he.None),St(1),ke(()=>this.acquireToken(t,r,o))))))),ke(i=>i.accessToken?O(i):(this.authService.getLogger().error("Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(Ae(s=>s===he.None),St(1),ke(()=>this.acquireTokenInteractively(t,r))))))}acquireTokenInteractively(t,r){if(this.msalInterceptorConfig.interactionType===M.Popup)return this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by popup"),this.authService.acquireTokenPopup(S(p({},t),{scopes:r}));this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by redirect");let o=window.location.href;return this.authService.acquireTokenRedirect(S(p({},t),{scopes:r,redirectStartPage:o})),at}getScopesForEndpoint(t,r){this.authService.getLogger().verbose("Interceptor - getting scopes for endpoint");let o=this.location.normalize(t),i=Array.from(this.msalInterceptorConfig.protectedResourceMap.keys()),s=this.matchResourcesToEndpoint(i,o);return s.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,s,r):null}matchResourcesToEndpoint(t,r){let o=[];return t.forEach(i=>{let s=this.location.normalize(i),a=this.getAbsoluteUrl(s),c=new URL(a),l=this.getAbsoluteUrl(r),u=new URL(l);this.checkUrlComponents(c,u)&&o.push(i)}),o}checkUrlComponents(t,r){let o=["protocol","host","pathname","search","hash"];for(let i of o)if(t[i]){let s=decodeURIComponent(t[i]);if(!de.matchPattern(s,r[i]))return!1}return!0}getAbsoluteUrl(t){let r=this._document.createElement("a");return r.href=t,r.href}matchScopesToEndpoint(t,r,o){let i=[];return r.forEach(s=>{let a=[],c=t.get(s);if(c===null){i.push(null);return}c.forEach(l=>{if(typeof l=="string")a.push(l);else{let u=o.toLowerCase();l.httpMethod.toLowerCase()===u&&(l.scopes===null?i.push(null):l.scopes.forEach(m=>{a.push(m)}))}}),a.length>0&&i.push(a)}),i.length>0?(i.length>1&&this.authService.getLogger().warning("Interceptor - More than 1 matching scopes for endpoint found."),i[0]):null}}return n.\u0275fac=function(t){return new(t||n)(R(xv),R(Pt),R(bn),R(_r),R(We))},n.\u0275prov=k({token:n,factory:n.\u0275fac}),n})(),pA=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getLogger().verbose("MsalRedirectComponent activated"),this.authService.handleRedirectObservable().subscribe()}}return n.\u0275fac=function(t){return new(t||n)(x(Pt))},n.\u0275cmp=qe({type:n,selectors:[["app-redirect"]],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();var vf={production:!0,apiBaseUrl:"https://alp-maintenance-offertool-api-dev-cmgkb2e8asadefgu.centralindia-01.azurewebsites.net"};var TA=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(x(er),x(An))}}static{this.\u0275dir=Oe({type:n})}}return n})(),Uv=(()=>{class n extends TA{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Mo(n)))(o||n)}})()}static{this.\u0275dir=Oe({type:n,features:[on]})}}return n})(),Ql=new P("");var YP={provide:Ql,useExisting:Yn(()=>Pa),multi:!0};function JP(){let n=rr()?rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ZP=new P(""),Pa=(()=>{class n extends TA{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!JP())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(x(er),x(An),x(ZP,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&W("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[No([YP]),on]})}}return n})();function po(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function _A(n){return n!=null&&typeof n.length=="number"}var Vv=new P(""),Hv=new P(""),XP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ar=class{static min(e){return ex(e)}static max(e){return tx(e)}static required(e){return nx(e)}static requiredTrue(e){return rx(e)}static email(e){return ox(e)}static minLength(e){return ix(e)}static maxLength(e){return sx(e)}static pattern(e){return ax(e)}static nullValidator(e){return AA(e)}static compose(e){return NA(e)}static composeAsync(e){return OA(e)}};function ex(n){return e=>{if(po(e.value)||po(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function tx(n){return e=>{if(po(e.value)||po(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function nx(n){return po(n.value)?{required:!0}:null}function rx(n){return n.value===!0?null:{required:!0}}function ox(n){return po(n.value)||XP.test(n.value)?null:{email:!0}}function ix(n){return e=>po(e.value)||!_A(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function sx(n){return e=>_A(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function ax(n){if(!n)return AA;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(po(r.value))return null;let o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function AA(n){return null}function SA(n){return n!=null}function bA(n){return ko(n)?X(n):n}function DA(n){let e={};return n.forEach(t=>{e=t!=null?p(p({},e),t):e}),Object.keys(e).length===0?null:e}function MA(n,e){return e.map(t=>t(n))}function cx(n){return!n.validate}function RA(n){return n.map(e=>cx(e)?e:t=>e.validate(t))}function NA(n){if(!n)return null;let e=n.filter(SA);return e.length==0?null:function(t){return DA(MA(t,e))}}function kA(n){return n!=null?NA(RA(n)):null}function OA(n){if(!n)return null;let e=n.filter(SA);return e.length==0?null:function(t){let r=MA(t,e).map(bA);return Yf(r).pipe($(DA))}}function PA(n){return n!=null?OA(RA(n)):null}function mA(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xA(n){return n._rawValidators}function FA(n){return n._rawAsyncValidators}function Fv(n){return n?Array.isArray(n)?n:[n]:[]}function Ef(n,e){return Array.isArray(n)?n.includes(e):n===e}function gA(n,e){let t=Fv(e);return Fv(n).forEach(o=>{Ef(t,o)||t.push(o)}),t}function yA(n,e){return Fv(e).filter(t=>!Ef(n,t))}var If=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ui=class extends If{get formDirective(){return null}get path(){return null}},Vi=class extends If{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},wf=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},lx={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},xQ=S(p({},lx),{"[class.ng-submitted]":"isSubmitted"}),bf=(()=>{class n extends wf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(x(Vi,2))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&fd("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[on]})}}return n})(),LA=(()=>{class n extends wf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(x(Ui,10))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&fd("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[on]})}}return n})();var Kl="VALID",Cf="INVALID",Oa="PENDING",Wl="DISABLED";function UA(n){return(Df(n)?n.validators:n)||null}function ux(n){return Array.isArray(n)?kA(n):n||null}function VA(n,e){return(Df(e)?e.asyncValidators:n)||null}function dx(n){return Array.isArray(n)?PA(n):n||null}function Df(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function hx(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new F(1e3,"");if(!r[t])throw new F(1001,"")}function fx(n,e,t){n._forEachChild((r,o)=>{if(t[o]===void 0)throw new F(1002,"")})}var Tf=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Kl}get invalid(){return this.status===Cf}get pending(){return this.status==Oa}get disabled(){return this.status===Wl}get enabled(){return this.status!==Wl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yA(e,this._rawAsyncValidators))}hasValidator(e){return Ef(this._rawValidators,e)}hasAsyncValidator(e){return Ef(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Oa,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wl,this.errors=null,this._forEachChild(r=>{r.disable(S(p({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(S(p({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Kl,this._forEachChild(r=>{r.enable(S(p({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(S(p({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kl||this.status===Oa)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wl:Kl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Oa,this._hasOwnPendingAsyncValidator=!0;let t=bA(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ye,this.statusChanges=new ye}_calculateStatus(){return this._allControlsDisabled()?Wl:this.errors?Cf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oa)?Oa:this._anyControlsHaveStatus(Cf)?Cf:Kl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Df(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ux(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=dx(this._rawAsyncValidators)}},_f=class extends Tf{constructor(e,t,r){super(UA(t),VA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){fx(this,!0,e),Object.keys(e).forEach(r=>{hx(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e?e[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,i)=>{r=t(r,o,i)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Mf=new P("CallSetDisabledState",{providedIn:"root",factory:()=>Rf}),Rf="always";function HA(n,e){return[...e.path,n]}function Lv(n,e,t=Rf){Bv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),mx(n,e),yx(n,e),gx(n,e),px(n,e)}function vA(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Sf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Af(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function px(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Bv(n,e){let t=xA(n);e.validator!==null?n.setValidators(mA(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=FA(n);e.asyncValidator!==null?n.setAsyncValidators(mA(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let o=()=>n.updateValueAndValidity();Af(e._rawValidators,o),Af(e._rawAsyncValidators,o)}function Sf(n,e){let t=!1;if(n!==null){if(e.validator!==null){let o=xA(n);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==e.validator);i.length!==o.length&&(t=!0,n.setValidators(i))}}if(e.asyncValidator!==null){let o=FA(n);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==e.asyncValidator);i.length!==o.length&&(t=!0,n.setAsyncValidators(i))}}}let r=()=>{};return Af(e._rawValidators,r),Af(e._rawAsyncValidators,r),t}function mx(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&BA(n,e)})}function gx(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&BA(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function BA(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yx(n,e){let t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function vx(n,e){n==null,Bv(n,e)}function Cx(n,e){return Sf(n,e)}function jA(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Ex(n){return Object.getPrototypeOf(n.constructor)===Uv}function Ix(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $A(n,e){if(!e)return null;Array.isArray(e);let t,r,o;return e.forEach(i=>{i.constructor===Pa?t=i:Ex(i)?r=i:o=i}),o||r||t||null}function wx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function CA(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function EA(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var fn=class extends Tf{constructor(e=null,t,r){super(UA(t),VA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Df(t)&&(t.nonNullable||t.initialValueIsDefault)&&(EA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){EA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Tx=n=>n instanceof fn;var _x={provide:Vi,useExisting:Yn(()=>jv)},IA=Promise.resolve(),jv=(()=>{class n extends Vi{constructor(t,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new fn,this._registered=!1,this.name="",this.update=new ye,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=$A(this,i)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),jA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Lv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){IA.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,o=r!==0&&yd(r);IA.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?HA(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(x(Ui,9),x(Vv,10),x(Hv,10),x(Ql,10),x(Oo,8),x(Mf,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Xe.None,"disabled","isDisabled"],model:[Xe.None,"ngModel","model"],options:[Xe.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[No([_x]),on,xr]})}}return n})(),GA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var zA=new P("");var Ax={provide:Ui,useExisting:Yn(()=>$v)},$v=(()=>{class n extends Ui{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ye,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Lv(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){vA(t.control||null,t,!1),wx(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Ix(this.form,this.directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,o=this.form.get(t.path);r!==o&&(vA(r||null,t),Tx(o)&&(Lv(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);vx(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Cx(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Bv(this.form,this),this._oldForm&&Sf(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(x(Vv,10),x(Hv,10),x(Mf,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&W("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{form:[Xe.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[No([Ax]),on,xr]})}}return n})();var Sx={provide:Vi,useExisting:Yn(()=>Gv)},Gv=(()=>{class n extends Vi{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,o,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new ye,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=$A(this,i)}ngOnChanges(t){this._added||this._setUpControl(),jA(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return HA(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(x(Ui,13),x(Vv,10),x(Hv,10),x(Ql,10),x(zA,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formControlName",""]],inputs:{name:[Xe.None,"formControlName","name"],isDisabled:[Xe.None,"disabled","isDisabled"],model:[Xe.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[No([Sx]),on,xr]})}}return n})(),bx={provide:Ql,useExisting:Yn(()=>Nf),multi:!0};function qA(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Dx(n){return n.split(":")[0]}var Nf=(()=>{class n extends Uv{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),o=qA(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Dx(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Mo(n)))(o||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&W("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[No([bx]),on]})}}return n})(),KA=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(qA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(x(An),x(er),x(Nf,9))}}static{this.\u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),Mx={provide:Ql,useExisting:Yn(()=>WA),multi:!0};function wA(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Rx(n){return n.split(":")[0]}var WA=(()=>{class n extends Uv{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let o=t.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let o=[],i=r.selectedOptions;if(i!==void 0){let s=i;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);o.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);o.push(l)}}}this.value=o,t(o)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Rx(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Mo(n)))(o||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&W("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[No([Mx]),on]})}}return n})(),QA=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(wA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(wA(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(x(An),x(er),x(WA,9))}}static{this.\u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var YA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=Zt({})}}return n})();var JA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Mf,useValue:t.callSetDisabledState??Rf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=Zt({imports:[YA]})}}return n})(),ZA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zA,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Mf,useValue:t.callSetDisabledState??Rf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=Zt({imports:[YA]})}}return n})();var eS=(()=>{class n{constructor(){this.menuItems=[{name:"Accounts Info",icon:"account_circle"},{name:"Employee Info",icon:"badge"},{name:"Sales Unit",icon:"store"},{name:"Employees",icon:"people"},{name:"Cost Upload",icon:"attach_money"},{name:"Offer Tool",icon:"shopping_bag"},{name:"PQL Inbox",icon:"inbox"}],this.isExpanded=!0}toggleSidebar(){this.isExpanded=!this.isExpanded}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["app-sidebar"]],standalone:!0,features:[rt],decls:22,vars:0,consts:[[1,"sidebar-container"],[1,"logo-section"],["src","/assets/images/logo/arcelormittal-logo-white.png","alt","ArcelorMittal",1,"logo"],[1,"sidebar-nav"],[1,"nav-item"],["href","#",1,"nav-link"],[1,"material-icons"]],template:function(r,o){r&1&&(_(0,"div",0)(1,"div",1),Ue(2,"img",2),T(),_(3,"ul",3)(4,"li",4)(5,"a",5)(6,"i",6),b(7,"dashboard"),T(),_(8,"span"),b(9,"Dashboard"),T()()(),_(10,"li",4)(11,"a",5)(12,"i",6),b(13,"people"),T(),_(14,"span"),b(15,"Team"),T()()(),_(16,"li",4)(17,"a",5)(18,"i",6),b(19,"settings"),T(),_(20,"span"),b(21,"Settings"),T()()()()())},dependencies:[ot,Wd],styles:[".sidebar-container[_ngcontent-%COMP%]{width:250px;background:linear-gradient(90deg,#840d81,#fe6b45);color:#fff;padding:20px;display:flex;flex-direction:column;height:100%}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:30px}.logo[_ngcontent-%COMP%]{height:60px}.logo-text[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.sidebar-nav[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{margin-bottom:15px}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;color:#fff;text-decoration:none;padding:10px 15px;border-radius:8px;transition:background-color .3s}.nav-link[_ngcontent-%COMP%]:hover{background-color:#fff3}.nav-link[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}"]})}}return n})();function Nx(n,e){if(n&1){let t=tr();_(0,"div",15)(1,"a",16),W("click",function(){Tn(t);let o=Ve();return _n(o.logout())}),_(2,"i",3),b(3,"logout"),T(),_(4,"span"),b(5,"Logout"),T()()()}}var tS=(()=>{class n{constructor(t){this.msalService=t,this.userName="",this.userEmail="",this.toggleMenu=new ye,this.isDropdownOpen=!1}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}logout(){this.msalService.logoutRedirect()}onMenuClick(){this.toggleMenu.emit()}static{this.\u0275fac=function(r){return new(r||n)(x(Pt))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-header"]],inputs:{userName:"userName",userEmail:"userEmail"},outputs:{toggleMenu:"toggleMenu"},standalone:!0,features:[rt],decls:23,vars:3,consts:[[1,"header-container"],[1,"left-section"],[1,"menu-toggle",3,"click"],[1,"material-icons"],[1,"search-bar"],["type","text","placeholder","Search..."],[1,"right-section"],[1,"user-profile-dropdown-container"],[1,"user-profile",3,"click"],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"profile-pic"],[1,"material-icons","dropdown-icon"],["class","dropdown-menu",4,"ngIf"],[1,"dropdown-menu"],["href","#",1,"dropdown-item","logout-item",3,"click"]],template:function(r,o){r&1&&(_(0,"header",0)(1,"div",1)(2,"div",2),W("click",function(){return o.onMenuClick()}),_(3,"i",3),b(4,"menu"),T()(),_(5,"div",4)(6,"i",3),b(7,"search"),T(),Ue(8,"input",5),T()(),_(9,"div",6)(10,"div",7)(11,"div",8),W("click",function(){return o.toggleDropdown()}),_(12,"div",9)(13,"span",10),b(14),T(),_(15,"span",11),b(16),T()(),_(17,"div",12)(18,"i",3),b(19,"account_circle"),T()(),_(20,"i",13),b(21,"arrow_drop_down"),T()(),Ke(22,Nx,6,0,"div",14),T()()()),r&2&&(U(14),Ht(o.userName),U(2),Ht(o.userEmail),U(6),ae("ngIf",o.isDropdownOpen))},dependencies:[ot,Lr],styles:[".logout-button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#007bff;color:#fff;border:1px solid #0056b3;border-radius:4px;cursor:pointer;box-shadow:0 2px 4px #0003;transition:background-color .3s,box-shadow .3s}.logout-button[_ngcontent-%COMP%]:hover{background-color:#0056b3;box-shadow:0 4px 8px #0000004d}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background-color:#fff;box-shadow:0 2px 4px #0000001a}.left-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.menu-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .search-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#555;cursor:pointer}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ddd;border-radius:20px;padding:5px 15px;background-color:#f7f7f7}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;outline:none;padding:0 10px}.right-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.user-profile-dropdown-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:right}.user-name[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:#333}.user-email[_ngcontent-%COMP%]{font-size:12px;color:#888}.profile-pic[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;color:#007bff}.dropdown-icon[_ngcontent-%COMP%]{font-size:20px;color:#555}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:#fff;border:1px solid #ddd;border-radius:4px;box-shadow:0 2px 4px #0000001a;min-width:150px;z-index:100;margin-top:5px}.dropdown-item.logout-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:5px}.logout-icon[_ngcontent-%COMP%]{font-size:18px}.user-info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .logout-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.user-info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .logout-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.user-info-item[_ngcontent-%COMP%], .logout-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.dropdown-item[_ngcontent-%COMP%]{display:block;padding:10px 15px;text-decoration:none;color:#333}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}"]})}}return n})();var kx=(n,e)=>({"active-status":n,"inactive-status":e});function Ox(n,e){if(n&1&&(_(0,"i",8),b(1),T()),n&2){let t=Ve();U(),Bt(" ",t.sortDirection==="asc"?"arrow_downward":"arrow_upward"," ")}}function Px(n,e){if(n&1&&(_(0,"i",8),b(1),T()),n&2){let t=Ve();U(),Bt(" ",t.sortDirection==="asc"?"arrow_downward":"arrow_upward"," ")}}function xx(n,e){if(n&1&&(_(0,"i",8),b(1),T()),n&2){let t=Ve();U(),Bt(" ",t.sortDirection==="asc"?"arrow_downward":"arrow_upward"," ")}}function Fx(n,e){if(n&1&&(_(0,"i",8),b(1),T()),n&2){let t=Ve();U(),Bt(" ",t.sortDirection==="asc"?"arrow_downward":"arrow_upward"," ")}}function Lx(n,e){if(n&1&&(_(0,"i",8),b(1),T()),n&2){let t=Ve();U(),Bt(" ",t.sortDirection==="asc"?"arrow_downward":"arrow_upward"," ")}}function Ux(n,e){if(n&1&&(_(0,"i",8),b(1),T()),n&2){let t=Ve();U(),Bt(" ",t.sortDirection==="asc"?"arrow_downward":"arrow_upward"," ")}}function Vx(n,e){if(n&1&&(_(0,"i",8),b(1),T()),n&2){let t=Ve();U(),Bt(" ",t.sortDirection==="asc"?"arrow_downward":"arrow_upward"," ")}}function Hx(n,e){if(n&1&&(_(0,"i",8),b(1),T()),n&2){let t=Ve();U(),Bt(" ",t.sortDirection==="asc"?"arrow_downward":"arrow_upward"," ")}}function Bx(n,e){if(n&1){let t=tr();_(0,"tr")(1,"td"),b(2),T(),_(3,"td"),b(4),T(),_(5,"td"),b(6),T(),_(7,"td"),b(8),T(),_(9,"td"),b(10),T(),_(11,"td"),b(12),T(),_(13,"td"),b(14),T(),_(15,"td",9),b(16),T(),_(17,"td",10)(18,"i",11),W("click",function(){let o=Tn(t).$implicit,i=Ve();return _n(i.onEditClick(o))}),b(19,"edit"),T(),_(20,"i",12),b(21,"more_vert"),T()()()}if(n&2){let t=e.$implicit;U(2),Ht(t.employeeCode),U(2),Ht(t.name),U(2),Ht(t.employeeNumber),U(2),Ht(t.email),U(2),Ht(t.fax),U(2),Ht(t.mobile),U(2),Ht(t.phone),U(),ae("ngClass",iw(9,kx,t.active===1,t.active===0)),U(),Bt(" ",t.active===1?"Active":"Inactive"," ")}}function jx(n,e){n&1&&(_(0,"tr")(1,"td",13),b(2,"No employee data to display."),T()())}var nS=(()=>{class n{constructor(){this.employees=null,this.pageSize=50,this.currentPage=1,this.edit=new ye,this.sortKey="name",this.sortDirection="asc"}sort(t){this.sortKey===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortKey=t,this.sortDirection="asc"),this.sortEmployees()}sortEmployees(){this.employees&&this.employees.sort((t,r)=>{let o=t[this.sortKey],i=r[this.sortKey];return typeof o=="string"&&typeof i=="string"?this.sortDirection==="asc"?o.localeCompare(i):i.localeCompare(o):typeof o=="number"&&typeof i=="number"?this.sortDirection==="asc"?o-i:i-o:0})}onEditClick(t){this.edit.emit(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["app-team-details"]],inputs:{employees:"employees",pageSize:"pageSize",currentPage:"currentPage"},outputs:{edit:"edit"},standalone:!0,features:[rt],decls:37,vars:10,consts:[[1,"team-details-container"],[1,"header"],[1,"table-scroll-container"],[1,"employee-table"],[3,"click"],["class","material-icons sort-icon",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"material-icons","sort-icon"],[3,"ngClass"],[1,"actions"],[1,"material-icons",3,"click"],[1,"material-icons"],["colspan","9",1,"no-data"]],template:function(r,o){r&1&&(_(0,"div",0)(1,"div",1)(2,"h3"),b(3,"OfferTool Employee List"),T()(),_(4,"div",2)(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),W("click",function(){return o.sort("employeeCode")}),b(9," Employee Code "),Ke(10,Ox,2,1,"i",5),T(),_(11,"th",4),W("click",function(){return o.sort("name")}),b(12," Name "),Ke(13,Px,2,1,"i",5),T(),_(14,"th",4),W("click",function(){return o.sort("employeeNumber")}),b(15," Employee Number "),Ke(16,xx,2,1,"i",5),T(),_(17,"th",4),W("click",function(){return o.sort("email")}),b(18," Email "),Ke(19,Fx,2,1,"i",5),T(),_(20,"th",4),W("click",function(){return o.sort("fax")}),b(21," Fax "),Ke(22,Lx,2,1,"i",5),T(),_(23,"th",4),W("click",function(){return o.sort("mobile")}),b(24," Mobile "),Ke(25,Ux,2,1,"i",5),T(),_(26,"th",4),W("click",function(){return o.sort("phone")}),b(27," Phone "),Ke(28,Vx,2,1,"i",5),T(),_(29,"th",4),W("click",function(){return o.sort("active")}),b(30," Active "),Ke(31,Hx,2,1,"i",5),T(),_(32,"th"),b(33,"Actions"),T()()(),_(34,"tbody"),Ke(35,Bx,22,12,"tr",6)(36,jx,3,0,"tr",7),T()()()()),r&2&&(U(10),ae("ngIf",o.sortKey==="employeeCode"),U(3),ae("ngIf",o.sortKey==="name"),U(3),ae("ngIf",o.sortKey==="employeeNumber"),U(3),ae("ngIf",o.sortKey==="email"),U(3),ae("ngIf",o.sortKey==="fax"),U(3),ae("ngIf",o.sortKey==="mobile"),U(3),ae("ngIf",o.sortKey==="phone"),U(3),ae("ngIf",o.sortKey==="active"),U(4),ae("ngForOf",o.employees),U(),ae("ngIf",!o.employees||o.employees.length===0))},dependencies:[ot,Ed,Tw,Lr],styles:[".team-details-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.table-scroll-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border:1px solid #ddd;border-radius:8px}.employee-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.employee-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px;background-color:#f7f7f7;position:sticky;top:0;z-index:10}.employee-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #eee}.employee-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.active-status[_ngcontent-%COMP%]{color:#28a745;font-weight:700}.inactive-status[_ngcontent-%COMP%]{color:#dc3545;font-weight:700}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;color:#777}.no-data[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#999}"]})}}return n})();var rS=(()=>{class n{constructor(t){this.http=t}updateEmployee(t){let r=`${vf.apiBaseUrl}/api/Employee/${t.employeeNumber}`;return this.http.put(r,t)}static{this.\u0275fac=function(r){return new(r||n)(R(oc))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oS=(()=>{class n{constructor(t){this.employeeService=t,this.employee=null,this.close=new ye,this.save=new ye}ngOnInit(){this.employee&&(this.employeeForm=new _f({employeeCode:new fn(this.employee.employeeCode,Ar.required),name:new fn(this.employee.name,Ar.required),employeeNumber:new fn(this.employee.employeeNumber,Ar.required),email:new fn(this.employee.email,[Ar.required,Ar.email]),fax:new fn(this.employee.fax),mobile:new fn(this.employee.mobile),phone:new fn(this.employee.phone),active:new fn(this.employee.active,Ar.required)}))}closeModal(){this.close.emit()}saveChanges(){if(this.employeeForm.valid&&this.employee){let t=p(p({},this.employee),this.employeeForm.value);this.employeeService.updateEmployee(t).subscribe({next:r=>{console.log("Employee updated successfully",r),this.save.emit(t),this.closeModal()},error:r=>{console.error("Failed to update employee",r)}})}}static{this.\u0275fac=function(r){return new(r||n)(x(rS))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-employee-edit-modal"]],inputs:{employee:"employee"},outputs:{close:"close",save:"save"},standalone:!0,features:[rt],decls:50,vars:3,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-button",3,"click"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","employeeCode"],["id","employeeCode","type","text","formControlName","employeeCode","readonly",""],[1,"form-group",2,"display","none"],["for","employeeNumber"],["id","employeeNumber","type","text","formControlName","employeeNumber","readonly",""],["for","name"],["id","name","type","text","formControlName","name"],["for","email"],["id","email","type","email","formControlName","email"],["for","fax"],["id","fax","type","text","formControlName","fax"],["for","mobile"],["id","mobile","type","text","formControlName","mobile"],["for","phone"],["id","phone","type","text","formControlName","phone"],["for","active"],["id","active","formControlName","active"],[3,"ngValue"],[1,"modal-footer"],["type","button",1,"save-button",3,"click"],["type","button",1,"cancel-button",3,"click"]],template:function(r,o){r&1&&(_(0,"div",0),W("click",function(){return o.closeModal()}),_(1,"div",1),W("click",function(s){return s.stopPropagation()}),_(2,"div",2)(3,"h2"),b(4,"Edit Employee Details"),T(),_(5,"button",3),W("click",function(){return o.closeModal()}),b(6,"\xD7"),T()(),_(7,"div",4)(8,"form",5),W("ngSubmit",function(){return o.saveChanges()}),_(9,"div",6)(10,"label",7),b(11,"Employee Code"),T(),Ue(12,"input",8),T(),_(13,"div",9)(14,"label",10),b(15,"Employee Number"),T(),Ue(16,"input",11),T(),_(17,"div",6)(18,"label",12),b(19,"Name"),T(),Ue(20,"input",13),T(),_(21,"div",6)(22,"label",14),b(23,"Email"),T(),Ue(24,"input",15),T(),_(25,"div",6)(26,"label",16),b(27,"Fax"),T(),Ue(28,"input",17),T(),_(29,"div",6)(30,"label",18),b(31,"Mobile"),T(),Ue(32,"input",19),T(),_(33,"div",6)(34,"label",20),b(35,"Phone"),T(),Ue(36,"input",21),T(),_(37,"div",6)(38,"label",22),b(39,"Active Status"),T(),_(40,"select",23)(41,"option",24),b(42,"Active"),T(),_(43,"option",24),b(44,"Inactive"),T()()()()(),_(45,"div",25)(46,"button",26),W("click",function(){return o.saveChanges()}),b(47,"Save"),T(),_(48,"button",27),W("click",function(){return o.closeModal()}),b(49,"Cancel"),T()()()()),r&2&&(U(8),ae("formGroup",o.employeeForm),U(33),ae("ngValue",1),U(2),ae("ngValue",0))},dependencies:[ot,ZA,GA,KA,QA,Pa,Nf,bf,LA,$v,Gv],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:25px;border-radius:8px;box-shadow:0 5px 15px #0000004d;width:90%;max-width:600px;position:relative;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee;padding-bottom:15px;margin-bottom:20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:2rem;cursor:pointer;color:#aaa;transition:color .2s}.close-button[_ngcontent-%COMP%]:hover{color:#666}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px;color:#555}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;box-sizing:border-box;font-size:1rem;background-color:#f9f9f9}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding-top:20px;border-top:1px solid #eee;margin-top:20px}.save-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:4px;font-size:1rem;cursor:pointer}.save-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;transition:background-color .2s}.save-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.cancel-button[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#333;border:1px solid #ccc;transition:background-color .2s}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})}}return n})();var Gx=n=>({collapsed:n});function zx(n,e){n&1&&Ue(0,"app-sidebar")}function qx(n,e){if(n&1){let t=tr();_(0,"app-employee-edit-modal",12),W("close",function(){Tn(t);let o=Ve();return _n(o.closeEditModal())})("save",function(o){Tn(t);let i=Ve();return _n(i.onEmployeeSaved(o))}),T()}if(n&2){let t=Ve();ae("employee",t.selectedEmployee)}}var iS=(()=>{class n{constructor(t,r,o){this.http=t,this.msalService=r,this.msalBroadcastService=o,this.userName="",this.userEmail="",this.employees=null,this._allEmployees=[],this.paginatedEmployees=[],this.pageSize=50,this.currentPage=1,this.isSidebarOpen=!0,this.selectedEmployee=null,this.showEditModal=!1,this.searchTerm=""}ngOnInit(){this.msalBroadcastService.inProgress$.pipe(Ae(t=>t===he.None)).subscribe(()=>{let t=this.msalService.instance.getActiveAccount();this.userName=t?.name||"",this.userEmail=t?.username||"N/A",this.loadAllEmployees()})}loadAllEmployees(){this.http.get(`${vf.apiBaseUrl}/api/Employee`).subscribe({next:t=>{this._allEmployees=t,this.applySearchFilter()},error:t=>console.error("API call failed",t)})}applySearchFilter(){this.searchTerm&&this._allEmployees?this.employees=this._allEmployees.filter(t=>t.employeeNumber.includes(this.searchTerm)):this.employees=this._allEmployees,this.onPageChange()}onPageChange(){if(!this.employees)return;let t=(this.currentPage-1)*this.pageSize,r=t+this.pageSize;this.paginatedEmployees=this.employees.slice(t,r)}nextPage(){this.currentPage++,this.onPageChange()}prevPage(){this.currentPage--,this.onPageChange()}get totalPages(){return this.employees?Math.ceil(this.employees.length/this.pageSize):0}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}onEditEmployee(t){this.selectedEmployee=p({},t),this.showEditModal=!0}onAddEmployee(){this.selectedEmployee={employeeCode:"",employeeNumber:"",name:"",email:"",fax:"",mobile:"",phone:"",active:1,employeeTeams:[]},this.showEditModal=!0}closeEditModal(){this.showEditModal=!1,this.selectedEmployee=null}onEmployeeSaved(t){this.loadAllEmployees(),this.closeEditModal()}static{this.\u0275fac=function(r){return new(r||n)(x(oc),x(Pt),x(_r))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[rt],decls:18,vars:13,consts:[[1,"dashboard-container"],[4,"ngIf"],[1,"main-content",3,"ngClass"],[3,"toggleMenu","userName","userEmail"],[1,"content-body"],[1,"search-container"],["type","text","placeholder","Search by Employee Number",3,"ngModelChange","ngModel"],[1,"add-button",3,"click"],[3,"edit","employees"],[1,"pagination-controls"],[3,"click","disabled"],[3,"employee","close","save",4,"ngIf"],[3,"close","save","employee"]],template:function(r,o){r&1&&(_(0,"div",0),Ke(1,zx,1,0,"app-sidebar",1),_(2,"div",2)(3,"app-header",3),W("toggleMenu",function(){return o.toggleSidebar()}),T(),_(4,"div",4)(5,"div",5)(6,"input",6),Hm("ngModelChange",function(s){return nw(o.searchTerm,s)||(o.searchTerm=s),s}),W("ngModelChange",function(){return o.applySearchFilter()}),T(),_(7,"button",7),W("click",function(){return o.onAddEmployee()}),b(8,"Add New Employee"),T()(),_(9,"app-team-details",8),W("edit",function(s){return o.onEditEmployee(s)}),T(),_(10,"div",9)(11,"button",10),W("click",function(){return o.prevPage()}),b(12," Previous "),T(),_(13,"span"),b(14),T(),_(15,"button",10),W("click",function(){return o.nextPage()}),b(16," Next "),T()()()()(),Ke(17,qx,1,1,"app-employee-edit-modal",11)),r&2&&(U(),ae("ngIf",o.isSidebarOpen),U(),ae("ngClass",ow(11,Gx,!o.isSidebarOpen)),U(),ae("userName",o.userName)("userEmail",o.userEmail),U(3),Vm("ngModel",o.searchTerm),U(3),ae("employees",o.paginatedEmployees),U(2),ae("disabled",o.currentPage===1),U(3),Um("Page ",o.currentPage," of ",o.totalPages,""),U(),ae("disabled",o.currentPage===o.totalPages),U(2),ae("ngIf",o.showEditModal&&o.selectedEmployee))},dependencies:[ot,Ed,Lr,JA,Pa,bf,jv,eS,tS,nS,oS],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;height:100vh;background-color:#f0f2f5}.main-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:10px;margin-top:15px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:#555}.search-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:15px;margin-bottom:20px}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px;padding:10px 15px;font-size:16px;border:1px solid #ccc;border-radius:4px}.add-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#840d81;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .2s}.add-button[_ngcontent-%COMP%]:hover{background-color:#6a0b68}.search-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:15px;margin-bottom:20px}.content-body[_ngcontent-%COMP%]{padding:20px;flex-grow:1;overflow-y:auto}.search-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:400px;padding:12px 15px;font-size:16px;border:1px solid #ccc;border-radius:4px}.add-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#6a0b68;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .2s}.add-button[_ngcontent-%COMP%]:hover{background-color:#550953}"]})}}return n})();var sS=(()=>{class n{constructor(t){this.msalService=t}login(){this.msalService.loginRedirect()}static{this.\u0275fac=function(r){return new(r||n)(x(Pt))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-login"]],standalone:!0,features:[rt],decls:5,vars:0,consts:[[1,"login-container"],[3,"click"]],template:function(r,o){r&1&&(_(0,"div",0)(1,"h1"),b(2,"Welcome"),T(),_(3,"button",1),W("click",function(){return o.login()}),b(4,"Sign in with Azure AD"),T()())},dependencies:[ot]})}}return n})();var aS=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:iS,canActivate:[gf]},{path:"login",component:sS},{path:"**",redirectTo:"dashboard"}];function Kx(){return new Gl({auth:{clientId:"13c4baa0-9cff-48ea-92c7-f0412f534b79",authority:"https://login.microsoftonline.com/cd5af8c4-8384-4744-8714-6bb15f78d910",redirectUri:"http://localhost:4200"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}})}function Wx(){return{interactionType:M.Redirect,authRequest:{scopes:["User.Read"]}}}function Qx(){let n=new Map;return n.set("https://localhost:7124/api/Employee",["api://c8446323-a46a-4da2-a035-2780449d8217/User.Read","api://c8446323-a46a-4da2-a035-2780449d8217/User.Write"]),{interactionType:M.Redirect,protectedResourceMap:n}}var cS={providers:[Pt,gf,_r,pA,{provide:mf,useFactory:Kx},{provide:Pv,useFactory:Wx},{provide:xv,useFactory:Qx},{provide:rg,useClass:fA,multi:!0},OT(aS,Jg()),xw(Fw())]};function Yx(n,e){if(n&1){let t=tr();_(0,"div",2)(1,"button",3),W("click",function(){Tn(t);let o=Ve();return _n(o.logout())}),b(2,"Logout"),T()()}}function Jx(n,e){if(n&1){let t=tr();_(0,"div",2)(1,"button",3),W("click",function(){Tn(t);let o=Ve();return _n(o.login())}),b(2,"Login"),T()()}}var lS=(()=>{class n{constructor(t,r){this.msalService=t,this.msalBroadcastService=r,this.loginDisplay=!1}ngOnInit(){this.msalBroadcastService.inProgress$.pipe(Ae(t=>t===he.None)).subscribe(()=>{this.setLoginDisplay()})}setLoginDisplay(){this.loginDisplay=this.msalService.instance.getAllAccounts().length>0}login(){this.msalService.loginRedirect()}logout(){this.msalService.logoutRedirect()}static{this.\u0275fac=function(r){return new(r||n)(x(Pt),x(_r))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-root"]],standalone:!0,features:[rt],decls:4,vars:2,consts:[[1,"header"],["class","user-info",4,"ngIf"],[1,"user-info"],[3,"click"]],template:function(r,o){r&1&&(_(0,"div",0),Ke(1,Yx,3,0,"div",1)(2,Jx,3,0,"div",1),T(),Ue(3,"router-outlet")),r&2&&(U(),ae("ngIf",o.loginDisplay),U(),ae("ngIf",!o.loginDisplay))},dependencies:[ot,Lr,Wd,Gg],encapsulation:2})}}return n})();zw(lS,cS).catch(n=>console.error(n));
